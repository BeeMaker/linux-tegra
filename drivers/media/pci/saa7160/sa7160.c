#include "LINUXV4L2.h"
#include "property.h"
#include "wrapper.h"
#include "sa7160.h"
#include "ite6603.h"
#include "mst3367.h"


#define C_PLL_FREQ 2500

#define DECODER_STATUS_CHANGE_THRESHOLD 10 // 5 seconds

//BYTE COLOR_BAR_720[ 720 * 2 ];
//BYTE COLOR_BAR_1280[ 1280 * 2 ];
//BYTE COLOR_BAR_1920[ 1920 * 2 ];
//BYTE COLOR_BAR_3840[ 3840 * 2 ];

BYTE WHITE_LINE_3840[ 3840 * 2 ];
BYTE YELLOW_LINE_3840[ 3840 * 2 ];
BYTE CYAN_LINE_3840[ 3840 * 2 ];
BYTE GREEN_LINE_3840[ 3840 * 2 ];
BYTE MAGENTA_LINE_3840[ 3840 * 2 ];
BYTE RED_LINE_3840[ 3840 * 2 ];
BYTE BLUE_LINE_3840[ 3840 * 2 ];
BYTE BLACK_LINE_3840[ 3840 * 2 ];

// ##############################################################################################################################################################################

//#define SA7160_COPYPORTECT_ARCHITECTURE

#ifdef SA7160_COPYPORTECT_ARCHITECTURE

static ULONG FD0AC55FE0C0B45a788FEC199C5758F1E[ 16 ] = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };

static ULONG F6053D464C87D41c1B8CBE8A39FCDF2D2[ 16 ] = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };

#endif

extern F42A18AF66EFF459eA332CA253FFF8A65 * g_pDevice[ 128 ];

ULONG REG_RESOLUTION_TABLE_CUSTOM[ 1 ][ 7 ][ 2 ] = {

	{ { 0x0140, 0x00000000 + 0x00000000 }, { 0x0144, 0x00000000 + 0x00000000 }, { 0x0304, 0x00000000 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000000 }, { 0x0354, 0x00000000 } },
};

ULONG REG_RESOLUTION_TABLE_GV7601[   2 ][ 7 ][ 2 ] = {

	{ { 0x0140, 0x00860002 + 0x00020000 }, { 0x0144, 0x008600F2 + 0x02D20000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A1 }, { 0x0100, 0x00004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x008C0000 + 0x00020000 }, { 0x0144, 0x008C0120 + 0x02D20000 }, { 0x0304, 0x02D00120 }, { 0x0300, 0x800020A1 }, { 0x0100, 0x00004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  288 PAL
};

ULONG REG_RESOLUTION_TABLE_TW9910[   4 ][ 7 ][ 2 ] = { // do not change order

//euresys square pixel
	{ { 0x0140, 0x00800000 + 0x00000000 }, { 0x0144, 0x008000F0 + 0x02800000 }, { 0x0304, 0x028000F0 }, { 0x0300, 0x800020A1 }, { 0x0100, 0x00004001 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000500 } }, //  640 ×  240 NTSC //0

	{ { 0x0140, 0x00840000 + 0x00020000 }, { 0x0144, 0x008400F0 + 0x02D20000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A1 }, { 0x0100, 0x00004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC //0
	
	{ { 0x0140, 0x008A0000 + 0x00020000 }, { 0x0144, 0x008A0120 + 0x02D20000 }, { 0x0304, 0x02D00120 }, { 0x0300, 0x800020A1 }, { 0x0100, 0x00004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  288 PAL //1
	
	{ { 0x0140, 0x00A00000 + 0x00000000 }, { 0x0144, 0x00A00120 + 0x03000000 }, { 0x0304, 0x03000120 }, { 0x0300, 0x800020A1 }, { 0x0100, 0x00004001 }, { 0x0344, 0x00000C00 }, { 0x0354, 0x00000600 } }, //  768 ×  288 PAL //70
};

ULONG REG_RESOLUTION_TABLE_ADV7181[ 4 ][ 7 ][ 2 ] = {

	{ { 0x0140, 0x00880000 + 0x00000002 }, { 0x0144, 0x008800F0 + 0x02D00002 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A1 }, { 0x0100, 0x00004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x008E0000 + 0x00000000 }, { 0x0144, 0x008E0120 + 0x02D00000 }, { 0x0304, 0x02D00120 }, { 0x0300, 0x800020A1 }, { 0x0100, 0x00004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  288 PAL
	{ { 0x0140, 0x00840000 + 0x00020000 }, { 0x0144, 0x008400F0 + 0x02D20000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC (YCBCR)
	{ { 0x0140, 0x008A0000 + 0x00020000 }, { 0x0144, 0x008A0120 + 0x02D20000 }, { 0x0304, 0x02D00120 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  288 PAL  (YCBCR)
};

ULONG REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ 5 ][ 7 ][ 2 ] = {

	{ { 0x0140, 0x01020015 + 0x00020000 }, { 0x0144, 0x010202D0 + 0x05020015 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x03008201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 30FPS
	{ { 0x0140, 0x01020015 + 0x00020000 }, { 0x0144, 0x010202D0 + 0x05020015 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x03008201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 25FPS
	{ { 0x0140, 0x01020015 + 0x00020000 }, { 0x0144, 0x010202D0 + 0x05020015 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x03008201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 24FPS
	{ { 0x0140, 0x01000015 + 0x00020000 }, { 0x0144, 0x010002D0 + 0x05020015 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x03008201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 60FPS
	{ { 0x0140, 0x01000015 + 0x00020000 }, { 0x0144, 0x010002D0 + 0x05020015 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x03008201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 50FPS
};

ULONG REG_RESOLUTION_TABLE_ISMART_CAHC_CAMERA[ 6 ][ 7 ][ 2 ] = {

	{ { 0x0140, 0x000A0000 + 0x00000000 }, { 0x0144, 0x050002CF + 0x000A0000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 60FPS
	{ { 0x0140, 0x000A0000 + 0x00000000 }, { 0x0144, 0x050002CF + 0x000A0000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 50FPS
	{ { 0x0140, 0x000A0000 + 0x00000000 }, { 0x0144, 0x0780021B + 0x000A0000 }, { 0x0304, 0x0780021C }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00001E00 }, { 0x0354, 0x00000F00 } }, // 1920 ×  540 NTSC
	{ { 0x0140, 0x000A0000 + 0x00000000 }, { 0x0144, 0x0780021B + 0x000A0000 }, { 0x0304, 0x0780021C }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00001E00 }, { 0x0354, 0x00000F00 } }, // 1920 ×  540 PAL
	{ { 0x0140, 0x000A0000 + 0x00000000 }, { 0x0144, 0x07800437 + 0x000A0000 }, { 0x0304, 0x07800438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 30FPS
	{ { 0x0140, 0x000A0000 + 0x00000000 }, { 0x0144, 0x07800437 + 0x000A0000 }, { 0x0304, 0x07800438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 25FPS
};

#if 1

ULONG REG_RESOLUTION_TABLE_AUTO_ITE6603 [ 7 ] = { 0x0140, 0x0144, 0x0304, 0x0300, 0x0100, 0x0344, 0x0354 };

#else

ULONG REG_RESOLUTION_TABLE_ITE6603[ 76 ][ 7 ][ 2 ] = {

	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D0011F + 0x00040000 }, { 0x0304, 0x02D00120 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  288 PAL
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D001DF + 0x00040000 }, { 0x0304, 0x02D001E0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x000005A0 }, { 0x0354, 0x00000000 } }, //  720 ×  480 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D0023F + 0x00040000 }, { 0x0304, 0x02D00240 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x000005A0 }, { 0x0354, 0x00000000 } }, //  720 ×  576 PAL
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050002CF + 0x00040000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 30FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050002CF + 0x00040000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 25FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050002CF + 0x00040000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 24FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050002CF + 0x00040000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050002CF + 0x00040000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 50FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x0780021B + 0x00040000 }, { 0x0304, 0x0780021C }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00001E00 }, { 0x0354, 0x00000F00 } }, // 1920 ×  540 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x0780021B + 0x00040000 }, { 0x0304, 0x0780021C }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00001E00 }, { 0x0354, 0x00000F00 } }, // 1920 ×  540 PAL
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x07800437 + 0x00040000 }, { 0x0304, 0x07800438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 30FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x07800437 + 0x00040000 }, { 0x0304, 0x07800438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 25FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x07800437 + 0x00040000 }, { 0x0304, 0x07800438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 24FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x03C00437 + 0x00040000 }, { 0x0304, 0x03C00438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x03C00437 + 0x00040000 }, { 0x0304, 0x03C00438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 50FPS
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x028001DF + 0x00040000 }, { 0x0304, 0x028001E0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, //  640 ×  480 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x03200257 + 0x00040000 }, { 0x0304, 0x03200258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000640 }, { 0x0354, 0x00000000 } }, //  800 ×  600 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x040002FF + 0x00040000 }, { 0x0304, 0x04000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000800 }, { 0x0354, 0x00000000 } }, // 1024 ×  768 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050003BF + 0x00040000 }, { 0x0304, 0x050003C0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  960 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050003FF + 0x00040000 }, { 0x0304, 0x05000400 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 × 1024 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x05A00383 + 0x00040000 }, { 0x0304, 0x05A00384 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x00000000 } }, // 1440 ×  900 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x000005A0 }, { 0x0354, 0x00000000 } }, //  720 ×  240 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D0011F + 0x00040000 }, { 0x0304, 0x02D00120 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x000005A0 }, { 0x0354, 0x00000000 } }, //  720 ×  288 50FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x0280018F + 0x00040000 }, { 0x0304, 0x02800190 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, //  640 ×  400 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x0280017F + 0x00040000 }, { 0x0304, 0x02800180 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, //  640 ×  384 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050002FF + 0x00040000 }, { 0x0304, 0x05000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  768 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x0500031F + 0x00040000 }, { 0x0304, 0x05000320 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  800 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x055002FF + 0x00040000 }, { 0x0304, 0x05500300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000AA0 }, { 0x0354, 0x00000000 } }, // 1360 ×  768 60FPS
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x03200257 + 0x00040000 }, { 0x0304, 0x03200258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000640 }, { 0x0354, 0x00000000 } }, //  800 ×  600 75FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x03200257 + 0x00040000 }, { 0x0304, 0x03200258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000640 }, { 0x0354, 0x00000000 } }, //  800 ×  600 85FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x040002FF + 0x00040000 }, { 0x0304, 0x04000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000800 }, { 0x0354, 0x00000000 } }, // 1024 ×  768 75FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x040002FF + 0x00040000 }, { 0x0304, 0x04000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000800 }, { 0x0354, 0x00000000 } }, // 1024 ×  768 85FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050002FF + 0x00040000 }, { 0x0304, 0x05000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  768 75FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050002FF + 0x00040000 }, { 0x0304, 0x05000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, // 1280 ×  768 85FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x0500031F + 0x00040000 }, { 0x0304, 0x05000320 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  800 75FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02800320 + 0x00040000 }, { 0x0304, 0x02800320 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, // 1280 ×  800 85FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x028003C0 + 0x00040000 }, { 0x0304, 0x028003C0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, // 1280 ×  960 75FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x028003C0 + 0x00040000 }, { 0x0304, 0x028003C0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, // 1280 ×  960 85FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02800400 + 0x00040000 }, { 0x0304, 0x02800400 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, // 1280 × 1024 75FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02800400 + 0x00040000 }, { 0x0304, 0x02800400 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, // 1280 × 1024 85FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D00384 + 0x00040000 }, { 0x0304, 0x02D00384 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x000005A0 }, { 0x0354, 0x00000000 } }, // 1440 ×  900 75FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D00384 + 0x00040000 }, { 0x0304, 0x02D00384 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000780 }, { 0x0354, 0x00000000 } }, // 1440 ×  900 85FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x07800400 + 0x00040000 }, { 0x0304, 0x07800400 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 3840 × 1024 30FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050002CF + 0x00040000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 60FPS SPECIAL VESA
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x03C00437 + 0x00040000 }, { 0x0304, 0x03C00438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 60FPS SPECIAL VESA
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050003FF + 0x00040000 }, { 0x0304, 0x05000400 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 × 1024 50FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050002CF + 0x00040000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 59FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x050003FF + 0x00040000 }, { 0x0304, 0x05000400 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 × 1024 59FPS
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC 
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC 
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC 
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC 
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC 
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC 
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC 
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC 
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC 
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC 
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D000EF + 0x00040000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x004C0000 + 0x00020000 }, { 0x0144, 0x004C0438 + 0x07820000 }, { 0x0304, 0x07800438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 3840 × 2160 --FPS
	{ { 0x0140, 0x004C0000 + 0x00020000 }, { 0x0144, 0x004C041A + 0x057A0000 }, { 0x0304, 0x0578041A }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000AF0 }, { 0x0354, 0x00000000 } }, // 2800 × 2100 --FPS
	{ { 0x0140, 0x004C0000 + 0x00020000 }, { 0x0144, 0x004C02D0 + 0x05020000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 2560 × 1440 --FPS
};

#endif

ULONG REG_RESOLUTION_TABLE[ 76 ][ 7 ][ 2 ] = { // 刻度為 PIXEL

	{ { 0x0140, 0x00840000 + 0x00020000 }, { 0x0144, 0x008400F0 + 0x02D20000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  240 NTSC
	{ { 0x0140, 0x008A0000 + 0x00020000 }, { 0x0144, 0x008A0120 + 0x02D20000 }, { 0x0304, 0x02D00120 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  720 ×  288 PAL
	{ { 0x0140, 0x00840000 + 0x00020000 }, { 0x0144, 0x008401E0 + 0x02D20000 }, { 0x0304, 0x02D001E0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x000005A0 }, { 0x0354, 0x00000000 } }, //  720 ×  480 NTSC
	{ { 0x0140, 0x008A0000 + 0x00020000 }, { 0x0144, 0x008A0240 + 0x02D20000 }, { 0x0304, 0x02D00240 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x000005A0 }, { 0x0354, 0x00000000 } }, //  720 ×  576 PAL
	{ { 0x0140, 0x07DE0000 + 0x00020000 }, { 0x0144, 0x07DE02D0 + 0x05020000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 30FPS
	{ { 0x0140, 0x0A720000 + 0x00020000 }, { 0x0144, 0x0A7202D0 + 0x05020000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 25FPS
	{ { 0x0140, 0x0A720000 + 0x00020000 }, { 0x0144, 0x0A7202D0 + 0x05020000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 24FPS
	{ { 0x0140, 0x016C0000 + 0x00020000 }, { 0x0144, 0x016C02D0 + 0x05020000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 60FPS
	{ { 0x0140, 0x02B60000 + 0x00020000 }, { 0x0144, 0x02B602D0 + 0x05020000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 50FPS
	{ { 0x0140, 0x01120000 + 0x00020000 }, { 0x0144, 0x0112021C + 0x07820000 }, { 0x0304, 0x0780021C }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00001E00 }, { 0x0354, 0x00000F00 } }, // 1920 ×  540 NTSC
//	{ { 0x0140, 0x00060000 + 0x00020000 }, { 0x0144, 0x0006021B + 0x07820000 }, { 0x0304, 0x0780021B }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00001E00 }, { 0x0354, 0x00000F00 } }, // 1920 ×  540 NTSC
	{ { 0x0140, 0x02CA0000 + 0x00020000 }, { 0x0144, 0x02CA021C + 0x07820000 }, { 0x0304, 0x0780021C }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00001E00 }, { 0x0354, 0x00000F00 } }, // 1920 ×  540 PAL
	{ { 0x0140, 0x01120000 + 0x00020000 }, { 0x0144, 0x01120438 + 0x07820000 }, { 0x0304, 0x07800438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 30FPS
//	{ { 0x0140, 0x00040000 + 0x00020000 }, { 0x0144, 0x00040438 + 0x07820000 }, { 0x0304, 0x07800438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 30FPS (廣圓電子)
	{ { 0x0140, 0x02CA0000 + 0x00020000 }, { 0x0144, 0x02CA0438 + 0x07820000 }, { 0x0304, 0x07800438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 25FPS
	{ { 0x0140, 0x03380000 + 0x00020000 }, { 0x0144, 0x03380438 + 0x07820000 }, { 0x0304, 0x07800438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 24FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x03C00438 + 0x00040000 }, { 0x0304, 0x03C00438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x03C00438 + 0x00040000 }, { 0x0304, 0x03C00438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 50FPS
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	{ { 0x0140, 0x009A0000 + 0x00020000 }, { 0x0144, 0x009A01E0 + 0x02820000 }, { 0x0304, 0x028001E0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, //  640 ×  480 60FPS
	{ { 0x0140, 0x00FA0000 + 0x00020000 }, { 0x0144, 0x00FA0258 + 0x03220000 }, { 0x0304, 0x03200258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000640 }, { 0x0354, 0x00000000 } }, //  800 ×  600 60FPS
	{ { 0x0140, 0x013A0000 + 0x00020000 }, { 0x0144, 0x013A0300 + 0x04020000 }, { 0x0304, 0x04000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000800 }, { 0x0354, 0x00000000 } }, // 1024 ×  768 60FPS
	{ { 0x0140, 0x02020000 + 0x00020000 }, { 0x0144, 0x020203C0 + 0x05020000 }, { 0x0304, 0x050003C0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  960 60FPS
	{ { 0x0140, 0x01920000 + 0x00020000 }, { 0x0144, 0x01920400 + 0x05020000 }, { 0x0304, 0x05000400 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 × 1024 60FPS
	{ { 0x0140, 0x01CA0000 + 0x00020000 }, { 0x0144, 0x01CA0384 + 0x05A20000 }, { 0x0304, 0x05A00384 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x00000000 } }, // 1440 ×  900 60FPS
	{ { 0x0140, 0x00710000 + 0x00020000 }, { 0x0144, 0x007100F0 + 0x02D20000 }, { 0x0304, 0x02D000F0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x000005A0 }, { 0x0354, 0x00000000 } }, //  720 ×  240 60FPS
	{ { 0x0140, 0x007E0000 + 0x00020000 }, { 0x0144, 0x007E0120 + 0x02D20000 }, { 0x0304, 0x02D00120 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x000005A0 }, { 0x0354, 0x00000000 } }, //  720 ×  288 50FPS
	{ { 0x0140, 0x00CA0000 + 0x00020000 }, { 0x0144, 0x00CA0190 + 0x02820000 }, { 0x0304, 0x02800190 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, //  640 ×  400 60FPS
	{ { 0x0140, 0x00CA0000 + 0x00020000 }, { 0x0144, 0x00CA0180 + 0x02820000 }, { 0x0304, 0x02800180 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, //  640 ×  384 60FPS
	{ { 0x0140, 0x017A0000 + 0x00020000 }, { 0x0144, 0x017A0300 + 0x05020000 }, { 0x0304, 0x05000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  768 60FPS	
	{ { 0x0140, 0x018C0000 + 0x00000000 }, { 0x0144, 0x018C0320 + 0x05000000 }, { 0x0304, 0x05000320 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  800 60FPS
	{ { 0x0140, 0x01AC0000 + 0x00000000 }, { 0x0144, 0x01AC0300 + 0x05500000 }, { 0x0304, 0x05500300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000AA0 }, { 0x0354, 0x00000000 } }, // 1360 ×  768 60FPS
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	{ { 0x0140, 0x00FA0000 + 0x00020000 }, { 0x0144, 0x00FA0258 + 0x03220000 }, { 0x0304, 0x03200258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000640 }, { 0x0354, 0x00000000 } }, //  800 ×  600 75FPS
	{ { 0x0140, 0x00F20000 + 0x00020000 }, { 0x0144, 0x00F20258 + 0x03220000 }, { 0x0304, 0x03200258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000640 }, { 0x0354, 0x00000000 } }, //  800 ×  600 85FPS
	{ { 0x0140, 0x011A0000 + 0x00020000 }, { 0x0144, 0x011A0300 + 0x04020000 }, { 0x0304, 0x04000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000800 }, { 0x0354, 0x00000000 } }, // 1024 ×  768 75FPS
	{ { 0x0140, 0x015A0000 + 0x00020000 }, { 0x0144, 0x015A0300 + 0x04020000 }, { 0x0304, 0x04000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000800 }, { 0x0354, 0x00000000 } }, // 1024 ×  768 85FPS
	{ { 0x0140, 0x019A0000 + 0x00020000 }, { 0x0144, 0x019A0300 + 0x05020000 }, { 0x0304, 0x05000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  768 75FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02800300 + 0x00040000 }, { 0x0304, 0x02800300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, // 1280 ×  768 85FPS
	{ { 0x0140, 0x019C0000 + 0x00000000 }, { 0x0144, 0x019C0320 + 0x05000000 }, { 0x0304, 0x05000320 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  800 75FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02800320 + 0x00040000 }, { 0x0304, 0x02800320 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, // 1280 ×  800 85FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x028003C0 + 0x00040000 }, { 0x0304, 0x028003C0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, // 1280 ×  960 75FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x028003C0 + 0x00040000 }, { 0x0304, 0x028003C0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, // 1280 ×  960 85FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02800400 + 0x00040000 }, { 0x0304, 0x02800400 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, // 1280 × 1024 75FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02800400 + 0x00040000 }, { 0x0304, 0x02800400 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, // 1280 × 1024 85FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D00384 + 0x00040000 }, { 0x0304, 0x02D00384 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x000005A0 }, { 0x0354, 0x00000000 } }, // 1440 ×  900 75FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02D00384 + 0x00040000 }, { 0x0304, 0x02D00384 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000780 }, { 0x0354, 0x00000000 } }, // 1440 ×  900 85FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x07800400 + 0x00040000 }, { 0x0304, 0x07800400 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 3840 × 1024 30FPS
	{ { 0x0140, 0x017C0000 + 0x00020000 }, { 0x0144, 0x017C02D0 + 0x05020000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 60FPS SPECIAL VESA
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x03C00438 + 0x00040000 }, { 0x0304, 0x03C00438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1080 60FPS SPECIAL VESA
	{ { 0x0140, 0x018A0000 + 0x00020000 }, { 0x0144, 0x018A0400 + 0x05020000 }, { 0x0304, 0x05000400 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 × 1024 50FPS
	{ { 0x0140, 0x042A0000 + 0x00020000 }, { 0x0144, 0x042A02D0 + 0x05020000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 ×  720 59FPS
	{ { 0x0140, 0x01920000 + 0x00020000 }, { 0x0144, 0x01920400 + 0x05020000 }, { 0x0304, 0x05000400 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 1280 × 1024 59FPS
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	{ { 0x0140, 0x00DA0000 + 0x00020000 }, { 0x0144, 0x00DA0258 + 0x03220000 }, { 0x0304, 0x03200258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000640 }, { 0x0354, 0x00000000 } }, //  800 ×  600 56FPS
	{ { 0x0140, 0x00BA0000 + 0x00020000 }, { 0x0144, 0x00BA01E0 + 0x02820000 }, { 0x0304, 0x028001E0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, //  640 ×  480 72FPS 
	{ { 0x0140, 0x00C20000 + 0x00020000 }, { 0x0144, 0x00C201E0 + 0x02820000 }, { 0x0304, 0x028001E0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, //  640 ×  480 75FPS 
	{ { 0x0140, 0x00BA0000 + 0x00020000 }, { 0x0144, 0x00BA01E0 + 0x02820000 }, { 0x0304, 0x028001E0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000500 }, { 0x0354, 0x00000000 } }, //  640 ×  480 85FPS 
	{ { 0x0140, 0x00EA0000 + 0x00020000 }, { 0x0144, 0x00EA0258 + 0x03220000 }, { 0x0304, 0x03200258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000640 }, { 0x0354, 0x00000000 } }, //  800 ×  600 72FPS
	{ { 0x0140, 0x012A0000 + 0x00020000 }, { 0x0144, 0x012A0300 + 0x04020000 }, { 0x0304, 0x04000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000800 }, { 0x0354, 0x00000000 } }, // 1024 ×  768 70FPS
	{ { 0x0140, 0x01BA0000 + 0x00020000 }, { 0x0144, 0x01BC0360 + 0x04820000 }, { 0x0304, 0x04800360 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000800 }, { 0x0354, 0x00000000 } }, // 1152 ×  864 75FPS
//	{ { 0x0140, 0x01CA0000 + 0x00020000 }, { 0x0144, 0x01CA041A + 0x057A0000 }, { 0x0304, 0x0578041A }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000578 }, { 0x0354, 0x00000000 } }, // 1400 × 1050 60FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02BC041A + 0x00040000 }, { 0x0304, 0x02BC041A }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000578 }, { 0x0354, 0x00000000 } }, // 1400 × 1050 60FPS
	{ { 0x0140, 0x011A0000 + 0x00020000 }, { 0x0144, 0x011A0300 + 0x04020000 }, { 0x0304, 0x04000300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000800 }, { 0x0354, 0x00000000 } }, // 1024 ×  768 50FPS
	{ { 0x0140, 0x00D10000 + 0x00020000 }, { 0x0144, 0x00D10190 + 0x02D20000 }, { 0x0304, 0x02D00190 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x000005A0 }, { 0x0354, 0x00000000 } }, //  720 ×  400 85FPS
	{ { 0x0140, 0x011A0000 + 0x00020000 }, { 0x0144, 0x011A0270 + 0x03420000 }, { 0x0304, 0x03400270 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x000005A0 }, { 0x0354, 0x00000000 } }, //  832 ×  624 75FPS
	{ { 0x0140, 0x011A0000 + 0x00020000 }, { 0x0144, 0x011A0258 + 0x042A0000 }, { 0x0304, 0x04280258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000800 }, { 0x0354, 0x00000000 } }, // 1064 ×  600 60FPS
//	{ { 0x0140, 0x009A0000 + 0x00020000 }, { 0x0144, 0x009A041A + 0x057A0000 }, { 0x0304, 0x0578041A }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000578 }, { 0x0354, 0x00000000 } }, // 1400 × 1050 61FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x02BC041A + 0x00040000 }, { 0x0304, 0x02BC041A }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000578 }, { 0x0354, 0x00000000 } }, // 1400 × 1050 60FPS

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	{ { 0x0140, 0x011A0000 + 0x00020000 }, { 0x0144, 0x011A0258 + 0x04020000 }, { 0x0304, 0x04000258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000800 }, { 0x0354, 0x00000000 } }, // 1024 ×  600 60FPS SEGA
	{ { 0x0140, 0x019C0000 + 0x00000000 }, { 0x0144, 0x019C0300 + 0x05500000 }, { 0x0304, 0x05500300 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000AA0 }, { 0x0354, 0x00000000 } }, // 1360 ×  768 61FPS SEGA
	{ { 0x0140, 0x01CA0000 + 0x00020000 }, { 0x0144, 0x01CA021C + 0x05A20000 }, { 0x0304, 0x05A0021C }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00001680 }, { 0x0354, 0x00000B40 } }, // 1440 ×  540 50FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x0348041A + 0x00040000 }, { 0x0304, 0x0348041A }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000690 }, { 0x0354, 0x00000000 } }, // 1680 × 1050 --FPS
	{ { 0x0140, 0x00C20000 + 0x00020000 }, { 0x0144, 0x00C20258 + 0x03220000 }, { 0x0304, 0x03200258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000640 }, { 0x0354, 0x00000000 } }, //  800 ×  600 75FPS SPECIAL ALOKA A10 (超聲波)

	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x07800258 + 0x00040000 }, { 0x0304, 0x07800258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 1920 × 1200 --FPS

//	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x000004B0 + 0x03240000 }, { 0x0304, 0x032004B0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000640 }, { 0x0354, 0x00000000 } }, // 1600 × 1200 --FPS
	{ { 0x0140, 0x00000000 + 0x00040000 }, { 0x0144, 0x00000258 + 0x06440000 }, { 0x0304, 0x06400258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000C80 }, { 0x0354, 0x00000000 } }, // 1600 × 1200 --FPS
//	{ { 0x0140, 0x00040000 + 0x00000000 }, { 0x0144, 0x0004021C + 0x07800000 }, { 0x0304, 0x0780021C }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 3840 × 2160 --FPS
	{ { 0x0140, 0x00040000 + 0x00000000 }, { 0x0144, 0x00040438 + 0x07800000 }, { 0x0304, 0x07800438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 3840 × 2160 --FPS
//	{ { 0x0140, 0x00000000 + 0x00020000 }, { 0x0144, 0x00000438 + 0x07820000 }, { 0x0304, 0x07800438 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000F00 }, { 0x0354, 0x00000000 } }, // 3840 × 2160 --FPS
	{ { 0x0140, 0x00940000 + 0x00020000 }, { 0x0144, 0x00940120 + 0x03020000 }, { 0x0304, 0x03000120 }, { 0x0300, 0x800020A0 }, { 0x0100, 0x01004001 }, { 0x0344, 0x00000B40 }, { 0x0354, 0x000005A0 } }, //  768 ×  288 50FPS SPECAIL FOR VISION4CE
	{ { 0x0140, 0x01020000 + 0x00020000 }, { 0x0144, 0x01020258 + 0x03220000 }, { 0x0304, 0x03200258 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000640 }, { 0x0354, 0x00000000 } }, //  800 ×  600 56FPS
	{ { 0x0140, 0x014A0000 + 0x00020000 }, { 0x0144, 0x014A0200 + 0x03020000 }, { 0x0304, 0x03000200 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000600 }, { 0x0354, 0x00000000 } }, //  768 ×  512 56FPS
	{ { 0x0140, 0x00DA0000 + 0x00020000 }, { 0x0144, 0x00DA01F4 + 0x03220000 }, { 0x0304, 0x032001F4 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000640 }, { 0x0354, 0x00000000 } }, //  800 ×  500 75FPS
	{ { 0x0140, 0x004C0000 + 0x00020000 }, { 0x0144, 0x004C041A + 0x057A0000 }, { 0x0304, 0x0578041A }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000AF0 }, { 0x0354, 0x00000000 } }, // 2800 × 2100 --FPS
	{ { 0x0140, 0x004C0000 + 0x00020000 }, { 0x0144, 0x004C02D0 + 0x05020000 }, { 0x0304, 0x050002D0 }, { 0x0300, 0x000020A0 }, { 0x0100, 0x01004201 }, { 0x0344, 0x00000A00 }, { 0x0354, 0x00000000 } }, // 2560 × 1440 --FPS
}
;

// ##############################################################################################################################################################################
// #
// # PRODUCT NAME: SA7160
// #        CHIPS: NXP SAA7160
// #  MANUFACTORY: NXP
// #         DATE: 2010.08.02 ~ 2010.12.31
// #      CONTACT: 
// #      CONTACT: 
// #
// ##############################################################################################################################################################################
// 


ULONG A77C4935F8134B048348571A43F2A9CA( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONG F0FAB4549F1C3407aACDBD483D0D23C86 )
{
/*
	if( F02179B6B95CB43eeB160478D8CF83778 == 4 ) { return readl( (pDevice->F760673FD1F8F4f22914515A9DC68C7C9[ 0 ] + F0FAB4549F1C3407aACDBD483D0D23C86) ) & 0xFFFFFFFF; }

	if( F02179B6B95CB43eeB160478D8CF83778 == 2 ) { return readw( (pDevice->F760673FD1F8F4f22914515A9DC68C7C9[ 0 ] + F0FAB4549F1C3407aACDBD483D0D23C86) ) & 0x0000FFFF; }

	if( F02179B6B95CB43eeB160478D8CF83778 == 1 ) { return readb( (pDevice->F760673FD1F8F4f22914515A9DC68C7C9[ 0 ] + F0FAB4549F1C3407aACDBD483D0D23C86) ) & 0x000000FF; }
*/
	return readl( (pDevice->F760673FD1F8F4f22914515A9DC68C7C9[ 0 ] + F0FAB4549F1C3407aACDBD483D0D23C86) ) & 0xFFFFFFFF;

	return 0x00000000;
}

BOOLEAN A60D06861EDC409FA66867980ABA9748( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONG F0FAB4549F1C3407aACDBD483D0D23C86, ULONG F09894BF114FE4ee592C232BC39730E91)
{
/*
	if( F02179B6B95CB43eeB160478D8CF83778 == 4 ) { writel( (F09894BF114FE4ee592C232BC39730E91 & 0xFFFFFFFF), (pDevice->F760673FD1F8F4f22914515A9DC68C7C9[ 0 ] + F0FAB4549F1C3407aACDBD483D0D23C86) ); }

	if( F02179B6B95CB43eeB160478D8CF83778 == 2 ) { writew( (F09894BF114FE4ee592C232BC39730E91 & 0x0000FFFF), (pDevice->F760673FD1F8F4f22914515A9DC68C7C9[ 0 ] + F0FAB4549F1C3407aACDBD483D0D23C86) ); }

	if( F02179B6B95CB43eeB160478D8CF83778 == 1 ) { writeb( (F09894BF114FE4ee592C232BC39730E91 & 0x000000FF), (pDevice->F760673FD1F8F4f22914515A9DC68C7C9[ 0 ] + F0FAB4549F1C3407aACDBD483D0D23C86) ); }
*/
	writel( (F09894BF114FE4ee592C232BC39730E91 & 0xFFFFFFFF), (pDevice->F760673FD1F8F4f22914515A9DC68C7C9[ 0 ] + F0FAB4549F1C3407aACDBD483D0D23C86) ); 
	
	return TRUE;
}

BOOLEAN C15208D847BF4A9F9D474333B609281F( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONG nBus, BYTE * pData )
{
	// -----> CI2CLayer_IP3204::ReceiveData()
	// 
	ULONG R0000B008 = 0x00000000;

	ULONG i = 0;

	for( i = 0 ; i < 10000 ; i++ ) {

		R0000B008 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + nBus * 0x00001000 + 0x0008 ); // I2C.STATUS

		if( (R0000B008 & 0x00000410) == 0x00000000 ) { break ; }
		else
		{
			if( pDevice->iManufacturer == 0x0A || pDevice->iManufacturer == 0x0D || pDevice->iManufacturer == 0x18 || pDevice->iManufacturer == 0x1A ) {
				
				wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );
			}
		}

	//	F6B9E557A4BA24ffd926B820B836289C8_100NS( 100 );
	}
	if( R0000B008 & 0x00000410 ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] C15208D847BF4A9F9D474333B609281F( 1 ): GET BYTE 0x0000B008 = %08lX ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R0000B008 ); return FALSE; }

   *pData = (BYTE)(A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + nBus * 0x00001000 + 0x0000 )); // I2C.RX.FIFO 

	return TRUE;
}

BOOLEAN A5155323A5EF4FD390029B4DB7CCC950( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONG nBus, USHORT wData )
{
	// -----> CI2CLayer_IP3204::SendData()
	// 
	ULONG R0000B008 = 0x00000000;

	ULONG i = 0 ;

	for( i = 0 ; i < 1000 ; i++ ) {

		R0000B008 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + nBus * 0x00001000 + 0x0008 ); // I2C.STATUS

		if( (R0000B008 & 0x00000880) == 0x00000000 ) { break ; }
		else
		{
			if( pDevice->iManufacturer == 0x0A || pDevice->iManufacturer == 0x0D || pDevice->iManufacturer == 0x18 || pDevice->iManufacturer == 0x1A ) {
			
				wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );
			}
		}

	//	F6B9E557A4BA24ffd926B820B836289C8_100NS( 100 );
	}
	if( R0000B008 & 0x00000880 ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] A5155323A5EF4FD390029B4DB7CCC950( 1 ): SET BYTE 0x0000B008 = %08lX ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R0000B008 ); return FALSE; }

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + nBus * 0x00001000 + 0x0000, wData ); // I2C.TX.FIFO 

	for( i = 0 ; i < 5000; i++ ) {

		R0000B008 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + nBus * 0x00001000 + 0x0008 ); // I2C.STATUS

		if( R0000B008 & 0x00000040 ) { break ; }
		else
		{
			if( pDevice->iManufacturer == 0x0A || pDevice->iManufacturer == 0x0D || pDevice->iManufacturer == 0x18 || pDevice->iManufacturer == 0x1A ) {
				
				wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );
			}
		}


	//	F6B9E557A4BA24ffd926B820B836289C8_100NS( 100 );
	}
	if( (R0000B008 & 0x00000040) == 0x00000000 )  { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] A5155323A5EF4FD390029B4DB7CCC950( 2 ): SET BYTE 0x0000B008 = %08lX ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R0000B008 );  return FALSE; }
//	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "kkk:A5155323A5EF4FD390029B4DB7CCC950(%ld) = 0x%08X \n", nBus, wData );

	return TRUE;
}

BOOLEAN D102DB268C564A38A6914E7613DF0410( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONG nBus, BYTE * pIndex, ULONG nIndexLen, BYTE * pValue, ULONG nValueLen )
{
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + nBus * 0x00001000 + 0x0FE8, 0x00001FFF ); // I2C.INT.CLR.STATUS

	BYTE * po = pIndex;

	BYTE * pe = pValue;

	ULONG i = 0;

	ULONG j = 0;

	// -----> CI2CLayer_IP3204::ReadSequence() -----> CI2CLayer_IP3204::WriteSequence() 
	//
	for( i = 0 ; i < nIndexLen ; i++ ) {

		if( i == 0 ) { 
			
			ULONG R0000BFE0 = 0x00000000;

			if( FALSE == A5155323A5EF4FD390029B4DB7CCC950( pDevice, nBus, 0x00000100 | *po++ ) ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] D102DB268C564A38A6914E7613DF0410( 1 ): GET REGISTER %02X x %02X ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pIndex[ 0 ], pIndex[ 1 ] ); goto I2C_GET_ERROR; }

			for( j = 0 ; j < 10000 ; j++ ) {

				R0000BFE0 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + nBus * 0x00001000 + 0x0FE0 ); // I2C.INT.STATUS

				if( R0000BFE0 & 0x000000C7 )
				{
					break;
				}
				else
				{
					if( pDevice->iManufacturer == 0x0A || pDevice->iManufacturer == 0x0D || pDevice->iManufacturer == 0x18 || pDevice->iManufacturer == 0x1A ) {
					
						wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );
					}
				}

			//	F6B9E557A4BA24ffd926B820B836289C8_100NS( 100 );
			}
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + nBus * 0x00001000 + 0x0FE8, R0000BFE0 ); // I2C.INT.CLR.STATUS

			if( R0000BFE0 & 0x00000046 ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] D102DB268C564A38A6914E7613DF0410( 1 ): GET REGISTER %02X x %02X x 0x0000BFE0 = %08lX ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pIndex[ 0 ], pIndex[ 1 ], R0000BFE0 ); goto I2C_GET_ERROR; }
		} 
		else {

			if( FALSE == A5155323A5EF4FD390029B4DB7CCC950( pDevice, nBus, *po++ ) ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] D102DB268C564A38A6914E7613DF0410( 2 ): GET REGISTER %02X x %02X ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pIndex[ 0 ], pIndex[ 1 ] ); goto I2C_GET_ERROR; }
		}
	}

	// -----> CI2CLayer_IP3204::ReadSequence() 
	//
	A5155323A5EF4FD390029B4DB7CCC950( pDevice, nBus, 0x00000100 | pIndex[ 0 ] | 0x01 );

	for( i = 0 ; i < nValueLen - 1 ; i++ ) {

		if( FALSE == A5155323A5EF4FD390029B4DB7CCC950( pDevice, nBus, 0x00 ) ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] D102DB268C564A38A6914E7613DF0410( 4 ): GET REGISTER %02X x %02X ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pIndex[ 0 ], pIndex[ 1 ] ); goto I2C_GET_ERROR; }

		if( FALSE == C15208D847BF4A9F9D474333B609281F( pDevice, nBus, pe++ ) ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] D102DB268C564A38A6914E7613DF0410( 5 ): GET REGISTER %02X x %02X ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pIndex[ 0 ], pIndex[ 1 ] ); goto I2C_GET_ERROR; }
	}
	if( FALSE == A5155323A5EF4FD390029B4DB7CCC950( pDevice, nBus, 0x00000200 ) ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] D102DB268C564A38A6914E7613DF0410( 6 ): GET REGISTER %02X x %02X ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pIndex[ 0 ], pIndex[ 1 ] ); goto I2C_GET_ERROR; }

	if( FALSE == C15208D847BF4A9F9D474333B609281F( pDevice, nBus, pe++ ) ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] D102DB268C564A38A6914E7613DF0410( 7 ): GET REGISTER %02X x %02X ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pIndex[ 0 ], pIndex[ 1 ] ); goto I2C_GET_ERROR; }

	return TRUE;

I2C_GET_ERROR:

	EB81DC0C97B1494483D7CA0ED36B5459( pDevice );

	return FALSE;
}

BOOLEAN C1927E78C828471394AE300589EB1258( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONG nBus, BYTE * pIndexVlaue, ULONG nIndexVlaueLen )
{
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + nBus * 0x00001000 + 0x0FE8, 0x00001FFF ); // I2C.INT.CLR.STATUS

	BYTE * po = pIndexVlaue;

	ULONG i = 0;

	ULONG j = 0;

	// -----> CI2CLayer_IP3204::WriteSequence() 
	//
	for( i = 0 ; i < nIndexVlaueLen ; i++ ) {

		if( i == 0 ) { 
			
			ULONG R0000BFE0 = 0x00000000;

			if( FALSE == A5155323A5EF4FD390029B4DB7CCC950( pDevice, nBus, 0x00000100 | *po++ ) ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] C1927E78C828471394AE300589EB1258( 1 ): SET REGISTER %02X x %02X ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pIndexVlaue[ 0 ], pIndexVlaue[ 1 ] ); goto I2C_SET_ERROR; }

			for( j = 0 ; j < 10000 ; j++ ) {

				R0000BFE0 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + nBus * 0x00001000 + 0x0FE0 ); // I2C.INT.STATUS

				if( R0000BFE0 & 0x000000C7 ) 
				{ 
					break;
				} 
				else
				{
					if( pDevice->iManufacturer == 0x0A || pDevice->iManufacturer == 0x0D || pDevice->iManufacturer == 0x18 || pDevice->iManufacturer == 0x1A ) {
					
						wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );
					}
				}

			//	F6B9E557A4BA24ffd926B820B836289C8_100NS( 100 );
			}
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + nBus * 0x00001000 + 0x0FE8, R0000BFE0 ); // I2C.INT.CLR.STATUS

			if( R0000BFE0 & 0x00000046 ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] C1927E78C828471394AE300589EB1258( 1 ): SET REGISTER %02X x %02X x 0x0000BFE0 = %08lX ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pIndexVlaue[ 0 ], pIndexVlaue[ 1 ], R0000BFE0 ); goto I2C_SET_ERROR; }
		} 
		else if( i == nIndexVlaueLen - 1 ) { 
			
			if( FALSE == A5155323A5EF4FD390029B4DB7CCC950( pDevice, nBus, 0x00000200 | *po++ ) ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] C1927E78C828471394AE300589EB1258( 3 ): SET REGISTER %02X x %02X ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pIndexVlaue[ 0 ], pIndexVlaue[ 1 ] ); goto I2C_SET_ERROR; }
		} 
		else {

			if( FALSE == A5155323A5EF4FD390029B4DB7CCC950( pDevice, nBus, *po++ ) ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] C1927E78C828471394AE300589EB1258( 2 ): SET REGISTER %02X x %02X ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pIndexVlaue[ 0 ], pIndexVlaue[ 1 ] ); goto I2C_SET_ERROR; }
		}
	}

#if 0 // DEBUG

	for( i = 0 ; i < nIndexVlaueLen ; i++ ) {

		if( i == 0 ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "C1927E78C828471394AE300589EB1258( )" ); }
			
		if( i == nIndexVlaueLen - 1 ) {
			
			F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "0x%02X )\n", pIndexVlaue[ i ] );
		} 
		else { 
			
			F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "0x%02X, ", pIndexVlaue[ i ] );
		}
	}

#endif
//	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "kkk:C1927E78C828471394AE300589EB1258(%ld) = 0x%02X length=%ld \n", nBus, pIndexVlaue[0], nIndexVlaueLen );

	return TRUE;

I2C_SET_ERROR:

	EB81DC0C97B1494483D7CA0ED36B5459( pDevice );

	return FALSE;
}



void FA14C6A02C2749DF94BD93B43FDF8CED( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE bank)
{
	BYTE TX[ 3 ] = { 0x9C, 0x00, 0x00 }; // MST3367

	BYTE RX = 0x00;

	BYTE temp;

	//read bank address

	D102DB268C564A38A6914E7613DF0410( pDevice, 1, TX, 2, &RX, 1 );

	temp = RX;

	temp = temp & 0x3C;

	TX[ 2 ] = ( temp | bank );

	C1927E78C828471394AE300589EB1258( pDevice, 1, TX, 3 );

	pDevice->m_MST3367_bank = bank;
}


BYTE E9FDD7B155AA445A84F2F4493591369B( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nBank, BYTE nIndex )
{

	BYTE TX[ 3 ] = { 0x9C, 0x00, 0x00 }; // MST3367

	BYTE RX[ 1 ] = { 0x00 };
/*
	TX[ 1 ] = 0x00; 
	
	TX[ 2 ] = nBank; 

	C1927E78C828471394AE300589EB1258( pDevice, 1, TX, 3 );

*/
	if(pDevice->m_MST3367_bank != nBank)
	{
		FA14C6A02C2749DF94BD93B43FDF8CED( pDevice, nBank);
	}

	TX[ 1 ] = nIndex; 
	
	D102DB268C564A38A6914E7613DF0410( pDevice, 1, TX, 2, RX, 1 );

	return RX[ 0 ];
}
 
BOOLEAN DFD7C3CC812B44E2A9BDB8C9C6C4BC84( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nBank, BYTE nIndex, BYTE bValue )
{

	BYTE TX[ 3 ] = { 0x9C, 0x00, 0x00 }; // MST3367

	BYTE RX[ 1 ] = { 0x00 };
/*
	TX[ 1 ] = 0x00; 
	
	TX[ 2 ] = nBank; 

	C1927E78C828471394AE300589EB1258( pDevice, 1, TX, 3 );
*/
	if(pDevice->m_MST3367_bank != nBank)
	{
		FA14C6A02C2749DF94BD93B43FDF8CED( pDevice, nBank);
	}

	TX[ 1 ] = nIndex; 

	TX[ 2 ] = bValue; 
	
	C1927E78C828471394AE300589EB1258( pDevice, 1, TX, 3 );

	if( nIndex == 0x00)
	{
		pDevice->m_MST3367_bank = bValue;
	}

	return TRUE;
}

BYTE E4353F1BD7E74904BE78DD9F001BD652( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nIndex )
{
	BYTE TX[ 2 ] = { 0x88, 0x00 }; // TW9910

	TX[ 1 ] = nIndex; 

	BYTE RX =  0x00;

	D102DB268C564A38A6914E7613DF0410( pDevice, 1, TX, 2, &RX, 1 );

	return RX;
}

BOOLEAN C2B253D32391436C99E0206137A018A8( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nIndex, BYTE bValue )
{
	BYTE TX[ 3 ] = { 0x88, 0x00, 0x00 }; // TW9910

	TX[ 1 ] = nIndex; 

	TX[ 2 ] = bValue; 
	
	C1927E78C828471394AE300589EB1258( pDevice, 1, TX, 3 );

	return TRUE;
}

BYTE EE94E6600A3B4ABF844926F711997D3A( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nIndex )
{
	BYTE TX[ 2 ] = { 0x94, 0x00 }; // CS53L21

	TX[ 1 ] = nIndex; 

	BYTE RX =  0x00;

	D102DB268C564A38A6914E7613DF0410( pDevice, 1, TX, 2, &RX, 1 );

	return RX;
}

BOOLEAN D2BDFAF831D7424DA8CC24E89B3AEF55( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nIndex, BYTE bValue )
{
	BYTE TX[ 3 ] = { 0x94, 0x00, 0x00 }; // CS53L21

	TX[ 1 ] = nIndex; 

	TX[ 2 ] = bValue; 
	
	C1927E78C828471394AE300589EB1258( pDevice, 1, TX, 3 );

	return TRUE;
}

BYTE E9EF2EDB9981445B99EF3AAC11BF7248( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nIndex )
{
	if( pDevice )
	{
		BYTE TX[ 2 ] = { 0x90, 0x00 };
	
		BYTE RX[ 1 ] = { 0x00 };
	
		TX[ 1 ] = nIndex; 
		
		D102DB268C564A38A6914E7613DF0410( pDevice, 1, TX, 2, RX, 1 );
	
		return RX[ 0 ];
	}
	return 0;

}

BOOLEAN E9EF2EDB9981445B99EF3AAC11BF7248_EX( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nIndex, ULONG bBytes, BYTE * pValue ) 
{
	if( pDevice )
	{
		BYTE TX[ 2 ] = { 0x90, 0x00 };
	
		TX[ 1 ] = nIndex; 
	
		return D102DB268C564A38A6914E7613DF0410( pDevice, 1, TX, 2, pValue, bBytes );
	}
	return true;
}

BOOLEAN CB37B62CB1B5419F925F88107F66A9DE( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nIndex, BYTE bValue )
{
	if( pDevice )
	{
		BYTE TX[ 3 ] = { 0x90, 0x00, 0x00 };
	
		TX[ 1 ] = nIndex; 
	
		TX[ 2 ] = bValue; 
		
		C1927E78C828471394AE300589EB1258( pDevice, 1, TX, 3 );
	}
	return TRUE;
}

BOOLEAN CB37B62CB1B5419F925F88107F66A9DE_EX( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nIndex, ULONG bBytes, BYTE * pValue )
{
	if( pDevice )
	{
		BYTE TX[ 2 + 20 ] = { 0x00, 0x00 }; // MAX_IT6003_I2C_NUM = 20
	
		TX[ 0 ] = 0x90; 
	
		TX[ 1 ] = nIndex; 
	
		ULONG i = 0;
		for( i = 0 ; i < bBytes ; i++ ) { TX[ i + 2 ] = pValue[ i ]; }
	
		C1927E78C828471394AE300589EB1258( pDevice, 1, TX, bBytes + 2 );
	}
	return TRUE;
}

BOOLEAN SA7160_GetADV7619Register( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nAddr, BYTE nIndex, BYTE * pValue )
{
	BYTE TX[ 2 ] = { 0x9A, 0x00 };

	TX[ 0 ] = nAddr;

	TX[ 1 ] = nIndex; 

	BYTE RX[ 1 ] = { 0x00 };

	ULONG i = 0;
	
	for( i = 0 ; i < 5 ; i++ ) {

		BOOLEAN returns = D102DB268C564A38A6914E7613DF0410( pDevice, 1, TX, 2, RX, 1 );

		if( returns == TRUE ) {

		   *pValue = RX[ 0 ];

			return TRUE;
		}
		else {

			F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO,"[CH%02d] SA7160_GetADV7619Register(): GET BYTE %02X ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, nIndex);
		}
		
		wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );

	}
	return FALSE;
}

BOOLEAN SA7160_SetADV7619Register( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nAddr, BYTE nIndex, BYTE bValue )
{
	BYTE TX[ 3 ] = { 0x9A, 0x00, 0x00 };
	
	TX[ 0 ] = nAddr;
	
	TX[ 1 ] = nIndex; 

	TX[ 2 ] = bValue;
	 
	ULONG i = 0;
	
	for( i = 0 ; i < 5 ; i++ ) {
	
		BOOLEAN returns = C1927E78C828471394AE300589EB1258( pDevice, 1, TX, 3 );

		if( returns == TRUE ) {

			return TRUE;
		}
		else {

			F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO,"[CH%02d] SA7160_GetADV7619Register(): SET BYTE %02X.%02X ERROR!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, nIndex, bValue);
		}
		wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );

	}
	return FALSE;
}

BYTE E31CFF96CC1A4681A81E682331CFC3F3( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nIndex )
{
	if( pDevice->iManufacturer == 0x19 ||  // SC510N1.2ND

		pDevice->iManufacturer == 0x0A ||  // SC500N1.HDMI.ITE6603

		pDevice->iManufacturer == 0x0D ) { // SC500N1.MC.HDMI.ITE6603

		;
	}
	else if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) || // EURESYS.SC510N1.1ST
		
			 (pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
				
			 (pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST

	  		 pDevice->iManufacturer == 0x10 ||  // SC510N1.1ST

			 pDevice->iManufacturer == 0x12 ||  // SC510N1.SDI.1ST
			
			 (pDevice->iManufacturer == 0x13) ||  // SC510N2.HDMI.4K2K.ADV7619.1ST

			 (pDevice->iManufacturer == 0x14) ||  // SC510N1.SDI.1ST

			 (pDevice->iManufacturer == 0x16) ||  // SC512N1.DVI.1ST

			 pDevice->iManufacturer == 0x17 ||  // SC512N1.DVI.1ST

			 pDevice->iManufacturer == 0x18 ||  // SC510N1.HDMI.ITE6603.1ST
			
			 pDevice->iManufacturer == 0x1A ||  // SC510N4.HDMI.ITE6603
			
			 pDevice->iManufacturer == 0x1B ) { // SC510N4.SDI

		BYTE TX[ 2 ] = { 0x98, 0x00 };

		BYTE RX[ 1 ] = { 0x00 };

		TX[ 1 ] = nIndex;

		D102DB268C564A38A6914E7613DF0410( pDevice, 1, TX, 2, RX, 1 );

		return RX[ 0 ];
	}
	else {

		BYTE TX[ 2 ] = { 0x90, 0x00 };

		BYTE RX[ 1 ] = { 0x00 };

		TX[ 1 ] = nIndex;

		D102DB268C564A38A6914E7613DF0410( pDevice, 1, TX, 2, RX, 1 );

		return RX[ 0 ];
	}
	return 0x00;
}

BOOLEAN FB416CF1CDE54D39BFB1E336A29493C2( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE nIndex, BYTE nValue )
{
	BOOLEAN returns = TRUE;

	if( pDevice->iManufacturer == 0x19 ||  // SC510N1.2ND

		pDevice->iManufacturer == 0x0A ||  // SC500N1.HDMI.ITE6603

		pDevice->iManufacturer == 0x0D ) { // SC500N1.MC.HDMI.ITE6603

		;
	}
	else if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) || // EURESYS.SC510N1.1ST

			 (pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
				
			 (pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST

			 pDevice->iManufacturer == 0x10 ||  // SC510N1.1ST
			
			 pDevice->iManufacturer == 0x12 ||  // SC510N1.SDI.1ST
			
			 (pDevice->iManufacturer == 0x13) ||  // SC510N2.HDMI.4K2K.ADV7619.1ST
			
			 (pDevice->iManufacturer == 0x14) ||  // SC510N1.SDI.1ST

			 (pDevice->iManufacturer == 0x16) ||  // SC512N1.DVI.1ST

			 pDevice->iManufacturer == 0x17 ||  // SC512N1.DVI.1ST

			 pDevice->iManufacturer == 0x18 ||  // SC510N1.HDMI.ITE6603.1ST

			 pDevice->iManufacturer == 0x1A ||  // SC510N4.HDMI.ITE6603
			
			 pDevice->iManufacturer == 0x1B ) { // SC510N4.SDI

		BYTE TX[ 3 ] = { 0x98, 0x00, 0x00 };

		TX[ 1 ] = nIndex;

		TX[ 2 ] = nValue;

		returns = C1927E78C828471394AE300589EB1258( pDevice, 1, TX, 3 );
	}
	else {

		BYTE TX[ 3 ] = { 0x90, 0x00, 0x00 };

		TX[ 1 ] = nIndex;

		TX[ 2 ] = nValue;

		returns = C1927E78C828471394AE300589EB1258( pDevice, 1, TX, 3 );
	}
	return returns;
}


VOID SA7160_F69DBADFDE7C4448fA5C5E95F4DC00E1E( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE DATA, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{
	
	ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); R0000E004 &= 0xFFFF7FFF;

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 | (DATA << 15) );

	ndelay( F6B9E557A4BA24ffd926B820B836289C8 * 100);
}

VOID SA7160_F17905ED7D5754d2f948B78DE2E19357B( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE DATA, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{
	ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); R0000E004 &= 0xFFFFBFFF;

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 | (DATA << 14) );

	ndelay( F6B9E557A4BA24ffd926B820B836289C8 * 100);
}

VOID SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE DATA, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 ) 
{
	BYTE SCL = (DATA >> 0) & (0x01);

	BYTE SDA = (DATA >> 1) & (0x01);

	ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); R0000E004 &= 0xFFFF3FFF;

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 | (SDA << 14) | (SCL << 15) );

	ndelay( F6B9E557A4BA24ffd926B820B836289C8 * 100);
}

BYTE SA7160_F8B11D4E6664C424dA74D592AB89DC1CA( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 ) 
{
	ULONG R0000E00C = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x000C ); // GPIO.OEN

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x000C, R0000E00C | 0x00004000 ); // GPIO.OEN

	ULONG R0000E000 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0000 ); R0000E000 >>= 14; // GPIO.RD

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x000C, R0000E00C & 0xFFFFBFFF ); // GPIO.OEN

	ndelay( F6B9E557A4BA24ffd926B820B836289C8 * 100);

	return (BYTE)(R0000E000 & 0x00000001);
}

BOOL SA7160_F8B7FB94CF24D4152842C9743714CDAA9( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{
	SA7160_F17905ED7D5754d2f948B78DE2E19357B( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 ); // //

	SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, 3, F6B9E557A4BA24ffd926B820B836289C8 ); //

	SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 ); // //

	SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 ); //

	return TRUE;
}

BOOL SA7160_F1C002401C7AE4334A36AC1B1E338AD75( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{
	SA7160_F69DBADFDE7C4448fA5C5E95F4DC00E1E( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 ); //

	SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 ); // //

	SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 ); //

	SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, 3, F6B9E557A4BA24ffd926B820B836289C8 ); //

	return TRUE;
}

BOOL SA7160_F2E93DF3F52A04c9dACD486D8609988F3( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{	
//	SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 );         // 

	SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, 3, F6B9E557A4BA24ffd926B820B836289C8 );         //

	BYTE ACK = SA7160_F8B11D4E6664C424dA74D592AB89DC1CA( pDevice, F6B9E557A4BA24ffd926B820B836289C8 ); //

	SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 );         //

	return (ACK == 0) ? TRUE : FALSE;                //
}

BOOL SA7160_F76CEC38463124e7790A43B09F0D38227( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE ACK, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{
	SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, (ACK) ? 2 : 0, F6B9E557A4BA24ffd926B820B836289C8 ); //

	SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, (ACK) ? 3 : 1, F6B9E557A4BA24ffd926B820B836289C8 ); //

	SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, (ACK) ? 2 : 0, F6B9E557A4BA24ffd926B820B836289C8 ); //

	return TRUE;
}

BOOL SA7160_F1FF06F06D32B4c0aB2C20D3FB71281B5( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE DATA, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{
	UINT i = 0;

	for( i = 0 ; i < 8 ; i++, DATA <<= 1 ) {                    //

		SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, (DATA & 0x80) ? 2 : 0, F6B9E557A4BA24ffd926B820B836289C8 ); //

		SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, (DATA & 0x80) ? 3 : 1, F6B9E557A4BA24ffd926B820B836289C8 ); //

		SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, (DATA & 0x80) ? 2 : 0, F6B9E557A4BA24ffd926B820B836289C8 ); //
	}
	return SA7160_F2E93DF3F52A04c9dACD486D8609988F3( pDevice, F6B9E557A4BA24ffd926B820B836289C8 );                    //
}

BYTE SA7160_F6E9556EF6B7D45fbB367C7EF7BF65BFB( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE ACK, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{	
	BYTE DATA = 0x00;

	UINT i = 0;

	for( i = 0 ; i < 8 ; i++ ) {									//

		SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 );					//

		DATA = (DATA << 1) | SA7160_F8B11D4E6664C424dA74D592AB89DC1CA( pDevice, F6B9E557A4BA24ffd926B820B836289C8 );	//

		SA7160_F5ACEE342A88D4e1eB9CD9B730F11DE15( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 );					//
	}
	SA7160_F76CEC38463124e7790A43B09F0D38227( pDevice, ACK, F6B9E557A4BA24ffd926B820B836289C8 );					//

	return DATA;
}

VOID C4463EBF6B3346FC835112D2FD3F6C66( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE DATA, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{
	ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); R0000E004 &= ~0x00000004; R0000E004 |= (DATA << 2); // GPIO.WR

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 ); // GPIO.WR

	ndelay( F6B9E557A4BA24ffd926B820B836289C8 * 100);
}

VOID CEC497538C024CA28CCE35D35A80284E( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE DATA, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{
	ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); R0000E004 &= ~0x00000040; R0000E004 |= (DATA << 6); // GPIO.WR

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 ); // GPIO.WR

	ndelay( F6B9E557A4BA24ffd926B820B836289C8 * 100);
}

VOID D5B90F339BCE4DD0A67B0E587891D33F( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE DATA, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{
	ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); R0000E004 &= ~0x00000008; R0000E004 |= (DATA << 3); // GPIO.WR

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 ); // GPIO.WR

	ndelay( F6B9E557A4BA24ffd926B820B836289C8 * 100);
}

BYTE CC9F2A9D78C64D9F9600F80B401B5633( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{
	ULONG R0000E000 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0000 ); R0000E000 >>= 4; // GPIO.RD

	ndelay( F6B9E557A4BA24ffd926B820B836289C8 * 100);

	return (BYTE)(R0000E000 & 0x00000001);
}

BOOLEAN E703DADCBC1F47BCBCC0E396C84DC5D2( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, USHORT wAddress, USHORT wValue, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{
	ULONG i;

	wAddress &= 0x0FFF;

	C4463EBF6B3346FC835112D2FD3F6C66( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 );

	CEC497538C024CA28CCE35D35A80284E( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 );

	CEC497538C024CA28CCE35D35A80284E( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 );

	for( i = 0 ; i < 16 ; i++ ) {

		BYTE DATA = (wAddress >> (15 - i)) & (0x01);

		D5B90F339BCE4DD0A67B0E587891D33F( pDevice, DATA, F6B9E557A4BA24ffd926B820B836289C8 );

		C4463EBF6B3346FC835112D2FD3F6C66( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 );

		C4463EBF6B3346FC835112D2FD3F6C66( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 );
	}

	wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 1 ) );
	
	for( i = 0 ; i < 16 ; i++ ) {

		BYTE DATA = (wValue >> (15 - i)) & (0x01);

		D5B90F339BCE4DD0A67B0E587891D33F( pDevice, DATA, F6B9E557A4BA24ffd926B820B836289C8 );

		C4463EBF6B3346FC835112D2FD3F6C66( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 );

		C4463EBF6B3346FC835112D2FD3F6C66( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 );
	}
	C4463EBF6B3346FC835112D2FD3F6C66( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 );

	CEC497538C024CA28CCE35D35A80284E( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 );

	return TRUE;
}

USHORT FB6F05D19A4A4FC6A4E97328568DC0D8( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, USHORT wAddress, ULONGLONG F6B9E557A4BA24ffd926B820B836289C8 )
{
	ULONG i;

	USHORT wValue = 0x0000;

	wAddress &= 0x0FFF;

	wAddress |= 0x8000;

	C4463EBF6B3346FC835112D2FD3F6C66( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 );

	CEC497538C024CA28CCE35D35A80284E( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 );

	CEC497538C024CA28CCE35D35A80284E( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 );

	for( i = 0 ; i < 16 ; i++ ) {

		BYTE DATA = (wAddress >> (15 - i)) & (0x01);

		D5B90F339BCE4DD0A67B0E587891D33F( pDevice, DATA, F6B9E557A4BA24ffd926B820B836289C8 );

		C4463EBF6B3346FC835112D2FD3F6C66( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 );

		C4463EBF6B3346FC835112D2FD3F6C66( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 );
	}

	wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 1 ) );

	for( i = 0 ; i < 16 ; i++ ) {

		USHORT DATA;

		C4463EBF6B3346FC835112D2FD3F6C66( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 );

		DATA = CC9F2A9D78C64D9F9600F80B401B5633( pDevice, F6B9E557A4BA24ffd926B820B836289C8 );

		wValue |= DATA << (15 - i);

		C4463EBF6B3346FC835112D2FD3F6C66( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 );
	}
	C4463EBF6B3346FC835112D2FD3F6C66( pDevice, 0, F6B9E557A4BA24ffd926B820B836289C8 );

	CEC497538C024CA28CCE35D35A80284E( pDevice, 1, F6B9E557A4BA24ffd926B820B836289C8 );

	return wValue;
}

void GV7601_SET_ANC_TYPE( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, WORD nLINE_1, WORD nLINE_2, BYTE Number, BYTE nANC_DID, BYTE nANC_SSID )
{
	//GENNUM_WRITE_REG( 0, 0x00B, nLINE_1 );
	E703DADCBC1F47BCBCC0E396C84DC5D2( pDevice, 0x00B, nLINE_1, 10 );

	if( nLINE_2 != 0 ){
	
		//GENNUM_WRITE_REG( 0, 0x00C, nLINE_2 );
		E703DADCBC1F47BCBCC0E396C84DC5D2( pDevice, 0x00C, nLINE_2, 10 );
	}		
	
	//GENNUM_WRITE_REG( 0, 0x00F + Number, nANC_DID << 8 | nANC_SSID );
	E703DADCBC1F47BCBCC0E396C84DC5D2( pDevice, 0x00F + Number, nANC_DID << 8 | nANC_SSID, 10 );
}

void GV7601_ANC_DATA_SWITCH( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice,  BOOL nHigh )
{
	WORD R00A = 0;

	//R00A = GENNUM_READ_REG( 0, 0x00A );
	R00A = FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x00A, 10 );

	R00A &= 0xFFF7;

	if( nHigh ){
		
		R00A |= 0x0008;
	}
	
	R00A |= 0x0003;														// ENABLE ANC EXTRACION
	
	//GENNUM_WRITE_REG( 0, 0x00A, R00A );
	E703DADCBC1F47BCBCC0E396C84DC5D2( pDevice, 0x00A, R00A, 10 );
}
void GV7601_EXTRACTION_PACKET( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, WORD *ANC_DATA, WORD nSIZE )
{	
	GV7601_ANC_DATA_SWITCH( pDevice, 1 );
	
	//SysTimerDelay( 100 * 1000 );
	wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );

	GV7601_ANC_DATA_SWITCH( pDevice, 0 );

	//GENNUM_SPI_MULTI_READ( NULL, 0x800, nSIZE, ANC_DATA );
	int i = 0;
	for( i = 0; i <  nSIZE; i++ )
	{
		*( ANC_DATA + i) = FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x800 + i, 10 );	
	}
	
	GV7601_ANC_DATA_SWITCH( pDevice, 1 );
}

void GET_ANC_DATA(  F42A18AF66EFF459eA332CA253FFF8A65 * pDevice )
{
	WORD 	ANC_DATA[ 23 ], i;
	
	BYTE nVALUE;

	//_GENNUM_INFO GENNUM_INFO;
	
	GV7601_SET_ANC_TYPE( pDevice, 9, NULL, 0, 0x60, 0x60 );
	
	GV7601_EXTRACTION_PACKET( pDevice, ANC_DATA, 23 );
	
	for( i = 0 ; i < 4; i++ ){
			
			nVALUE = (( ANC_DATA[ 6 + ( i * 4 ) ] >> 4 ) & 0x0F  ) + ((( ANC_DATA[ 8 + ( i * 4 ) ] >> 4 ) & 0x0F ) * 10 );
				
			if( i == 0 ){ pDevice->m_GENNUM_INFO.m_FRAMES  = nVALUE;}
			if( i == 1 ){ pDevice->m_GENNUM_INFO.m_SECONDS = nVALUE;}
			if( i == 2 ){ pDevice->m_GENNUM_INFO.m_MINUTES = nVALUE;}
			if( i == 3 ){ pDevice->m_GENNUM_INFO.m_HOURS   = nVALUE;}
	}
	pDevice->m_USER_id = (ANC_DATA[ 15 ] >> 15) & 0x1;

	//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO,"[CH%02d] m_HOURS:m_MINUTES:m_SECONDS:m_FRAMES(%d:%d:%d:%d)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pDevice->m_GENNUM_INFO.m_HOURS, pDevice->m_GENNUM_INFO.m_MINUTES, pDevice->m_GENNUM_INFO.m_SECONDS, pDevice->m_GENNUM_INFO.m_FRAMES );
}



BOOL EB81DC0C97B1494483D7CA0ED36B5459( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice )
{
	// I2C PROGRAMMING (m_pMunit_I2C) (m_pI2CLayer) [PATCH PROGRAM] [2011.01.28] [I2C.RESET]
	//
	ULONG i = 0;

	for( i = 0 ; i < 2 ; i++ ) {

		ULONG R0000B008 = 0x00000000;

		ULONG R0000B00C = 0x00000000;

		ULONG R0000BFE4 = 0x00000000;

		// -----> CI2CLayer_IP3204::Init()
		//
		ULONG j = 0;

		for( j = 0 ; j < 100 ; j++ ) {

			R0000B008 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + i * 0x00001000 + 0x0008 ); // I2C.STATUS

			if( (R0000B008 & 0x0F) == 0x0D ) {

				break;
			}
//			SA7160_POLLING_F6B9E557A4BA24ffd926B820B836289C8_100NS( pDevice, 100 );
			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 1 ) );
		}
		if( (R0000B008 & 0x0F) != 0x0D ) { ; }

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x000C, 0x000000CC ); // I2C.CONTROL

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0FD8, 0x00001FFF ); // I2C.INT.CLR.ENABLE

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0FE8, 0x00001FFF ); // I2C.INT.CLR.STATUS

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x000C, 0x000000C1 ); // I2C.CONTROL

		for( j = 0 ; j < 100 ; j++ ) {

			R0000B00C = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + i * 0x00001000 + 0x000C ); // I2C.CONTROL

			if( R0000B00C == 0x000000C0 ) {

				break;
			}
//			SA7160_POLLING_F6B9E557A4BA24ffd926B820B836289C8_100NS( pDevice, 100 );
			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 1 ) );
		}
		if( R0000B00C != 0x000000C0 ) { return TRUE; }

		R0000B008 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + i * 0x00001000 + 0x0008 ); // I2C.STATUS

		if( (R0000B008 & 0x00000008) == 0x00 ) {

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x000C, 0x000000C0 ); // CONTROL

//			SA7160_POLLING_F6B9E557A4BA24ffd926B820B836289C8_100NS( pDevice, 100 );
			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 1 ) );

			for( j = 0 ; j < 9 ; j++ ) {

				A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x000C, 0x00000040 ); // CONTROL

//				SA7160_POLLING_F6B9E557A4BA24ffd926B820B836289C8_100NS( pDevice, 100 );
				wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 1 ) );

				A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x000C, 0x000000C0 ); // CONTROL

//				SA7160_POLLING_F6B9E557A4BA24ffd926B820B836289C8_100NS( pDevice, 100 );
				wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 1 ) );
			}
		}
		if( (pDevice->F9D9594A095F0463193B7588374CF8310->subsystem_vendor & 0xFF) == 0x1C ) { // SWITCHING.CARD

		//	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0010, 0x00000068 ); // CLOCK.DIVISOR.HIGH (100K)

		//	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0014, 0x00000087 ); // CLOCK.DIVISOR.LOW (100K)

		//	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0028, 0x00000060 ); // SDA.HOLD (100K)

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0010, 0x00000016 ); // CLOCK.DIVISOR.HIGH (400K)

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0014, 0x0000001E ); // CLOCK.DIVISOR.LOW (400K)

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0028, 0x00000010 ); // SDA.HOLD (400K)
		}
		else {

	//		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0010, 0x000000AD ); // CLOCK.DIVISOR.HIGH (60K)

	//		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0014, 0x000000E1 ); // CLOCK.DIVISOR.LOW (60K)

	//		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0028, 0x000000A0 ); // SDA.HOLD (60K)

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0010, 0x00000104 ); // CLOCK.DIVISOR.HIGH (40K)

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0014, 0x00000151 ); // CLOCK.DIVISOR.LOW (40K)

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0028, 0x000000C0 ); // SDA.HOLD (40K)

			//A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0010, 0x00000068 ); // CLOCK.DIVISOR.HIGH (100K)

			//A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0014, 0x00000087 ); // CLOCK.DIVISOR.LOW (100K)

			//A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0028, 0x00000060 ); // SDA.HOLD (100K)

		}
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0FD8, 0x00001FFF ); // INT.CLR.ENABLE

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0FE8, 0x00001FFF ); // INT.CLR.STATUS

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0FDC, 0x000000C7 ); // INT.SET.ENABLE

		R0000BFE4 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + i * 0x00001000 + 0x0FE4 ); // INT.ENABLE

		if( R0000BFE4 != 0x000000C7 ) { return TRUE; }

		R0000B008 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + i * 0x00001000 + 0x0008 ); // STATUS

		if( (R0000B008 & 0x0F) != 0x0D ) { return TRUE; }

		F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "EB81DC0C97B1494483D7CA0ED36B5459( %d x I2C:%08X:%08X:%08X )\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R0000B008, R0000B00C, R0000BFE4 );
	}
	return TRUE;
}

//custom fps
ULONGLONG F35907A2DBBF411B9B7E50176EEA1202( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONG fps )
{
	ULONG frames = 0;
	
	frames = pDevice->m_nCustomAnalogVideoFrameRateProperty;


	if( pDevice->m_nCustomAnalogVideoInterleavedProperty == 1 )
	{
		frames /= 2;
	}

	if(frames == 0)
	{
		frames = 1;
	}

	if(fps == 0)
	{
		fps = 1;
	}

	ULONGLONG R = 0x0000000000000000;

	ULONG counts = 0;

	ULONGLONG i = 0;

	for( i = 0 ; i < frames ; i++ ) {

		counts += fps;

		if( counts >= frames ) {

			counts -= frames;

			R = R | ((ULONGLONG)1 << i);
		}
	}

	//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "F35907A2DBBF411B9B7E50176EEA1202() R(llx%llx) fps(%d) frames(%d)!!!!\n", R, fps, frames );

	return R;
}

BOOLEAN SA7160_IS_4K2K_ENABLED( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice ) // +SC510N2.HDMI.4K2K
{
	if( pDevice->iManufacturer == 0x13 ) {

		SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

		if( (p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
			
			(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
			
			(p_sys_cfg->n_input_video_resolution_cx >= 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

			(p_sys_cfg->n_input_video_resolution_cx >= 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

			(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120) ) {

			//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] SA7160_IS_4K2K_ENABLED() 0x13 true\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );

			return TRUE;
		}
	}
	if( pDevice->iManufacturer == 0x18 ) {

		if( pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE > 1 ) {

			F42A18AF66EFF459eA332CA253FFF8A65 * p_brother_device = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE - 2 ];

			if( p_brother_device ) {
				
				if( p_brother_device->iManufacturer == 0x13 ) {

					SA7160_SYS_CFG * p_brother_sys_cfg = (SA7160_SYS_CFG *)(p_brother_device->m_pCustomSystemConfigProperty);

					if( (p_brother_sys_cfg->n_input_video_resolution_cx == 4096 && p_brother_sys_cfg->n_input_video_resolution_cy == 2160 && p_brother_sys_cfg->n_input_video_resolution_fps >    0) ||
						
						(p_brother_sys_cfg->n_input_video_resolution_cx >= 3840 && p_brother_sys_cfg->n_input_video_resolution_cy == 2160 && p_brother_sys_cfg->n_input_video_resolution_fps >    0) ||
						
						(p_brother_sys_cfg->n_input_video_resolution_cx >= 2800 && p_brother_sys_cfg->n_input_video_resolution_cy == 2100 && p_brother_sys_cfg->n_input_video_resolution_fps >    0) ||

						(p_brother_sys_cfg->n_input_video_resolution_cx >= 2560 && p_brother_sys_cfg->n_input_video_resolution_cy == 1440 && p_brother_sys_cfg->n_input_video_resolution_fps >    0) ||

						(p_brother_sys_cfg->n_input_video_resolution_cx == 1920 && p_brother_sys_cfg->n_input_video_resolution_cy == 1080 && p_brother_sys_cfg->n_input_video_resolution_fps == 120) ) {

						//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] SA7160_IS_4K2K_ENABLED() 0x18 true\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );
						return TRUE;
					}
				}
			}
		}
	}
	//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] SA7160_IS_4K2K_ENABLED() iManufacturer(0x%x) false\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pDevice->iManufacturer );

	return FALSE;
}

BOOL E44F164ACBDA4DEF88F28EFF4E99E67A( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice ) 
{
	F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] E44F164ACBDA4DEF88F28EFF4E99E67A()\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );

	SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

	ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
	
	if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) ||
				
		(pDevice->iManufacturer == 0x10) ||
		
		(pDevice->iManufacturer == 0x12) ||
		
		(pDevice->iManufacturer == 0x14) ||

		(pDevice->iManufacturer == 0x1B) ) {

		R0000E004 |=  0x00020000; // BYPASS.MODE
	}
	else {
	
		R0000E004 &= ~0x00020000; // HDMI.SEL (0 = SDI / 1 = HDMI)
	}

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 |  0x00010000 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 & ~0x00010000 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 |  0x00010000 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

	if( (pDevice->iManufacturer == 0x01 && 
		
		 pDevice->iProduct      == 0x07) ) { FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x20, 0x01 ); } // PORT#01

	if( (pDevice->iManufacturer == 0x10) ) { FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x20, 0x01 ); } // PORT#01

	if( (pDevice->iManufacturer == 0x12) ) { FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x20, 0x00 ); } // PORT#00

	if( (pDevice->iManufacturer == 0x14) ) { FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x20, 0x00 ); } // PORT#00

	if( (pDevice->iManufacturer == 0x12) ) { FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); } // BYPASS.MODE

	if( (pDevice->iManufacturer == 0x14) ) { FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); } // BYPASS.MODE

	E703DADCBC1F47BCBCC0E396C84DC5D2( pDevice, 0x0009, (11 << 10) | (4 << 5) | (3 << 0), 10 );
		
	p_sys_cfg->n_input_video_resolution_cx = 0;

	p_sys_cfg->n_input_video_resolution_cy = 0;

	p_sys_cfg->n_input_video_resolution_fps = 0;

	p_sys_cfg->n_input_video_resolution_fps_m = 0;

	p_sys_cfg->n_input_video_resolution_interleaved = 0;

	p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000 = 0;

	p_sys_cfg->n_input_video_resolution_h_total = 0;

	p_sys_cfg->b_input_video_resolution_spliter_mode = FALSE;

	p_sys_cfg->b_input_video_resolution_external_sync = FALSE;

	p_sys_cfg->b_input_video_resolution_vga_period_us_counts = 0;

	p_sys_cfg->b_input_video_signal_changed = FALSE;

	p_sys_cfg->n_input_audio_sampling_frequency = 0;

	return TRUE;
}
BOOL BB937A02B9974C289CED8B808D5297D6( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice ) 
{
	F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] BB937A02B9974C289CED8B808D5297D6()\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );

	SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

	ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
	
	R0000E004 &= 0xFBFFFFFF; // HPD.CTRL

	R0000E004 &= 0xFFFFFFF3; // 

	R0000E004 |= 0x00000004; // BYPASS

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 |  0x00010000 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 & ~0x00010000 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 |  0x00010000 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

	if( pDevice->iManufacturer == 0x18 ) { FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x20, 0x00 ); } // PORT#00

	p_sys_cfg->n_input_video_resolution_cx = 0;

	p_sys_cfg->n_input_video_resolution_cy = 0;

	p_sys_cfg->n_input_video_resolution_fps = 0;

	p_sys_cfg->n_input_video_resolution_fps_m = 0;
	
	p_sys_cfg->n_input_video_resolution_interleaved = 0;

	p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000 = 0;

	p_sys_cfg->n_input_video_resolution_h_total = 0;

	p_sys_cfg->b_input_video_resolution_spliter_mode = FALSE;

	p_sys_cfg->b_input_video_resolution_external_sync = FALSE;

	p_sys_cfg->b_input_video_resolution_vga_period_us_counts = 0;

	p_sys_cfg->b_input_video_signal_changed = FALSE;

	p_sys_cfg->n_input_audio_sampling_frequency = 0;

	InitCAT6023(pDevice);


	if( SA7160_IS_4K2K_ENABLED( pDevice ) ) {

		F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] BB937A02B9974C289CED8B808D5297D6() setting FPGA(ITE6603) for 4K2K\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );

		ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
		
		R0000E004 &=  0xFBFFFFFF; // HPD.CTRL

		R0000E004 &=  0xFFFFFFF3; // 

	//	R0000E004 |=  0x00000004; // BYPASS

		R0000E004 &= ~0x00000004; // SPLIT

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

		FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x20, 0x01 ); // PORT#01

		FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x24, 0x01 );

		FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x25, 0x01 ); // EXTERNAL SYNC -> EMBEDDED SYNC
	}
	else
	{
		F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] BB937A02B9974C289CED8B808D5297D6() no 4K2K\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );
	}

	return TRUE;
}

BOOL SA7160_ADV7619_HwInitialize( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice ) 
{
	F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] SA7160_ADV7619_HwInitialize() \n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );

	SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

	ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
	
	R0000E004 &=  0xFBFFFFFF; // HPD.CTRL

	R0000E004 &=  0xFFFFFFF3; // 

//	R0000E004 |=  0x00000004; // BYPASS

	R0000E004 &= ~0x00000004; // SPLIT

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 |  0x00010000 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 & ~0x00010000 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 |  0x00010000 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

	FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x20, 0x00 ); // PORT#00

	p_sys_cfg->n_input_video_resolution_cx = 0;

	p_sys_cfg->n_input_video_resolution_cy = 0;

	p_sys_cfg->n_input_video_resolution_fps = 0;

	p_sys_cfg->n_input_video_resolution_fps_m = 0;
	
	p_sys_cfg->n_input_video_resolution_interleaved = 0;

	p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000 = 0;

	p_sys_cfg->n_input_video_resolution_h_total = 0;

	p_sys_cfg->b_input_video_resolution_spliter_mode = FALSE;	

	p_sys_cfg->b_input_video_resolution_external_sync = FALSE;

	p_sys_cfg->b_input_video_resolution_vga_period_us_counts = 0;

	p_sys_cfg->b_input_video_signal_changed = FALSE;	

	p_sys_cfg->n_input_audio_sampling_frequency = 0;

	SA7160_SetADV7619Register( pDevice, 0x98, 0x1B, 0x01 );

	SA7160_SetADV7619Register( pDevice, 0x9A, 0xFF, 0x80 );

	wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(100) );

	SA7160_SetADV7619Register( pDevice, 0x9A, 0xF4, 0x80 );//CEC

	SA7160_SetADV7619Register( pDevice, 0x9A, 0xF5, 0x7C );//INFOFRAME
	
	SA7160_SetADV7619Register( pDevice, 0x9A, 0xF8, 0x4C );//DPLL
	
	SA7160_SetADV7619Register( pDevice, 0x9A, 0xF9, 0x64 );//KSV
	
	SA7160_SetADV7619Register( pDevice, 0x9A, 0xFA, 0x6C );//EDID
	
	SA7160_SetADV7619Register( pDevice, 0x9A, 0xFB, 0x68 );//HDMI
	
	SA7160_SetADV7619Register( pDevice, 0x9A, 0xFD, 0x44 );//CP

	// 4K2K REGISTER TABLE
	// 
	/*
	{	SA7160_SetADV7619Register( pDevice, 0x68, 0xC0, 0x03 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x01, 0x06 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x02, 0xF2 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x03, 0x94 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x05, 0x28 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x06, 0xA0 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x0C, 0x42 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x15, 0x80 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x19, 0x83 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x33, 0x40 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0xDD, 0xA0 );
		SA7160_SetADV7619Register( pDevice, 0x4C, 0xB5, 0x01 );
		SA7160_SetADV7619Register( pDevice, 0x4C, 0xC3, 0x80 );
		SA7160_SetADV7619Register( pDevice, 0x4C, 0xCF, 0x03 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x3E, 0x69 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x3F, 0x46 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x4E, 0x7E );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x4F, 0x42 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x02, 0x03 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x57, 0xA3 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x58, 0x07 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x83, 0xFC );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x84, 0x03 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x85, 0x10 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x86, 0x9B );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x89, 0x03 );
 		SA7160_SetADV7619Register( pDevice, 0x68, 0x9B, 0x03 );
	}
	*/
	//use non 4K2K setting otherwise FPGA will error, strange ??
	{	SA7160_SetADV7619Register( pDevice, 0x68, 0xC0, 0x03 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x01, 0x06 );
		//SA7160_SetADV7619Register( pDevice, 0x9A, 0x02, 0xF2 );
		//SA7160_SetADV7619Register( pDevice, 0x9A, 0x03, 0x94 );
		//SA7160_SetADV7619Register( pDevice, 0x9A, 0x05, 0x28 );
		//SA7160_SetADV7619Register( pDevice, 0x9A, 0x06, 0xA0 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x0C, 0x42 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x15, 0x80 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x19, 0x83 );
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x33, 0x40 );
		//SA7160_SetADV7619Register( pDevice, 0x9A, 0xDD, 0xA0 );
		SA7160_SetADV7619Register( pDevice, 0x4C, 0xB5, 0x01 );
		//SA7160_SetADV7619Register( pDevice, 0x4C, 0xC3, 0x80 );
		//SA7160_SetADV7619Register( pDevice, 0x4C, 0xCF, 0x03 );

		SA7160_SetADV7619Register( pDevice, 0x9A, 0x02, 0xF5 ); //

		SA7160_SetADV7619Register( pDevice, 0x9A, 0x05, 0x2C ); // EMBEDDED SYNC

		SA7160_SetADV7619Register( pDevice, 0x9A, 0x06, 0xA6 ); //

		SA7160_SetADV7619Register( pDevice, 0x9A, 0x03, 0x80 );
									
		SA7160_SetADV7619Register( pDevice, 0x4C, 0xC3, 0x00 );
									
		SA7160_SetADV7619Register( pDevice, 0x4C, 0xCF, 0x00 );
									
		SA7160_SetADV7619Register( pDevice, 0x9A, 0xDD, 0x00 );

		SA7160_SetADV7619Register( pDevice, 0x68, 0x3E, 0x69 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x3F, 0x46 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x4E, 0x7E );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x4F, 0x42 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x02, 0x03 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x57, 0xA3 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x58, 0x07 );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x83, 0xFC );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x84, 0x03 );
		//SA7160_SetADV7619Register( pDevice, 0x68, 0x85, 0x11 );//for below 27M Hz or poor cable
		//peter fix for some cable, related register are 0x85, 0x86, 0x9B
		SA7160_SetADV7619Register( pDevice, 0x68, 0x85, 0x10 );

		SA7160_SetADV7619Register( pDevice, 0x68, 0x86, 0x9B );
		SA7160_SetADV7619Register( pDevice, 0x68, 0x89, 0x03 );
 		SA7160_SetADV7619Register( pDevice, 0x68, 0x9B, 0x03 );
	}
	{	SA7160_SetADV7619Register( pDevice, 0x9A, 0x14, 0x5D );
		//SA7160_SetADV7619Register( pDevice, 0x9A, 0x19, 0x9E );//good for quantum
		SA7160_SetADV7619Register( pDevice, 0x9A, 0x19, 0x80 );//userful
	}


	return TRUE;
}

BOOL F09F823971BF454EB08124479CC7EDB4( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice ) 
{

	if( (pDevice->iManufacturer == 0x10 && pDevice->iProduct == 0xE5 ) ||  // NINTENDO SC510N1.1ST
		
		(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
				
		(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST

		(pDevice->iManufacturer == 0x17)  ) { // SC512N1.DVI.1ST

		if( pDevice->m_nAnalogCrossbarVideoInputProperty == 5 ||  // COMPOSITE

			pDevice->m_nAnalogCrossbarVideoInputProperty == 6 ) { // SVIDEO

			F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] F09F823971BF454EB08124479CC7EDB4()\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );

			ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
			
			R0000E004 &= 0xFFFFFFBF; 

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

			R0000E004 |= 0x00000040; // GPIO06 HIGH TW9910 HIGH ACTIVE

			R0000E004 |= 0x00020000; // GPIO17 HIGH BYPASS MODE

			R0000E004 &= 0xFFFFFFDF; // GPIO05 LOW AUDIO LINE IN 

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

			FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x20, 0x01 ); // SET OUTPUT INTERSECTED

			C2B253D32391436C99E0206137A018A8( pDevice, 0x06, 0x00 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x03, 0xA2 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x05, 0x01 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x08, 0x14 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x09, 0xF2 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x0A, 0x0B );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x0B, 0xD2 );
		//	C2B253D32391436C99E0206137A018A8( pDevice, 0x19, 0x57 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x19, 0xDE );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x1A, 0x0F );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x1B, 0x00 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x28, 0x0E );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x29, 0x03 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x2D, 0x07 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x2F, 0x06 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x4C, 0x0D );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x55, 0x00 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x6B, 0x26 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x6C, 0x36 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x6D, 0xF0 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x6E, 0x28 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x06, 0x80 );
			
			C2B253D32391436C99E0206137A018A8( pDevice, 0x6F, 0x98 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x64, 0x55 );
			C2B253D32391436C99E0206137A018A8( pDevice, 0x06, 0x80 );

			SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

			p_sys_cfg->n_input_video_resolution_cx = 0;

			p_sys_cfg->n_input_video_resolution_cy = 0;

			p_sys_cfg->n_input_video_resolution_fps = 0;

			p_sys_cfg->n_input_video_resolution_fps_m = 0;

			p_sys_cfg->n_input_video_resolution_interleaved = 0;

			p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000 = 0;

			p_sys_cfg->n_input_video_resolution_h_total = 0;

			p_sys_cfg->b_input_video_resolution_spliter_mode = FALSE;

			p_sys_cfg->b_input_video_resolution_external_sync = FALSE;

			p_sys_cfg->b_input_video_resolution_vga_period_us_counts = 0;	

			p_sys_cfg->b_input_video_signal_changed = FALSE;

			p_sys_cfg->n_input_audio_sampling_frequency = 0;

			A2490F6314B2455F9693604A03D8A34B( pDevice, pDevice->FD314ADAD9404496b842EBFC396E875CB );
		}
	}
	return TRUE;
}
extern void MST3367_ADJUST_CSC_TABLE( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, BYTE bright, BYTE contrast, BYTE saturation, BYTE hue, BYTE sharpness );


BOOLEAN AE7C8644E545419889F245065E2144A7( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice )
{
	if( pDevice->iManufacturer == 0x19 ) { // SC510N1.2ND

		;
	}
	else if( pDevice->iManufacturer == 0x0A ||

			 pDevice->iManufacturer == 0x0D ||

			 pDevice->iManufacturer == 0x18 ||

			 pDevice->iManufacturer == 0x1A ) {
		;
	}
	else if( (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x01) ||
			   
			 (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x04) ||
			   
			 (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x06) ||
			   
			 (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x07) ||
			   
			 (pDevice->iProduct == 0xF5 && pDevice->iManufacturer == 0x02) ||

			 (pDevice->iManufacturer == 0x08) ||
			   
			 (pDevice->iManufacturer == 0x12) ||
			   
			 (pDevice->iManufacturer == 0x13) ||
			   
			 (pDevice->iManufacturer == 0x14) ||

			 (pDevice->iManufacturer == 0x1B) ||
			   
			 (pDevice->iManufacturer == 0x1C) ) {
		;
	}
	else {

		if( pDevice->m_nAnalogCrossbarVideoInputProperty == 5 ||  // COMPOSITE
			
			pDevice->m_nAnalogCrossbarVideoInputProperty == 6 ) { // SVIDEO

			if( (pDevice->iManufacturer == 0x10 && pDevice->iProduct == 0xE5) || // NINTENDO SC510N1.1ST
				
				(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
				
				(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
		
				(pDevice->iManufacturer == 0x17) ) { // SC512N1.DVI.1ST

				//if( bByThread == FALSE ) { SA7160_CLOSE_THREAD(); }
				B6B487882F964675B66617C7847B8BB5( pDevice );

				C2B253D32391436C99E0206137A018A8( pDevice, 0x10, (BYTE)(((FADD02C9C13B14f83989880EFACB8D8DC[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE * 1 ][ 0 ] & 0xFF) >> 0) - 128 - 19) | 0x00 );
				
				C2B253D32391436C99E0206137A018A8( pDevice, 0x11, (BYTE)(((F3A66BD0F0BCB4afcAD006E378E671B9A[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE * 1 ][ 0 ]   & 0xFF) >> 0) -        7) | 0x00 );
				
				C2B253D32391436C99E0206137A018A8( pDevice, 0x13, (BYTE)(((F925442591E22492f9239C6028CE3DD94[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE * 1 ][ 0 ] & 0xFF) >> 0) -        0) | 0x00 );
				
				C2B253D32391436C99E0206137A018A8( pDevice, 0x14, (BYTE)(((F925442591E22492f9239C6028CE3DD94[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE * 1 ][ 0 ] & 0xFF) >> 0) -        0) | 0x00 );
				
				C2B253D32391436C99E0206137A018A8( pDevice, 0x15, (BYTE)(((F42BAA55A84E847faA4D0C0565699845E[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE * 1 ][ 0 ]        & 0xFF) >> 0) -      128) | 0x00 );
				
				C2B253D32391436C99E0206137A018A8( pDevice, 0x12, (BYTE)(((F1D56E1ED762E4b99BB2BD370DFE317D1[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE * 1 ][ 0 ]  & 0xFF) >> 4) -        0) | 0x50 ); 

				//if( bByThread == FALSE ) { SA7160_START_THREAD(); }
				F5D69F1955AA4EBCAF770CF98A9B4992( pDevice );
			}
		}
		else if( pDevice->m_nAnalogCrossbarVideoInputProperty == 4 ) { // SDI

			;
		}
		else {

			//if( bByThread == FALSE ) { SA7160_CLOSE_THREAD(); }
			B6B487882F964675B66617C7847B8BB5( pDevice );

			MST3367_ADJUST_CSC_TABLE( pDevice, (BYTE)(FADD02C9C13B14f83989880EFACB8D8DC[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE * 1 ][ 0 ] & 0xFF), 
				
											   (BYTE)(F3A66BD0F0BCB4afcAD006E378E671B9A[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE * 1 ][ 0 ] & 0xFF), 
											   
											   (BYTE)(F925442591E22492f9239C6028CE3DD94[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE * 1 ][ 0 ] & 0xFF), 
											   
											   (BYTE)(F42BAA55A84E847faA4D0C0565699845E[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE * 1 ][ 0 ]  & 0xFF), 
												   
											  ((BYTE)(F1D56E1ED762E4b99BB2BD370DFE317D1[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE * 1 ][ 0 ] & 0xFF) >> 5) );

			//if( bByThread == FALSE ) { SA7160_START_THREAD(); }
			F5D69F1955AA4EBCAF770CF98A9B4992( pDevice );
		}
	}

	return TRUE;
}


BOOLEAN B49E7A6E108B44028748F460FC068D23( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice )
{
//	SA7160_CLOSE_THREAD();
	B6B487882F964675B66617C7847B8BB5( pDevice );

	if( pDevice->m_nAnalogCrossbarVideoInputProperty != -1 ) {

		if( pDevice->iManufacturer == 0x19 ) { // SC510N1.2ND

			;
		}
		else if( pDevice->iManufacturer == 0x0A ||

				 pDevice->iManufacturer == 0x0D ||

				 pDevice->iManufacturer == 0x18 ||

				 pDevice->iManufacturer == 0x1A ) {
			//signal lock take too much time, depend on sa71600hw_int
			//BB937A02B9974C289CED8B808D5297D6( pDevice );
		}
		else if( pDevice->iManufacturer == 0x13 ) { // SC510N2.HDMI.4K2K.ADV7619
			
			SA7160_ADV7619_HwInitialize( pDevice );
		}
		else if( (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x01) ||
				   
				 (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x04) ||
				   
				 (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x06) ||
				   
				 (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x07) ||
				   
				 (pDevice->iProduct == 0xF5 && pDevice->iManufacturer == 0x02) ||
				   
				 (pDevice->iManufacturer == 0x08) ||
				   
				 (pDevice->iManufacturer == 0x12) ||

				 (pDevice->iManufacturer == 0x14) ||

				 (pDevice->iManufacturer == 0x1B) ||
				   
				 (pDevice->iManufacturer == 0x1C) ) {

			E44F164ACBDA4DEF88F28EFF4E99E67A( pDevice );
		}
		else {

			if( pDevice->m_nAnalogCrossbarVideoInputProperty == 5 ) { // COMPOSITE

				F09F823971BF454EB08124479CC7EDB4( pDevice );

				//C2B253D32391436C99E0206137A018A8( pDevice, 0x02, 0x0040 );

//euresys square pixel
				//AV square pixel reg02 0x00, reg06 0x42
				//S  square pixel reg02 0x14, reg06 0x40
				//AV non square pixel reg02 0x40, reg06 0x42
				//S  non square pixel reg02 0x54, reg06 0x40
				//only update bit 2:5

				BYTE reg02 = E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x02 );

				reg02 &= 0xC0;

				C2B253D32391436C99E0206137A018A8( pDevice, 0x02, reg02 );

				C2B253D32391436C99E0206137A018A8( pDevice, 0x06, 0x0042 );
			}
			else if( pDevice->m_nAnalogCrossbarVideoInputProperty == 6 ) { // SVIDEO

				F09F823971BF454EB08124479CC7EDB4( pDevice );

				//C2B253D32391436C99E0206137A018A8( pDevice, 0x02, 0x0054 );

				BYTE reg02 = E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x02 );

				reg02 &= 0xC0;
				
				reg02 |= 0x14;

				C2B253D32391436C99E0206137A018A8( pDevice, 0x02, reg02 );

				C2B253D32391436C99E0206137A018A8( pDevice, 0x06, 0x0040 );
			}
			else if( pDevice->m_nAnalogCrossbarVideoInputProperty == 4 ) {

				E44F164ACBDA4DEF88F28EFF4E99E67A( pDevice );
			}
			else {

				MST3367_HwInitialize( pDevice );
			}
		}
	}

	if( pDevice->m_nAnalogCrossbarAudioInputProperty != -1 ) {

		if( pDevice->iManufacturer != 0x09 ) { // SC502N1.MC.ADV7181

			ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 );
	
			if( pDevice->m_nAnalogCrossbarVideoInputProperty == 0 ||  // HDMI (TMDS.B)
	
				pDevice->m_nAnalogCrossbarVideoInputProperty == 1 ||  // DVI.DIGITAL (TMDS.A)
	
				pDevice->m_nAnalogCrossbarVideoInputProperty == 4 ) { // SDI
	
				if( pDevice->m_nAnalogCrossbarAudioInputProperty == 0 ) {
	
					R0000E004 |=  (1 << 5); // I2S.SEL = 1
				}
				if( pDevice->m_nAnalogCrossbarAudioInputProperty == 1 ) {
	
					R0000E004 &= ~(1 << 5); // I2S.SEL = 0

					R0000E004 |=  (1 << 3); // CLK.SEL1 = HIGH, USE CLOCK FROM OSC
				}
			}
			if( pDevice->m_nAnalogCrossbarVideoInputProperty == 2 ||  // COMPONENT
	
				pDevice->m_nAnalogCrossbarVideoInputProperty == 3 ||  // DVI.ANALOG
	
				pDevice->m_nAnalogCrossbarVideoInputProperty == 5 ||  // COMPOSITE
	
				pDevice->m_nAnalogCrossbarVideoInputProperty == 6 ) { // SVIDEO
	
				R0000E004 &= ~(1 << 5); // I2S.SEL = 0
	
				R0000E004 |= (1 << 3); // CLK.SEL1 = HIGH, USE CLOCK FROM OSC
			}
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
		}

		if( (pDevice->iManufacturer == 0x10 && pDevice->iProduct == 0xE5) || // NINTENDO SC510N1.1ST
			
			(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
				
			(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
		
			(pDevice->iManufacturer == 0x12) ||  // SC512N1.SDI.1ST

			(pDevice->iManufacturer == 0x14) ||  // SC512N1.SDI.1ST

			(pDevice->iManufacturer == 0x16) ||  // SC512N1.DVI.1ST

			(pDevice->iManufacturer == 0x17) ) { // SC512N1.DVI.1ST

			static BYTE CS53L21_REG_TABLE[ ] = { 0x03, 0x4E,
												 0x04, 0x44,
												 0x07, 0x00,
												 0x0A, 0x00,
												 0x0B, 0x00,
												 0x0C, 0x00,
												 0x0D, 0x00,
												 0x1C, 0xC0,
												 0x04, 0x46,
												 0x09, 0x42,
												 0x0E, 0x05, // DEFAULT = 0x18
												 0x0F, 0x05, // DEFAULT = 0x18
												 0x18, 0x00,
												 0xFF, 0xFF 
			};
			if( pDevice->iManufacturer == 0x12 ||
				
				pDevice->iManufacturer == 0x14 ) {
			}
			else {

				if( pDevice->m_nAnalogCrossbarVideoInputProperty == 5 ||  // COMPOSITE

					pDevice->m_nAnalogCrossbarVideoInputProperty == 6 ) { // SVIDEO

					if( (pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
				
						(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
		
						(pDevice->iManufacturer == 0x16) ||
						
						(pDevice->iManufacturer == 0x17) ) {

						CS53L21_REG_TABLE[ 5 ] = 0x00;
					}
					else {

						CS53L21_REG_TABLE[ 5 ] = 0x50;
					}
				}
				else {

					ULONG B0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
					
					B0000E004 &= 0xFFFFFFBF; 

					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, B0000E004  );  wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 50 ) ); // GPIO.WR (HARDWARE.RESET)

					B0000E004 |= 0x00000040; // GPIO06 HIGH TW9910 HIGH ACTIVE (TURN ON AUDIO DECODER)

					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, B0000E004  ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 50 ) ); // GPIO.WR (HARDWARE.RESET)

					CS53L21_REG_TABLE[ 5 ] = 0x00;
				}
			}
			ULONG i = 0;
			for( i = 0 ; i < sizeof(CS53L21_REG_TABLE) ; i += 2 ) { 
				
				D2BDFAF831D7424DA8CC24E89B3AEF55( pDevice, CS53L21_REG_TABLE[ i ], CS53L21_REG_TABLE[ i + 1 ] ); 
			}
		}
	}
//	SA7160_START_THREAD();
	F5D69F1955AA4EBCAF770CF98A9B4992( pDevice );

	//In F09F823971BF454EB08124479CC7EDB4
	/*
	if( pDevice->m_nAnalogCrossbarVideoInputProperty != -1 ) {
		
		if( pDevice->m_nAnalogCrossbarVideoInputProperty == 5 ||  // COMPOSITE

			pDevice->m_nAnalogCrossbarVideoInputProperty == 6 ) { // SVIDEO
		
			A2490F6314B2455F9693604A03D8A34B( pDevice, pDevice->FD314ADAD9404496b842EBFC396E875CB );
		}
	}
	*/


	return TRUE;
}
BOOLEAN A2490F6314B2455F9693604A03D8A34B( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, ULONG nStandard )

{

	if( (pDevice->iManufacturer == 0x10 && pDevice->iProduct == 0xE5 ) ||  // NINTENDO SC510N1.1ST
		
		(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
				
		(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST

		(pDevice->iManufacturer == 0x17) ) { // SC512N1.DVI.1ST
	 
		
		if( pDevice->m_nAnalogCrossbarVideoInputProperty == 5 ||  // COMPOSITE

			pDevice->m_nAnalogCrossbarVideoInputProperty == 6 ) { // SVIDEO

			F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] SA7160_TW9910 set standard(0x%x)\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), nStandard );

			//SA7160_CLOSE_THREAD();
			//already stop
			//B6B487882F964675B66617C7847B8BB5( pDevice ); //cause modprobe -r hang

			SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

			BYTE R0C = (BYTE)(E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x0C )) & 0xEF;

			switch( nStandard ) {
			
			case V4L2_STD_NTSC_M:      C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x00 );  break;
			case V4L2_STD_NTSC_M_JP:    C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x00 );  break;
			case V4L2_STD_NTSC_443:    C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x03 );  break;
			case V4L2_STD_PAL_60:      C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x07 );  break;
			case V4L2_STD_PAL_M:       C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x04 );  break;
			case V4L2_STD_PAL_B:       C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x01 );  break;
			case V4L2_STD_PAL_D:       C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x01 );  break;
			case V4L2_STD_PAL_G:       C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x01 );  break;
			case V4L2_STD_PAL_H:       C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x01 );  break;
			case V4L2_STD_PAL_I:       C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x01 );  break;
			case V4L2_STD_PAL_N:       C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x05 );  break;
			case V4L2_STD_PAL_Nc:	   C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x02 );  break;
			case V4L2_STD_SECAM_B:     C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x02 );  break;
			case V4L2_STD_SECAM_G:     C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x02 );  break;
			case V4L2_STD_SECAM_H:     C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x02 );  break;
			case V4L2_STD_SECAM_D:     C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x02 );  break;
			case V4L2_STD_SECAM_K:     C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x02 );  break;
			case V4L2_STD_SECAM_K1:    C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x02 );  break;
			case V4L2_STD_SECAM_L:     C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x02 );  break;
			case V4L2_STD_SECAM_LC:    C2B253D32391436C99E0206137A018A8( pDevice, 0x1C, 0x02 );  break;
			}
			switch( nStandard ) {
			
			case V4L2_STD_NTSC_M:      C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x10 );  break;
			case V4L2_STD_NTSC_M_JP:    C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_NTSC_443:    C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x10 );  break;
			case V4L2_STD_PAL_60:      C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_PAL_M:       C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x10 );  break;
			case V4L2_STD_PAL_B:       C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_PAL_D:       C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_PAL_G:       C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_PAL_H:       C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_PAL_I:       C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_PAL_N:       C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x10 );  break;
			case V4L2_STD_PAL_Nc: C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_SECAM_B:     C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_SECAM_G:     C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_SECAM_H:     C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_SECAM_D:     C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_SECAM_K:     C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_SECAM_K1:    C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_SECAM_L:     C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			case V4L2_STD_SECAM_LC:    C2B253D32391436C99E0206137A018A8( pDevice, 0x0C, R0C | 0x00 );  break;
			}
			if( nStandard & V4L2_STD_525_60 ) {

				F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] SA7160_TW9910 set NTSC $$$\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );

				BYTE R07 = (BYTE)(E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x07 )) & 0x0F;
				
				BYTE R55 = (BYTE)(E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x55 )) & 0xEF;

				C2B253D32391436C99E0206137A018A8( pDevice, 0x07, 0x00 | R07 );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x08, 0x14       );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x09, 0xF2       );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x0A, 0x0B       );
				//C2B253D32391436C99E0206137A018A8( pDevice, 0x0B, 0xD2       );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x55, 0x10 | R55 );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x0D, 0x00       );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x0E, 0x11       );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x0F, 0x00       );

//euresys square pixel
				//move to s_fmt
				//p_sys_cfg->n_input_video_resolution_cx = 640;

				//p_sys_cfg->n_input_video_resolution_cy = 240;

				p_sys_cfg->n_input_video_resolution_fps = 60;

				p_sys_cfg->n_input_video_resolution_fps_m = 1;

				p_sys_cfg->n_input_video_resolution_interleaved = 1;

				//move to s_fmt
				//p_sys_cfg->b_input_video_signal_changed = TRUE;

				p_sys_cfg->n_input_audio_sampling_frequency = 48000;

				pDevice->m_nCustomAnalogVideoResolutionProperty = (p_sys_cfg->n_input_video_resolution_cx << 16) | 

																  (p_sys_cfg->n_input_video_resolution_cy <<  0);

				pDevice->m_nCustomAnalogVideoFrameRateProperty = (p_sys_cfg->n_input_video_resolution_fps);

				pDevice->m_nCustomAnalogVideoInterleavedProperty = (p_sys_cfg->n_input_video_resolution_interleaved);

				pDevice->m_nCustomAnalogAudioSampleFrequencyProperty = 48000;
			}
			
//			if( pDevice->m_nAnalogVideoDecoderStandardProperty & SUPPORTED_ANALOG_VIDEO_STANDARDS_50HZ ) {

			if( nStandard & V4L2_STD_625_50 ) {

				F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] SA7160_TW9910 set PAL $$$\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );

				BYTE R07 = (BYTE)(E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x07 )) & 0x0F;
				
				BYTE R55 = (BYTE)(E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x55 )) & 0xEF;

				C2B253D32391436C99E0206137A018A8( pDevice, 0x07, 0x10 | R07 );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x08, 0x19 +   0 );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x09, 0x20       );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x0A, 0x0A       );
				//C2B253D32391436C99E0206137A018A8( pDevice, 0x0B, 0xD2       );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x55, 0x00 | R55 );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x0D, 0x00       );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x0E, 0x11       );
				C2B253D32391436C99E0206137A018A8( pDevice, 0x0F, 0x00       );	

				//move to s_fmt
				//p_sys_cfg->n_input_video_resolution_cx = 720;

				//p_sys_cfg->n_input_video_resolution_cy = 288;

				p_sys_cfg->n_input_video_resolution_fps = 50;

				p_sys_cfg->n_input_video_resolution_fps_m = 0;

				p_sys_cfg->n_input_video_resolution_interleaved = 1;

				//move to s_fmt
				//p_sys_cfg->b_input_video_signal_changed = TRUE;

				p_sys_cfg->n_input_audio_sampling_frequency = 48000;

				pDevice->m_nCustomAnalogVideoResolutionProperty = (p_sys_cfg->n_input_video_resolution_cx << 16) | 

																  (p_sys_cfg->n_input_video_resolution_cy <<  0);

				pDevice->m_nCustomAnalogVideoFrameRateProperty = (p_sys_cfg->n_input_video_resolution_fps);

				pDevice->m_nCustomAnalogVideoInterleavedProperty = (p_sys_cfg->n_input_video_resolution_interleaved);

				pDevice->m_nCustomAnalogAudioSampleFrequencyProperty = 48000;
			}
			//SA7160_START_THREAD();
			
			//F5D69F1955AA4EBCAF770CF98A9B4992( pDevice );
		}
		else
		{
			F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] SA7160_TW9910 set standard error, m_nAnalogCrossbarVideoInputProperty(0x%x)\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), pDevice->m_nAnalogCrossbarVideoInputProperty );
		}
	}
	else
	{
		F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] SA7160_TW9910 set standard ID error, iProduct(0x%x) iManufacturer(0x%x)\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), pDevice->iProduct, pDevice->iManufacturer );
	}

	return TRUE;
}

#if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,39)
//typedef u64 dma64_addr_t;
#endif

BOOLEAN EE7012456B844F189B414E6E9F80974A( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, SA7160_SYS_CFG * p_brother_sys_cfg, BOOL is_ite_table)
{
	F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A(%d) iManufacturer(0x%x) p_brother_sys_cfg(0x%x)\n",(int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2, pDevice->iManufacturer, p_brother_sys_cfg);	

	if( p_brother_sys_cfg == NULL ) {

		if( (pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 0) ) { // +SC510N4

			if( pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE > 0 ) {

				F42A18AF66EFF459eA332CA253FFF8A65 * p_brother_device = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE - 1 ];

				if( p_brother_device ) {
					
					ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( p_brother_device, 0x0000E000 + 0x0004 ); // GPIO.WR
								
					if( (R0000E004 & 0x00000004) == 0x00000000 ) { // SPLITER.MODE

						return FALSE; //return while split mode
					}
				}
			}
		}
		if( (pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 0) ) { // +SC510N4

			if( pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE > 0 ) {

				F42A18AF66EFF459eA332CA253FFF8A65 * p_brother_device = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE - 1 ];

				if( p_brother_device ) {
					
					ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( p_brother_device, 0x0000E000 + 0x0004 ); // GPIO.WR
							
					if( (R0000E004 & 0x00020000) == 0x00000000 ) { // SPLITER.MODE

						return FALSE;
					}
				}
			}
		}
		if( pDevice->iManufacturer == 0x18 ) {

			if( SA7160_IS_4K2K_ENABLED( pDevice ) ) {
				
				return FALSE;
			}
		}
	}

	if( p_brother_sys_cfg == NULL )
	{
		if( pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 == 0 ) {
	
			pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2++;
		}
		else { 
	
			pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2++;

			return TRUE;
		}
	}	
	

	F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A() iManufacturer(0x%x) FC3FEC90DD3E6414c83437752D6A0B4B2(0d%d) enter\n",(int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) , pDevice->iManufacturer, pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2);	

	pDevice->F03D1DD650AC64c28B04687338F970D0E[ 0 ] = 0;

	pDevice->F66FD293166B14f93A084AE0E6BD0F196[ 0 ] = 0;


	//CLEAR DMA BUFFER
	int index = 0;
	for( index = 0; index < SA7160_MAX_BUFFER; index++ )
	{
		if(pDevice->m_SA7160_video_buffer[ index ])
		{
			memset( (UINT*)pDevice->m_SA7160_video_buffer[ index ], 0x00, 1920 * 1080 * 2);
		}
	}

	// CLEAR VIDEO DMA INSTRUCTION TABLE
	//
	{	ULONG j = 0;

		dma_addr_t F6F32B5439E4C42f095E08326DFA73107_dummy = pDevice->FA81F93DB0A8D49bdBC3753334A5D581D[ 0 ];

		UINT * pe = (UINT *)(pDevice->F41F19BDAA144449fA254B8E3282D1425[ 0 ]);

		F6F32B5439E4C42f095E08326DFA73107_dummy += 4096 * 2 * 8;

		for( j = 0 ; j < 8192 ; j++ ) {

		   *pe++ = F6F32B5439E4C42f095E08326DFA73107_dummy & 0xFFFFF000;

		   *pe++ = 0;
		}
	}
	// CLEAR AUDIO DMA INSTRUCTION TABLE (A)
	//
	{	ULONG j = 0;
		
		dma_addr_t F6F32B5439E4C42f095E08326DFA73107_dummy = pDevice->FA81F93DB0A8D49bdBC3753334A5D581D[ 1 ];

		UINT * pe = (UINT *)(pDevice->F41F19BDAA144449fA254B8E3282D1425[ 1 ] );

//		F6F32B5439E4C42f095E08326DFA73107_dummy += cc178591b6d74b57bc680e9715715b23;

		F6F32B5439E4C42f095E08326DFA73107_dummy += 4096 * 1 * 8;

		for( j = 0 ; j < 4096 ; j++ ) {

		   *pe++ = F6F32B5439E4C42f095E08326DFA73107_dummy & 0xFFFFF000;

		   *pe++ = 0;
		}
	}
	// CLEAR AUDIO DMA INSTRUCTION TABLE (B)
	//
	{	ULONG j = 0;
		
		dma_addr_t F6F32B5439E4C42f095E08326DFA73107_dummy = pDevice->FA81F93DB0A8D49bdBC3753334A5D581D[ 1 ];

		UINT * pe = (UINT *)(pDevice->F41F19BDAA144449fA254B8E3282D1425[ 1 ] + (AMEBDAD_MAX_AUDIO_DMA_BUFFER_SIZE / 2));

		F6F32B5439E4C42f095E08326DFA73107_dummy += (AMEBDAD_MAX_AUDIO_DMA_BUFFER_SIZE / 2);

		F6F32B5439E4C42f095E08326DFA73107_dummy += 4096 * 1 * 8;

		for( j = 0 ; j < 4096 ; j++ ) {

		   *pe++ = F6F32B5439E4C42f095E08326DFA73107_dummy & 0xFFFFF000;

		   *pe++ = 0;
		}
	}

#ifdef SA7160_COPYPORTECT_ARCHITECTURE

	if( FD0AC55FE0C0B45a788FEC199C5758F1E[ pDevice->FF362AA37F7D046bf90568AC1600626D9 ] == 0 ) { return TRUE; }

	if( F6053D464C87D41c1B8CBE8A39FCDF2D2[ pDevice->FF362AA37F7D046bf90568AC1600626D9 ] == 0 ) { return TRUE; }

#endif

	// -----> tmHWStreamPort_VIP_Video::tmIAcquire() -----> tmHWStreamPort_VIP_Video::tmISetParameters()
	// 
	// BAM PROGRAMMING (m_pMunit_BAM)
	// 
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0000, 0x00000040 ); // BAM.DMA.BUF.MODE

	// VIP PROGRAMMING (m_pMunit_VIP) (m_pVIP_Lite)
	// 
	ULONG R00000FFC = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x0FFC ); // VIP.MODULE.ID

	if( R00000FFC != 0x011A5100 ) {

		;
	}
	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A( VIP:%08lX )\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R00000FFC );

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0FF4, 0x00000000 ); // VIP.POWER.DOWN
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0020, 0x00000000 ); // VIP.ANC.DID.FIELD0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0024, 0x00000000 ); // VIP.ANC.DID.FIELD1
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0040, 0x00000000 ); // VIP.LINE.THR
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0160, 0x00000000 ); // VIP.PRE.DIT.CTRL
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0164, 0x00000000 ); // VIP.POST.DIT.CTRL
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0284, 0x00000000 ); // VIP.CSM.CKEY
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0140, 0x03380001 ); // VIP.WIN.XYSTART
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0144, 0x0AB80439 ); // VIP.WIN.XYEND
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0304, 0x07800438 ); // VIP.PSU.WINDOW (1920 × 1080)
//	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0300, 0x000020A0 ); // VIP.PSU.FORMAT (SAA1997)
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0300, 0x000020A1 ); // VIP.PSU.FORMAT (MST3367)
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0100, 0x01004201 ); // VIP.VIN.FORMAT
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0340, 0x00000000 ); // VIP.PSU.BASE1
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0344, 0x00000F00 ); // VIP.PSU.PITCH1
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x034C, 0x00000000 ); // VIP.PSU.PITCH2
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0348, 0x00000000 ); // VIP.PSU.BASE2
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0350, 0x00000000 ); // VIP.PSU.BASE3
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0354, 0x00000000 ); // VIP.PSU.BASE4
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0358, 0x00000000 ); // VIP.PSU.BASE5
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x035C, 0x00000000 ); // VIP.PSU.BASE6

		// RESOLUTION TABLE SETTING
		//
	{//	SA7160_CLOSE_THREAD();
		B6B487882F964675B66617C7847B8BB5( pDevice );

		SA7160_SYS_CFG * p_sys_cfg = (p_brother_sys_cfg) ? (p_brother_sys_cfg) : (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

	//	ULONG j = -1;

		ULONG j = 0;

		ULONG cx = p_sys_cfg->n_input_video_resolution_cx;

		ULONG cy = p_sys_cfg->n_input_video_resolution_cy;

		ULONG fps = p_sys_cfg->n_input_video_resolution_fps;

		ULONG interleaved = p_sys_cfg->n_input_video_resolution_interleaved;

		ULONG h_total = p_sys_cfg->n_input_video_resolution_h_total;

		if( cx == 0 || cy == 0 ) {

			cx = 720;

			cy = 240;

			fps = 60;

			interleaved = 1;

			h_total = 0;
		}
		if( cx ==  720 && cy ==  240 && fps == 60 ) { j =  0; }

		if( cx ==  720 && cy ==  288 && fps == 50 ) { j =  1; }

		if( cx ==  720 && cy ==  480 && fps == 60 ) { j =  2; }

		if( cx ==  720 && cy ==  576 && fps == 50 ) { j =  3; }

		if( cx == 1280 && cy ==  720 && fps == 30 ) { j =  4; }

		if( cx == 1280 && cy ==  720 && fps == 25 ) { j =  5; }

		if( cx == 1280 && cy ==  720 && fps == 24 ) { j =  6; }

		if( cx == 1280 && cy ==  720 && fps == 60 ) { j =  7; }

		if( cx == 1280 && cy ==  720 && fps == 50 ) { j =  8; }

		if( cx == 1920 && cy ==  540 && fps == 60 ) { j =  9; }

		if( cx == 1920 && cy ==  540 && fps == 50 ) { j = 10; }

		if( cx == 1920 && cy == 1080 && fps == 30 ) { j = 11; }

		if( cx == 1920 && cy == 1080 && fps == 25 ) { j = 12; }

		if( cx == 1920 && cy == 1080 && fps == 24 ) { j = 13; }

		if( cx == 1920 && cy == 1080 && fps == 60 ) { j = 14; }

		if( cx == 1920 && cy == 1080 && fps == 50 ) { j = 15; }

		///////////////////////////////////////////////////////

		if( cx ==  640 && cy ==  480 && fps == 60 ) { j = 16; }

		if( cx ==  800 && cy ==  600 && fps == 60 ) { j = 17; }

		if( cx == 1024 && cy ==  768 && fps == 60 ) { j = 18; }

		if( cx == 1280 && cy ==  960 && fps == 60 ) { j = 19; }

		if( cx == 1280 && cy == 1024 && fps == 60 ) { j = 20; }

		if( cx == 1440 && cy ==  900 && fps == 60 ) { j = 21; }

		if( cx == 1440 && cy ==  240 && fps == 60 ) { j = 22; }

		if( cx == 1440 && cy ==  288 && fps == 50 ) { j = 23; }

		if( cx ==  640 && cy ==  400 && fps == 60 ) { j = 24; }

		if( cx ==  640 && cy ==  384 && fps == 60 ) { j = 25; }

		if( cx == 1280 && cy ==  768 && fps == 60 ) { j = 26; }

		if( cx == 1280 && cy ==  800 && fps == 60 ) { j = 27; }

		if( cx == 1360 && cy ==  768 && fps == 60 ) { j = 28; }

		if( cx ==  800 && cy ==  600 && fps == 75 ) { j = 29; }

		if( cx ==  800 && cy ==  600 && fps == 85 ) { j = 30; }

		if( cx == 1024 && cy ==  768 && fps == 75 ) { j = 31; }

		if( cx == 1024 && cy ==  768 && fps == 85 ) { j = 32; }

		if( cx == 1280 && cy ==  768 && fps == 75 ) { j = 33; }

		if( cx == 1280 && cy ==  768 && fps == 85 ) { j = 34; }

		if( cx == 1280 && cy ==  800 && fps == 75 ) { j = 35; }

		if( cx == 1280 && cy ==  800 && fps == 85 ) { j = 36; }

		if( cx == 1280 && cy ==  960 && fps == 75 ) { j = 37; }

		if( cx == 1280 && cy ==  960 && fps == 85 ) { j = 38; }

		if( cx == 1280 && cy == 1024 && fps == 75 ) { j = 39; }

		if( cx == 1280 && cy == 1024 && fps == 85 ) { j = 40; }

		if( cx == 1440 && cy ==  900 && fps == 75 ) { j = 41; }

		if( cx == 1440 && cy ==  900 && fps == 85 ) { j = 42; }

		if( cx == 3840 && cy == 1024 && fps == 30 ) { j = 43; }

		if( cx == 1280 && cy ==  720 && fps == 61 ) { j = 44; }

		if( cx == 1920 && cy == 1080 && fps == 61 ) { j = 45; }

		if( cx == 1280 && cy == 1024 && fps == 50 ) { j = 46; }

		if( cx == 1280 && cy ==  720 && fps == 59 ) { j = 47; }

		if( cx == 1280 && cy == 1024 && fps == 59 ) { j = 48; }

		if( cx ==  800 && cy ==  600 && fps == 56 ) { j = 49; }
		
		if( cx ==  640 && cy ==  480 && fps == 72 ) { j = 50; }
		
		if( cx ==  640 && cy ==  480 && fps == 75 ) { j = 51; }
		
		if( cx ==  640 && cy ==  480 && fps == 85 ) { j = 52; }
		
		if( cx ==  800 && cy ==  600 && fps == 72 ) { j = 53; }
		
		if( cx == 1024 && cy ==  768 && fps == 70 ) { j = 54; }
		
		if( cx == 1152 && cy ==  864 && fps == 75 ) { j = 55; }
		
		if( cx == 1400 && cy == 1050 && fps == 60 ) { j = 56; }
		
		if( cx == 1024 && cy ==  768 && fps == 50 ) { j = 57; }
		
		if( cx ==  720 && cy ==  400 && fps == 85 ) { j = 58; }
		
		if( cx ==  832 && cy ==  624 && fps == 75 ) { j = 59; }

		if( cx == 1064 && cy ==  600 && fps == 60 ) { j = 60; }

		if( cx == 1400 && cy == 1050 && fps == 61 ) { j = 61; }

		if( cx == 1024 && cy ==  600 && fps == 60 ) { j = 62; }

		if( cx == 1360 && cy ==  768 && fps == 61 ) { j = 63; }

		if( cx == 1440 && cy ==  540 && fps == 50 ) { j = 64; }

		if( cx == 1680 && cy == 1050 && fps >   0 ) { j = 65; }

		if( cx ==  800 && cy ==  600 && fps == 76 ) { j = 66; }

		if( cx == 1920 && cy == 1200 && fps >   0 ) { j = 67; }

		if( cx == 1600 && cy == 1200 && fps >   0 ) { j = 68; }

		if( cx == 3840 && cy == 2160 && fps >   0 ) { j = 69; }

		if( cx ==  768 && cy ==  288 && fps == 50 ) { j = 70; }

		if( cx ==  800 && cy ==  600 && fps == 55 ) { j = 71; }

		if( cx ==  768 && cy ==  512 && fps == 55 ) { j = 72; }

		if( cx ==  800 && cy ==  500 && fps == 75 ) { j = 73; }
		
		if( cx == 2800 && cy == 2100 && fps >   0 ) { j = 74; }

		if( cx == 2560 && cy == 1440 && fps >   0 ) { j = 75; }

		p_sys_cfg->b_input_video_signal_changed = FALSE;

		if( (pDevice->iManufacturer == 0x0A ||

			 pDevice->iManufacturer == 0x0D ||

			 pDevice->iManufacturer == 0x13 ||

			 pDevice->iManufacturer == 0x18 ||
			
			 pDevice->iManufacturer == 0x1A ||
			
			(pDevice->iManufacturer == 0x19 && is_ite_table) ) ) {

			ULONG REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE [ 7 ] = {
				
				0x00040000, 

			   ((cx << 16) | (cy - 1)) + 0x00040000, 

			   ((cx << 16) | (cy - 0)), 

				0x000020A0 | (interleaved ?  0x80000000 : 0x00000000), 

				0x01004201 & (interleaved ? ~0x00000200 : 0xFFFFFFFF), 

				0x00000000 | (interleaved ?  cx << 2 : cx << 1),

				0x00000000 | (interleaved ?  cx << 1 : 0x00000000)
			};
			if( p_sys_cfg->b_input_video_resolution_spliter_mode == TRUE ) {

				REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 1 ] = ((cx >> 1) << 16 | (cy - 1)) + 0x00040000,
				
				REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 2 ] = ((cx >> 1) << 16 | (cy - 0)); 

				REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 5 ] = ((cx >> 1) << 1);

				REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 6 ] = (0x00000000);

				if( cy == 1200 ) {

					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 1 ] = ((cx << 16) | ((cy >> 1) - 1)) + 0x00040000,
					
					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 2 ] = ((cx << 16) | ((cy >> 1) - 0)); 

					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 5 ] = ((cx << 1));

					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 6 ] = (0x00000000);
				}
				if( (cx == 4096 && cy == 2160) ||
					
					(cx >= 3840 && cy == 2160) ||
					
					(cx >= 2800 && cy == 2100) ||
					
					(cx >= 2560 && cy == 1440) ) {

					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 1 ] = ((cx >> 1) << 16 | ((cy >> 1) - 1)) + 0x00040000,
					
					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 2 ] = ((cx >> 1) << 16 | ((cy >> 1) - 0)); 

					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 5 ] = ((cx >> 1) << 1);

					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 6 ] = (0x00000000);
				}
				if( cx == 1920 && 
					
					cy == 1080 && 
					
					fps == 120 ) {

					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 1 ] = ((cx >> 1) << 16 | ((cy >> 1) - 1)) + 0x00040000,
					
					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 2 ] = ((cx >> 1) << 16 | ((cy >> 1) - 0)); 

					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 5 ] = ((cx >> 1) << 1);

					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 6 ] = (0x00000000);
				}
			}
			else {

				if( pDevice->iManufacturer == 0x13 ) {

					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 0 ] = REG_RESOLUTION_TABLE[ j ][ 0 ][ 1 ];

					REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 1 ] = REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 0 ] + ((cx << 16) | 

																												   (cy - 1));
				}
			}
			ULONG i = 0;
			for( i = 0 ; i < 7 ; i++ ) { 

				A60D06861EDC409FA66867980ABA9748( pDevice, REG_RESOLUTION_TABLE_AUTO_ITE6603[ i ], REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ i ]);

				F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] reg(0x%x) value(0x%x) 2--\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, REG_RESOLUTION_TABLE_AUTO_ITE6603[ i ], REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ i ] );

			}
		}
		else if( h_total > 0 ) {

			if( p_sys_cfg->b_input_video_resolution_spliter_mode == FALSE ) {

				REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 0 ][ 1 ] = ((h_total - cx - 4) << 16);

				REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 2 ][ 1 ] = ((cx) << 16) + 

															 ((cy) << 0);

				REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 1 ][ 1 ] = (REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 0 ][ 1 ]) +

															 (REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 2 ][ 1 ]);

				REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 5 ][ 1 ] = ((cx) << 1);

				//?????
				// [PROGRAM PATCH] SUPPORT VBI
				// 
				{	REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 3 ][ 1 ] = 0x000020A0 | (interleaved ?  0x80000000 : 0x00000000); 

					REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 4 ][ 1 ] = 0x01004201 & (interleaved ? ~0x00000200 : 0xFFFFFFFF); 

					REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 6 ][ 1 ] = 0x00000000 | (interleaved ?  cx >> 2 : 0x00000000);
				}
			}
			else {

				ULONG F3B543EB6D1C348648C2947A125F64000 = p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000; // [PROGRAM PATCH] SUPPORT VBI
				
				REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 0 ][ 1 ] = 0x00040000;

				REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 2 ][ 1 ] = ((cx >> 1) << 16) + 

															 ((cy + F3B543EB6D1C348648C2947A125F64000) << 0);

				REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 1 ][ 1 ] = (REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 0 ][ 1 ]) +

															 (REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 2 ][ 1 ]);

				REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 5 ][ 1 ] = ((cx >> 1) << 1);

				if( cy == 1200 ||
					
					cy == 2160 ||
					
					cy == 2100 ) {

					REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 2 ][ 1 ] = ((cx) << 16) + 

																 ((cy) >> 1);

					REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 1 ][ 1 ] = (REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 0 ][ 1 ]) +

																 (REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 2 ][ 1 ]);

					REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 5 ][ 1 ] = (cx << 1);
				}

				// [PROGRAM PATCH] SUPPORT VBI
				// 
				{	REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 3 ][ 1 ] = 0x000020A0 | (interleaved ?  0x80000000 : 0x00000000); 

					REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 4 ][ 1 ] = 0x01004201 & (interleaved ? ~0x00000200 : 0xFFFFFFFF); 

					REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 6 ][ 1 ] = 0x00000000 | (interleaved ?  cx >> 2 : 0x00000000);
				}
			}
			ULONG i = 0;
			for( i = 0 ; i < 7 ; i++ ) { 

				ULONG INDEX = REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ i ][ 0 ];

				ULONG VALUE = REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ i ][ 1 ];

				A60D06861EDC409FA66867980ABA9748( pDevice, INDEX, VALUE );

				F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] reg(0x%x) value(0x%x) 2--\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, INDEX, VALUE );

			}
		}
		else {

			ULONG i = 0;
			for(  i = 0 ; i < 7 ; i++ ) { 

				ULONG INDEX = REG_RESOLUTION_TABLE[ j ][ i ][ 0 ];

				ULONG VALUE = REG_RESOLUTION_TABLE[ j ][ i ][ 1 ];

				if(  j == 0  || j == 1 || j == 70) {

					if( (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x01) ||
		   
						(pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x04) ||
						   
						(pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x06) ||
						   
						(pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x07) ||
						   
						(pDevice->iProduct == 0xF5 && pDevice->iManufacturer == 0x02) ||

						(pDevice->iManufacturer == 0x08) ||
						   
						(pDevice->iManufacturer == 0x12) ||
						   
						(pDevice->iManufacturer == 0x14) ||

						(pDevice->iManufacturer == 0x1B) ||
						   
						(pDevice->iManufacturer == 0x1C) ||
						
						(pDevice->m_nAnalogCrossbarVideoInputProperty == 4) ) { // SDI.SD
						
						if( j == 0  || j == 1) 
						{
							INDEX = REG_RESOLUTION_TABLE_GV7601[ j ][ i ][ 0 ];

							VALUE = REG_RESOLUTION_TABLE_GV7601[ j ][ i ][ 1 ];
						}

					}
					else if( pDevice->m_nAnalogCrossbarVideoInputProperty == 5 ||
						
							 pDevice->m_nAnalogCrossbarVideoInputProperty == 6 ) {

						if( pDevice->iManufacturer == 0x09 ) {
							
							INDEX = REG_RESOLUTION_TABLE_ADV7181[ j ][ i ][ 0 ];

							VALUE = REG_RESOLUTION_TABLE_ADV7181[ j ][ i ][ 1 ];
						}
						else {
							
							if(j == 0)
							{
								//possible 720*240, 640*240, or no match
								if(cx ==  640 && cy ==  240 && fps == 60)
								{
									INDEX = REG_RESOLUTION_TABLE_TW9910[ 0 ][ i ][ 0 ];

									VALUE = REG_RESOLUTION_TABLE_TW9910[ 0 ][ i ][ 1 ];
								}
								else if(cx ==  720 && cy ==  240 && fps == 60)
								{
									INDEX = REG_RESOLUTION_TABLE_TW9910[ 1 ][ i ][ 0 ];

									VALUE = REG_RESOLUTION_TABLE_TW9910[ 1 ][ i ][ 1 ];
								}
								else
								{
									NULL;
								}
							}
							else if(j == 1)
							{
								INDEX = REG_RESOLUTION_TABLE_TW9910[ 2 ][ i ][ 0 ];

								VALUE = REG_RESOLUTION_TABLE_TW9910[ 2 ][ i ][ 1 ];
							}
							else if(j == 70)
							{
								INDEX = REG_RESOLUTION_TABLE_TW9910[ 3 ][ i ][ 0 ];

								VALUE = REG_RESOLUTION_TABLE_TW9910[ 3 ][ i ][ 1 ];
							}
							else
							{
								INDEX = REG_RESOLUTION_TABLE_TW9910[ 1 ][ i ][ 0 ];

								VALUE = REG_RESOLUTION_TABLE_TW9910[ 1 ][ i ][ 1 ];
							}
							
						}
					}
					else if( pDevice->iManufacturer == 0x09 ) {
						
						INDEX = REG_RESOLUTION_TABLE_ADV7181[ j + 2 ][ i ][ 0 ];

						VALUE = REG_RESOLUTION_TABLE_ADV7181[ j + 2 ][ i ][ 1 ];
					}
				}
				if( j == 4 || j == 5 || j == 6 ) {

					if( pDevice->m_nCustomCompanyIvsProperty ) {

						INDEX = REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ j - 4 ][ i ][ 0 ];

						VALUE = REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ j - 4 ][ i ][ 1 ];
					}
					if( p_sys_cfg->b_input_video_resolution_external_sync == TRUE ) {

						INDEX = REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ j - 4 ][ i ][ 0 ];

						VALUE = REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ j - 4 ][ i ][ 1 ];
					}
				}		
				if( j == 7 || j == 8 ) {

					if( pDevice->m_nCustomCompanyIvsProperty ) {

						INDEX = REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ j - 4 ][ i ][ 0 ];

						VALUE = REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ j - 4 ][ i ][ 1 ];
					}
				}
				if( j == 7 || j == 8 || j == 9 || j == 10 || j == 11 || j == 12 ) {

					if( pDevice->m_nCustomSpecialCameraInputProperty == 1 ) {

						INDEX = REG_RESOLUTION_TABLE_ISMART_CAHC_CAMERA[ j - 7 ][ i ][ 0 ];

						VALUE = REG_RESOLUTION_TABLE_ISMART_CAHC_CAMERA[ j - 7 ][ i ][ 1 ];
					}
				}
				A60D06861EDC409FA66867980ABA9748( pDevice, INDEX, VALUE );

				F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] reg(0x%x) value(0x%x) 2--j(0d%d)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, INDEX, VALUE, j );

			}
		}
		F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[00] [FORMAT.EXCHANGE.%02d] [%d x %d x %d]\n", j, cx, cy, fps);

		#ifdef ENABLE_1920X1080PX60FPS // +SC500

		// FPGA
		// 
		if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) || // EURESYS.SC510N1.1ST

			(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
				
			(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
		
			(pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||
			
			(pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 8) ||
					
			(pDevice->iManufacturer == 0x10) ||

			(pDevice->iManufacturer == 0x12) ||

			(pDevice->iManufacturer == 0x13) ||

			(pDevice->iManufacturer == 0x14) ||

			(pDevice->iManufacturer == 0x16) ||

			(pDevice->iManufacturer == 0x17) ||
			
			(pDevice->iManufacturer == 0x18) ||
				
		   ((pDevice->iManufacturer & 0xF0) == 0x00 &&
		   
			(pDevice->iProduct & 0x0F) == 0x05) ) {

			if( (cx == 1280 && cy ==  768 && fps ==  85) ||

				(cx == 1280 && cy ==  800 && fps ==  85) ||

				(cx == 1280 && cy ==  960 && fps ==  75) ||

				(cx == 1280 && cy ==  960 && fps ==  85) ||

				(cx == 1280 && cy == 1024 && fps ==  75) ||

				(cx == 1280 && cy == 1024 && fps ==  85) ||

				(cx == 1400 && cy == 1050 && fps >    0) ||

				(cx == 1440 && cy ==  900 && fps ==  75) ||

				(cx == 1440 && cy ==  900 && fps ==  85) ||

				(cx == 1680 && cy == 1050 && fps >    0) ||

				(cx == 1920 && cy == 1080 && fps ==  61) ||

				(cx == 1920 && cy == 1080 && fps ==  60) ||

				(cx == 1920 && cy == 1080 && fps ==  50) ||

				(cx == 1920 && cy == 1080 && fps == 120) ||

				(cx == 1920 && cy == 1200 && fps >    0) ||

				(cx == 1600 && cy == 1200 && fps >    0) ||

				(cx == 3840 && cy == 1024 && fps >    0) ||

				(cx >= 3840 && cy == 2160 && fps >    0) ||
				
				(cx >= 2800 && cy == 2100 && fps >    0) ||

				(cx >= 2560 && cy == 1440 && fps >    0) ||

				(cx == 4096 && cy == 2160 && fps >    0) ||
				
				(h_total > 0 && 
				
				 p_sys_cfg->b_input_video_resolution_spliter_mode == TRUE) ) {

				if( ((pDevice->iManufacturer & 0xF0) == 0x00 &&
							   
					 (pDevice->iProduct & 0x0F) == 0x05) ) {

					FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); // BYPASS.MODE

					FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x00 ); // SPLIT.MODE
				}
				else if( pDevice->iManufacturer == 0x12 ||
					
						 pDevice->iManufacturer == 0x14 ) {

					FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); // BYPASS.MODE

					FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x00 ); // SPLIT.MODE
				}
				else if( pDevice->iManufacturer == 0x13 ||
					
						 pDevice->iManufacturer == 0x18 ||
					
						 pDevice->iManufacturer == 0x1A ) {
				
					ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
					
					R0000E004 |=  0x00000004; // BYPASS.MODE

					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

					R0000E004 &= ~0x00000004; // SPLITER.MODE

					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
				}
				else {

					ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
					
					R0000E004 |=  0x00020000; // BYPASS.MODE

					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

					R0000E004 &= ~0x00020000; // SPLITER.MODE

					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
				}
				
				F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[CH%02d] [FPGA.RESET.#0] ---\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE);
			}
		}
		#endif

		{	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000FE8, 0x000003FF );	// VIP.INT.CLEAR

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000000, 0x00010000 );	// VIP.MODE

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000000, 0xD0020000 ); // VIP.MODE
		}
			
		//	SA7160_START_THREAD();
			F5D69F1955AA4EBCAF770CF98A9B4992( pDevice );
		}

		ULONG R00008000 = 0x00000000;

		ULONG i = 0;

		for( i = 0 ; i < 100 ; i++ ) {

			R00008000 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00008000 + 0x0000 );
			if( R00008000 == 0x00000000 ) { break; }

			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(25) );
		}

	if( R00008000 == 0x00000000 ) {

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0000, 0x00000007 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0004, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0008, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x000C, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0010, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0014, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0018, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x001C, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0020, 0x00000000 );

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0024, 0x00000007 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0028, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x002C, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0030, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0034, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0038, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x003C, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0040, 0x00000000 );
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0044, 0x00000000 );
	}

	// -----> tmHWStreamPort_VIP_Video::tmIPause()
	// 
	{	ULONG R00000000 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000000 ); // VIP.MODE
		ULONG R00000180 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000180 ); // VIP.AUX.XYSTART	
		ULONG R00000184 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000184 ); // VIP.AUX.XYEND  
		ULONG R00000380 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000380 ); // VIP.AUX.FORMAT 
		ULONG R00000390 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000390 ); // VIP.AUX.BASE   
		ULONG R00000394 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000394 ); // VIP.AUX.PITCH  

		ULONG i = 0;
		for( i = 0 ; i < 25 ; i++ ) { // CHECK IF VIDEO IS RUNNING

			R00000000 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000000 ); // VIP.MODE

			if( R00000000 != 0xFFFFFFFF ) { break; }

			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(25) );
		}
		if( R00000000 == 0xFFFFFFFF ) { R00000000 = 0x00000000; }

		// -----> tmHWStreamPort_VIP_Video::tmIPause() -----> tmHWStreamPort_VIP_Video::tmSetInternalClock()
		//
		{	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x44, 0x00000001 ); // CGU.PCR.05

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 * 5, 0x00000001 ); // CGU.SCR.05

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 * 5, 0x00000000 ); // CGU.FS1.05

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x44, 0x00000001 ); // CGU.ESR.05
		}
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000000, 0x00010000 );	// VIP.MODE
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000FE4, 0x00000000 );	// VIP.INT.ENABLE
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000FE8, 0x000003FF );	// VIP.INT.CLEAR
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000180, 0x00000000 ); // VIP.AUX.XYSTART
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000184, 0x00000000 ); // VIP.AUX.XYEND  
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000380, 0x00000000 ); // VIP.AUX.FORMAT 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000390, 0x00000000 ); // VIP.AUX.BASE   
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000394, 0x00000000 ); // VIP.AUX.PITCH  
	}
	// -----> tmHWStreamPort_VIP_Video::tmIRun()
	//
	{	ULONG R0009004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00009000 + 0x0004 ); // MMU.DMA.CONFIG

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0004, R0009004 & ~0x40 ); // MMU.DMA.CONFIG

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0004, R0009004 |  0x40 ); // MMU.DMA.CONFIG

		ULONG R0009008 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00009000 + 0x0008 ); // MMU.DMA.CONFIG

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0008, R0009008 & ~0x40 ); // MMU.DMA.CONFIG

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0008, R0009008 |  0x40 ); // MMU.DMA.CONFIG

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0FE4, 0x000003FF ); // VIP.INT.ENABLE
		
		ULONG i = 0;
		for( i = 0 ; i < 1000 ; i++ ) {

			ULONG R0009004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00009000 + 0x0004 ); // MMU.DMA.CONFIG

			ULONG R0009008 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00009000 + 0x0008 ); // MMU.DMA.CONFIG

			if( (R0009004 & 0x00000080) &&

				(R0009004 & 0x00000080) ) {

				break;
			}
			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );
		}
		ULONG R00000000 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x0000 ); // VIP.MODE

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 * 5, 0x00000002 ); // CGU.FS1.05

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x44, 0x00000000 ); // CGU.ESR.05

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0000, R00000000 | 0xD0020000 ); // VIP.MODE
	}

	// -----> tmHWStreamPort_Audio::tmIAcquire()
	// 
	ULONG n_audio_port = 0x00000002;

	if( (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x06) ||
		   
		(pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x07) ||
		  
		(pDevice->iManufacturer == 0x08) ||
	   
		(pDevice->iManufacturer == 0x0C) ||

		(pDevice->iManufacturer == 0x0D) ||
		
		(pDevice->iManufacturer == 0x14) ||

		(pDevice->iManufacturer == 0x16) ||

		(pDevice->iManufacturer == 0x1B) ) {

		if( pDevice->m_nAnalogCrossbarAudioInputProperty == 1 ) {

			n_audio_port = 0x00000001;
		}
	}
	if( (pDevice->iManufacturer == 0x0C) ||
	
		(pDevice->iManufacturer == 0x16) ) {
		
		if( pDevice->m_nAnalogCrossbarVideoInputProperty == 2 ||
			
			pDevice->m_nAnalogCrossbarVideoInputProperty == 3 ) {

			n_audio_port = 0x00000001;
		}
	}
//#ifdef ENABLE_8CHS
	if( (pDevice->iManufacturer & 0x10) == 0x10 && ENABLE_8CHS )
	{
		n_audio_port = 0x00000003;
	}
//#endif

	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A( Audio port:%08X )\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, n_audio_port );

	if( n_audio_port & 0x00000001 ) {

		// -----> tmHWStreamPort_Audio::tmIAcquire() -----> tmHWStreamPort_Audio::tmISetParameters()
		// 
		// AIP PROGRAMMING (m_pMunit_AudioIn)
		// 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x0004, 0x80000000 ); // AIP.CTL

		// BAM PROGRAMMING (m_pMunit_BAM)
		// 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0168, 0x00000040 ); // BAM.DMA.BUF.MODE -> BAM_DMA_Buf_Mode)

		// AIP PROGRAMMING (m_pMunit_AudioIn) (FF6347EA309EF49519F7F07D0B6B28662)
		// 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x001C, 0x00000000 ); // AIP.SIZE

		ULONG R00007FFC = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00006000 + 0x0FFC ); // AIP.MODULE.ID

		if( R00007FFC != 0x010D1200 ) {

			;
		}
		F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A( AIP:%08X )\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R00007FFC );

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x0008, 0x00000000 ); // AIP.SERIAL
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x0004, 0x30000000 ); // AIP.CTL
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x000C, 0x00000200 ); // AIP.FRAMING
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x0014, 0x01400000 ); // AIP.BASE1
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x0018, 0x01400000 ); // AIP.BASE2

		if( pDevice->iManufacturer == 0x0A ||

			pDevice->iManufacturer == 0x0D ||

			pDevice->iManufacturer == 0x18 ||

			pDevice->iManufacturer == 0x1A ) {

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x000C, 0x80000200 ); // AIP.FRAMING (L/R ADJUSTMENT)
		}
		else {

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x000C, 0x00000200 ); // AIP.FRAMING
		}

		ULONG R00008168 = 0x00000000;
		ULONG i = 0;
		for( i = 0 ; i < 100 ; i++ ) {

			R00008168 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00008000 + 0x0168 );

			if( R00008168 == 0x00000000 ) { break; }

			//F6B9E557A4BA24ffd926B820B836289C8_100NS( 250000 );
			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 25 ) );
		}
		if( R00008168 == 0x00000000 ) {

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0168, 0x00000007 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x016C, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0170, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0174, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0178, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x017C, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0180, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0184, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0188, 0x00000000 );
		}

		// -----> tmHWStreamPort_Audio::tmIPause()
		// 
		{	ULONG R00007004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00006000 + 0x00000004 ); // AIP.CTL

			// -----> tmHWStreamPort_Audio::tmIPause() -----> tmHWStreamPort_Audio::tmSetInternalClock()
			//
			{	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x5C, 0x00000001 ); // CGU.PCR.11

				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 * 11, 0x00000001 ); // CGU.SCR.11

				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 * 11, 0x00000000 ); // CGU.FS1.11

				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x5C, 0x00000001 ); // CGU.ESR.11
			}
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x00000020, 0x0000000F );	// AIP.INT.ACKN
		}
		// -----> tmHWStreamPort_Audio::tmIRun()
		//
		{	ULONG R000902C = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00009000 + 0x002C ); // MMU.DMA.CONFIG

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x002C, R000902C & ~0x40 ); // MMU.DMA.CONFIG

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x002C, R000902C |  0x40 ); // MMU.DMA.CONFIG

			for( i = 0 ; i < 1000 ; i++ ) {

				R000902C = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00009000 + 0x002C ); // MMU.DMA.CONFIG

				if( R000902C & 0x00000080 ) {

					break;
				}
				//F6B9E557A4BA24ffd926B820B836289C8_100NS( 100 );
				wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 1 ) );

			}
			ULONG R00007004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00006000 + 0x00000004 ); R00007004 |= 0x000000F0; // AIP.CTL

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x00000004, R00007004 ); // AIP.CTL

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x00000020, 0x0000000F );	// AIP.INT.ACKN

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 * 11, 0x00000008 ); // CGU.FS1.11

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x5C, 0x00000000 ); // CGU.ESR.11

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x00000004, R00007004 | 0x40000000 ); // AIP.CTL

			//F6B9E557A4BA24ffd926B820B836289C8_100NS( 100000 );
			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 10 ) );

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x0000001C, 0x00000400 ); // AIP.SIZE (4096)
		}
	}
	if( n_audio_port & 0x00000002 ) {

		// -----> tmHWStreamPort_Audio::tmIAcquire() -----> tmHWStreamPort_Audio::tmISetParameters()
		// 
		// AIP PROGRAMMING (m_pMunit_AudioIn)
		// 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x0004, 0x80000000 ); // AIP.CTL

		// BAM PROGRAMMING (m_pMunit_BAM)
		// 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x018C, 0x00000040 ); // BAM.DMA.BUF.MODE

		// AIP PROGRAMMING (m_pMunit_AudioIn) (FF6347EA309EF49519F7F07D0B6B28662)
		// 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x001C, 0x00000000 ); // AIP.SIZE

		ULONG R00007FFC = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00007000 + 0x0FFC ); // AIP.MODULE.ID

		if( R00007FFC != 0x010D1200 ) {

			;
		}
		F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A( AIP:%08X )\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R00007FFC );

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x0008, 0x00000000 ); // AIP.SERIAL
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x0004, 0x30000000 ); // AIP.CTL
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x000C, 0x00000200 ); // AIP.FRAMING
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x0014, 0x01600000 ); // AIP.BASE1 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x0018, 0x01600000 ); // AIP.BASE2

		if( pDevice->iManufacturer == 0x0A ||

			pDevice->iManufacturer == 0x0D ||

			pDevice->iManufacturer == 0x18 ||

			pDevice->iManufacturer == 0x1A ) {

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x000C, 0x80000200 ); // AIP.FRAMING (L/R ADJUSTMENT)
		}
		else {

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x000C, 0x00000200 ); // AIP.FRAMING
		}

		ULONG R0000818C = 0x00000000;
		ULONG i = 0;
		for( i = 0 ; i < 100 ; i++ ) {

			R0000818C = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00008000 + 0x018C );

			if( R0000818C == 0x00000000 ) { break; }

			//F6B9E557A4BA24ffd926B820B836289C8_100NS( 250000 );
			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 25 ) );

		}
		if( R0000818C == 0x00000000 ) {

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x018C, 0x00000007 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0190, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0194, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0198, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x019C, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x01A0, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x01A4, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x01A8, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x01AC, 0x00000000 );
		}

		// -----> tmHWStreamPort_Audio::tmIPause()
		// 
		{	ULONG R00007004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00007000 + 0x00000004 ); // AIP.CTL

			// -----> tmHWStreamPort_Audio::tmIPause() -----> tmHWStreamPort_Audio::tmSetInternalClock()
			//
			{	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x60, 0x00000001 ); // CGU.PCR.12

				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 * 12, 0x00000001 ); // CGU.SCR.12

				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 * 12, 0x00000000 ); // CGU.FS1.12

				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x60, 0x00000001 ); // CGU.ESR.12
			}
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x00000020, 0x0000000F );	// AIP.INT.ACKN
		}
		// -----> tmHWStreamPort_Audio::tmIRun()
		//
		{	ULONG R0009030 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00009000 + 0x0030 ); // MMU.DMA.CONFIG

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0030, R0009030 & ~0x40 ); // MMU.DMA.CONFIG

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0030, R0009030 |  0x40 ); // MMU.DMA.CONFIG
			
			for( i = 0 ; i < 1000 ; i++ ) {

				R0009030 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00009000 + 0x0030 ); // MMU.DMA.CONFIG

				if( R0009030 & 0x00000080 ) {

					break;
				}
				//F6B9E557A4BA24ffd926B820B836289C8_100NS( 100 );
				wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 1 ) );

			}
			ULONG R00007004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00007000 + 0x00000004 ); R00007004 |= 0x000000F0; // AIP.CTL

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x00000004, R00007004 ); // AIP.CTL

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x00000020, 0x0000000F );	// AIP.INT.ACKN

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 * 12, 0x00000009 ); // CGU.FS1.12

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x60, 0x00000000 ); // CGU.ESR.12

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x00000004, R00007004 | 0x40000000 ); // AIP.CTL

			//F6B9E557A4BA24ffd926B820B836289C8_100NS( 100000 );
			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 10 ) );

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x0000001C, 0x00000400 ); // AIP.SIZE (4096)
		}
	}
		// -----> tmHWInterrupts_mUncle::tmIAddInterruptCallback()
		//
//		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FE8, 0x00000801 ); // MSI.INT.ENA.SET.L

//		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FEC, 0x00000000 ); // MSI.INT.ENA.SET.H

	if( (pDevice->iManufacturer == 0x19) || (pDevice->iManufacturer == 0x18 && SA7160_IS_4K2K_ENABLED( pDevice )) )
	{
		NULL; // no interrupt
	}
	else if( (pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 0) ) { // +SC510N4 HDMI

		if( pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE > 0 ) {

			F42A18AF66EFF459eA332CA253FFF8A65 * p_brother_device = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE - 1 ];

			if( p_brother_device ) {
				
				ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( p_brother_device, 0x0000E000 + 0x0004 ); // GPIO.WR
						
				if( (R0000E004 & 0x00000004) == 0x00000000 ) { // SPLITER.MODE

					F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A() no interrupt 0x1A\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );
				}
				else
				{
					// ...
					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FC8, 0xFFFFFFFF ); // MSI.INT.STATUS.CLR.L

					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FCC, 0xFFFFFFFF ); // MSI.INT.STATUS.CLR.H

					// ...
					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FE8, 0x00000C01 ); // MSI.INT.ENA.SET.L

					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FEC, 0x00000000 ); // MSI.INT.ENA.SET.H

					pDevice->F5C8C1DAFA2D74241A96FE41ED93197F8 = TRUE;

					F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A() enable interrupt 0x1A\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );
				}
			}
		}
	}
	else if( (pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 0) ) { // +SC510N4 SDI

		if( pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE > 0 ) {

			F42A18AF66EFF459eA332CA253FFF8A65 * p_brother_device = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE - 1 ];

			if( p_brother_device ) {
				
				ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( p_brother_device, 0x0000E000 + 0x0004 ); // GPIO.WR
						
				if( (R0000E004 & 0x00020000) == 0x00000000 ) { // SPLITER.MODE

					F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A() no interrupt 0x1B\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );
				}
				else
				{
					// ...
					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FC8, 0xFFFFFFFF ); // MSI.INT.STATUS.CLR.L

					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FCC, 0xFFFFFFFF ); // MSI.INT.STATUS.CLR.H

					// ...
					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FE8, 0x00000C01 ); // MSI.INT.ENA.SET.L

					A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FEC, 0x00000000 ); // MSI.INT.ENA.SET.H

					pDevice->F5C8C1DAFA2D74241A96FE41ED93197F8 = TRUE;

					F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A() enable interrupt 0x1B\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );
				}
			}
		}
	}
	else
	{

		// ...
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FC8, 0xFFFFFFFF ); // MSI.INT.STATUS.CLR.L

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FCC, 0xFFFFFFFF ); // MSI.INT.STATUS.CLR.H

		// ...
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FE8, 0x00000C01 ); // MSI.INT.ENA.SET.L

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FEC, 0x00000000 ); // MSI.INT.ENA.SET.H

		pDevice->F5C8C1DAFA2D74241A96FE41ED93197F8 = TRUE;

		F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A() enable interrupt\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );

	}

	pDevice->F03D1DD650AC64c28B04687338F970D0E[ 0 ] = 0;

	pDevice->F66FD293166B14f93A084AE0E6BD0F196[ 0 ] = 1;

	pDevice->A999292E148D40E58CCA15DC366CF956.tv_sec = 0;

	pDevice->A999292E148D40E58CCA15DC366CF956.tv_usec = 0;	

	pDevice->FE995CA4291A4F109AAE766EB116EB25 = 0;


#ifdef ENABLE_1920X1080PX60FPS

	if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) ||
		
		(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) ||
				
		(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) ||

		(pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||
		
		(pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 8) ||

		pDevice->iManufacturer == 0x10 ||

		pDevice->iManufacturer == 0x12 ||

		pDevice->iManufacturer == 0x13 ||
		
		pDevice->iManufacturer == 0x14 ||
		
		pDevice->iManufacturer == 0x16 ||

		pDevice->iManufacturer == 0x17 ||
		
		pDevice->iManufacturer == 0x18 ) {

		if( p_brother_sys_cfg == NULL ) {

			SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

			ULONG nums = 1;
			
			if( (p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
				
				(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
				
				(p_sys_cfg->n_input_video_resolution_cx >= 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
				
				(p_sys_cfg->n_input_video_resolution_cx >= 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120) ) {

				nums = 3;
			}
			else {

				nums = 1;
			}

			//initial all 4 chips in case resolution is not detected
			if(pDevice->iManufacturer == 0x13)
			{
				nums = 3;
			}

			F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A( nums:%X )\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, nums );

			BOOL is_ite_table = FALSE;

			if( (pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||
							
				(pDevice->iManufacturer == 0x13) ||

				(pDevice->iManufacturer == 0x18) ) {

				is_ite_table = TRUE;
			}
			
			ULONG n = 0;
			
			for( n = 0 ; n < nums ; n++ ) {

				F42A18AF66EFF459eA332CA253FFF8A65 * p_brother_device = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + n + 1 ];

				if( p_brother_device ) {
				
					if( p_brother_device->FC3FEC90DD3E6414c83437752D6A0B4B2 > 0 ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A() already used(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + n + 1 ); break ; } // +SC510N4 [已經在使用]

					EE7012456B844F189B414E6E9F80974A( p_brother_device, p_sys_cfg, is_ite_table );
				}
				else
				{
					F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] EE7012456B844F189B414E6E9F80974A() no device(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + n + 1 );
				}
				if( n == (nums - 1) ) {

					return TRUE;
				}
			}
		}
		else {

			//never come here
			//pDevice->F5C8C1DAFA2D74241A96FE41ED93197F8 = 0x00000000;

			//A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FC8, 0xFFFFFFFF ); // MSI.INT.STATUS.CLR.L

			//A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FCC, 0xFFFFFFFF ); // MSI.INT.STATUS.CLR.H

			//A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FE8, 0x00000C01 ); // MSI.INT.ENA.SET.L

			//A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FEC, 0x00000000 ); // MSI.INT.ENA.SET.H

			//pDevice->F5C8C1DAFA2D74241A96FE41ED93197F8 = 0x00000001;
		}
	}
#endif

	return TRUE;
}

BOOLEAN EF8E67A5A31D4630AAB8CB2F9CE53E35( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice, SA7160_SYS_CFG * p_brother_sys_cfg )
{
	F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] EF8E67A5A31D4630AAB8CB2F9CE53E35(%d) \n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 );

	if( p_brother_sys_cfg == NULL ) {

		if( pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 == 0 ) return TRUE;
		
		if( pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 != 1 ) {

			pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2--;

			return TRUE;
		}
		pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 = 0;

	}

	pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 = 0;

	F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] EF8E67A5A31D4630AAB8CB2F9CE53E35() enter\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );


	// ...
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FE0, 0x00000C01 ); // MSI.INT.CLR.SET.L

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FE4, 0x00000000 ); // MSI.INT.CLR.SET.H

	pDevice->F03D1DD650AC64c28B04687338F970D0E[ 0 ] = 0;

	pDevice->F66FD293166B14f93A084AE0E6BD0F196[ 0 ] = 0;

	pDevice->m_nAnalogCopyProtMacrovisionProperty = 0;

	pDevice->m_nAnalogVideoDecoderStatusProperty = 0;

	// -----> tmHWStreamPort_VIP_Video::tmIPause()
	// 
	ULONG R00000000 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000000 ); // VIP.MODE

	ULONG i = 0;
	for( i = 0 ; i < 25 ; i++ ) { // CHECK IF VIDEO IS RUNNING

		R00000000 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000000 ); // VIP.MODE

		if( R00000000 != 0xFFFFFFFF ) { break; }

		wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(25) );
	}
	if( R00000000 == 0xFFFFFFFF ) { R00000000 = 0xC0000000; }

	if( R00000000 & 0xC0000000 ) {

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000000, R00000000 & 0x3FFFFFFF );	// VIP.MODE

		//wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(25) );
		mdelay(25);
	}
	// -----> tmHWStreamPort_VIP_Video::tmIPause() -----> tmHWStreamPort_VIP_Video::tmSetInternalClock()
	//
	{	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x44, 0x00000001 ); // CGU.PCR.05

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 * 5, 0x00000001 ); // CGU.SCR.05

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 * 5, 0x00000000 ); // CGU.FS1.05

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x44, 0x00000001 ); // CGU.ESR.05
	}
	if( R00000000 & 0xC0000000 ) {

		// -----> tmHWStreamPort_VIP_Video::tmIPause() -----> tmHWStreamPort_VIP_Video::tmISetParameters()
		// 
		// BAM PROGRAMMING (m_pMunit_BAM)
		// 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0000, 0x00000040 ); // BAM.DMA.BUF.MODE

		// VIP PROGRAMMING (m_pMunit_VIP) (m_pVIP_Lite)
		// 
		ULONG R00000FFC = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x0FFC ); // VIP.MODULE.ID

		if( R00000FFC != 0x011A5100 ) {

			;
		}
		F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] EF8E67A5A31D4630AAB8CB2F9CE53E35( VIP:%08lX )\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R00000FFC );

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0FF4, 0x00000000 ); // VIP.POWER.DOWN
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0020, 0x00000000 ); // VIP.ANC.DID.FIELD0
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0024, 0x00000000 ); // VIP.ANC.DID.FIELD1
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0040, 0x00000000 ); // VIP.LINE.THR
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0160, 0x00000000 ); // VIP.PRE.DIT.CTRL
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0164, 0x00000000 ); // VIP.POST.DIT.CTRL
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0284, 0x00000000 ); // VIP.CSM.CKEY
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0140, 0x03380001 ); // VIP.WIN.XYSTART
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0144, 0x0AB80439 ); // VIP.WIN.XYEND
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0304, 0x07800438 ); // VIP.PSU.WINDOW (1920 × 1080)
	//	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0300, 0x000020A0 ); // VIP.PSU.FORMAT (SAA1997)
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0300, 0x000020A1 ); // VIP.PSU.FORMAT (MST3367)
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0100, 0x01004201 ); // VIP.VIN.FORMAT
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0340, 0x00000000 ); // VIP.PSU.BASE1
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0344, 0x00000F00 ); // VIP.PSU.PITCH1
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x034C, 0x00000000 ); // VIP.PSU.PITCH2
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0348, 0x00000000 ); // VIP.PSU.BASE2
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0350, 0x00000000 ); // VIP.PSU.BASE3
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0354, 0x00000000 ); // VIP.PSU.BASE4
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0358, 0x00000000 ); // VIP.PSU.BASE5
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x035C, 0x00000000 ); // VIP.PSU.BASE6

		ULONG R00008000 = 0x00000000;
		
		ULONG i = 0;
		for( i = 0 ; i < 100 ; i++ ) {

			R00008000 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00008000 + 0x0000 );

			if( R00008000 == 0x00000000 ) { break; }

			//wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(25) );
			mdelay(25);

		}
		if( R00008000 == 0x00000000 ) {

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0000, 0x00000007 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0004, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0008, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x000C, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0010, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0014, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0018, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x001C, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0020, 0x00000000 );

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0024, 0x00000007 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0028, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x002C, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0030, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0034, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0038, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x003C, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0040, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0044, 0x00000000 );
		}
	}
	{	// -----> tmHWStreamPort_Audio::tmIPause()
		// 
		ULONG R00007004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00006000 + 0x00000004 ); // AIP.CTL
	
		if( R00007004 & 0x40000000 ) {
	
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x0000001C, 0x00000000 ); // AIP.SIZE
	
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x00000004, R00007004 & 0xBFFFFF0F ); // AIP.CTL
	
			//F6B9E557A4BA24ffd926B820B836289C8_100NS( 250000 );
			//wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 25 ) );
			mdelay(25);


		}
		// -----> tmHWStreamPort_Audio::tmIPause() -----> tmHWStreamPort_Audio::tmSetInternalClock()
		//
		{	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x5C, 0x00000001 ); // CGU.PCR.11
	
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 * 11, 0x00000001 ); // CGU.SCR.11
	
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 * 11, 0x00000000 ); // CGU.FS1.11
	
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x5C, 0x00000001 ); // CGU.ESR.11
		}
		if( R00007004 & 0x40000000 ) {
	
			// -----> tmHWStreamPort_Audio::tmIPause() -----> tmHWStreamPort_Audio::tmISetParameters()
			// 
			// AIP PROGRAMMING (m_pMunit_AudioIn)
			// 
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x0004, 0x80000000 ); // AIP.CTL
	
			// BAM PROGRAMMING (m_pMunit_BAM)
			// 
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0168, 0x00000040 ); // BAM.DMA.BUF.MODE
	
			// AIP PROGRAMMING (m_pMunit_AudioIn) (FF6347EA309EF49519F7F07D0B6B28662)
			// 
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x001C, 0x00000000 ); // AIP.SIZE
	
			ULONG R00007FFC = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00006000 + 0x0FFC ); // AIP.MODULE.ID
	
			if( R00007FFC != 0x010D1200 ) {
	
				;
			}
			F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] EF8E67A5A31D4630AAB8CB2F9CE53E35( AIP:%08X )\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R00007FFC );
	
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x0008, 0x00000000 ); // AIP.SERIAL
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x0004, 0x30000000 ); // AIP.CTL
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x000C, 0x00000200 ); // AIP.FRAMING
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x0014, 0x01400000 ); // AIP.BASE1
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x0018, 0x01400000 ); // AIP.BASE2
	
			ULONG R00008168 = 0x00000000;
			
			ULONG i = 0;
			for( i = 0 ; i < 100 ; i++ ) {
	
				R00008168 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00008000 + 0x0168 );
	
				if( R00008168 == 0x00000000 ) { break; }
	
				//F6B9E557A4BA24ffd926B820B836289C8_100NS( 250000 );
				//wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 25 ) );
				mdelay(25);

			}
			if( R00008168 == 0x00000000 ) {
	
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0168, 0x00000007 );
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x016C, 0x00000000 );
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0170, 0x00000000 );
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0174, 0x00000000 );
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0178, 0x00000000 );
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x017C, 0x00000000 );
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0180, 0x00000000 );
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0184, 0x00000000 );
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0188, 0x00000000 );
			}
	    }
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00006000 + 0x00000020, 0x0000000F );	// AIP.INT.ACKN
	}
	// -----> tmHWStreamPort_Audio::tmIPause()
	// 
	ULONG R00007004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00007000 + 0x00000004 ); // AIP.CTL

	if( R00007004 & 0x40000000 ) {

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x0000001C, 0x00000000 ); // AIP.SIZE

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x00000004, R00007004 & 0xBFFFFF0F ); // AIP.CTL

		//wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(25) );
		mdelay(25);

    }
	// -----> tmHWStreamPort_Audio::tmIPause() -----> tmHWStreamPort_Audio::tmSetInternalClock()
	//
	{	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x60, 0x00000001 ); // CGU.PCR.12

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 * 12, 0x00000001 ); // CGU.SCR.12

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 * 12, 0x00000000 ); // CGU.FS1.12

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x60, 0x00000001 ); // CGU.ESR.12
	}
	if( R00007004 & 0x40000000 ) {

		// -----> tmHWStreamPort_Audio::tmIPause() -----> tmHWStreamPort_Audio::tmISetParameters()
		// 
		// AIP PROGRAMMING (m_pMunit_AudioIn)
		// 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x0004, 0x80000000 ); // AIP.CTL

		// BAM PROGRAMMING (m_pMunit_BAM)
		// 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x018C, 0x00000040 ); // BAM.DMA.BUF.MODE

		// AIP PROGRAMMING (m_pMunit_AudioIn) (FF6347EA309EF49519F7F07D0B6B28662)
		// 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x001C, 0x00000000 ); // AIP.SIZE

		ULONG R00007FFC = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00007000 + 0x0FFC ); // AIP.MODULE.ID

		if( R00007FFC != 0x010D1200 ) {

			;
		}
		F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] EF8E67A5A31D4630AAB8CB2F9CE53E35( AIP:%08lX )\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R00007FFC );

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x0008, 0x00000000 ); // AIP.SERIAL
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x0004, 0x30000000 ); // AIP.CTL
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x000C, 0x00000200 ); // AIP.FRAMING
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x0014, 0x01600000 ); // AIP.BASE1 
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x0018, 0x01600000 ); // AIP.BASE2

		ULONG R0000818C = 0x00000000;

		ULONG i = 0;
		for( i = 0 ; i < 100 ; i++ ) {

			R0000818C = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00008000 + 0x018C );

			if( R0000818C == 0x00000000 ) { break; }

			//wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(25) );
			mdelay(25);

		}
		if( R0000818C == 0x00000000 ) {

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x018C, 0x00000007 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0190, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0194, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0198, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x019C, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x01A0, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x01A4, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x01A8, 0x00000000 );
			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x01AC, 0x00000000 );
		}
    }
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00007000 + 0x00000020, 0x0000000F );	// AIP.INT.ACKN

	// ...

	// ...
	//A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FE0, 0x00000C01 ); // MSI.INT.CLR.SET.L

	//A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FE4, 0x00000000 ); // MSI.INT.CLR.SET.H

#ifdef ENABLE_1920X1080PX60FPS

	if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) ||
					
		(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) ||
				
		(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) ||
		
		(pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||
		
		(pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 8) ||

		pDevice->iManufacturer == 0x10 ||

		pDevice->iManufacturer == 0x12 ||
		
		pDevice->iManufacturer == 0x13 ||
		
		pDevice->iManufacturer == 0x14 ||
		
		pDevice->iManufacturer == 0x16 ||

		pDevice->iManufacturer == 0x17 ||
		
		pDevice->iManufacturer == 0x18 ) {

		if( p_brother_sys_cfg == NULL ) {

			SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

			ULONG nums = 1;

			if( (p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
				
				(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
				
				(p_sys_cfg->n_input_video_resolution_cx >= 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

				(p_sys_cfg->n_input_video_resolution_cx >= 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
				
				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120) ) {

				nums = 3;
			}
			else {

				nums = 1;
			}

			//uninitial all 4 chips in case resolution is not detected
			if(pDevice->iManufacturer == 0x13)
			{
				nums = 3;
			}

			ULONG n = 0;
			
			for( n = 0 ; n < nums ; n++ ) {

				F42A18AF66EFF459eA332CA253FFF8A65 * p_brother_device = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + n + 1 ];

				if( p_brother_device ) {

					if( p_brother_device->FC3FEC90DD3E6414c83437752D6A0B4B2 > 0 ) { break ; } // +SC510N4

					return EF8E67A5A31D4630AAB8CB2F9CE53E35( p_brother_device, p_sys_cfg );
				}
				if( n == (nums - 1) ) {

					return TRUE;
				}
			}
		}
		else {

			//never come here
			//pDevice->F5C8C1DAFA2D74241A96FE41ED93197F8 = 0x00000000;

			//A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FE8, 0x00000C01 ); // MSI.INT.CLR.SET.L

			//A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x00000FEC, 0x00000000 ); // MSI.INT.CLR.SET.H

			//pDevice->F5C8C1DAFA2D74241A96FE41ED93197F8 = 0x00000001;
		}
	}
#endif

	return SA7160_PowerDownPeripherals( pDevice );
}

BOOLEAN SA7160_PowerDownPeripherals( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice )
{
	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "SA7160_PowerDownPeripherals()\n" );

	return TRUE;
}

BOOLEAN E9221AB6271147C39123AF9DE00B9033( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice )
{
	ULONG i = 0;

	ULONG j = 0;



	pDevice->FF362AA37F7D046bf90568AC1600626D9 = pDevice->F9D9594A095F0463193B7588374CF8310->bus->number % 16;

	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] E9221AB6271147C39123AF9DE00B9033()\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );

	pDevice->m_pCustomSystemConfigProperty = (SA7160_SYS_CFG *)wrapper_kmalloc( sizeof(SA7160_SYS_CFG), GFP_KERNEL );

	memset( pDevice->m_pCustomSystemConfigProperty, 0, sizeof(SA7160_SYS_CFG) );

	g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE ] = pDevice;

	SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

	// CHECK IF BAR0 IS FINE
	//
	// -----> CJetPackDevice::CJetPackDevice()
	//
	{
		DWORD CFG10 = 0x00000000; 

		DWORD CFG14 = 0x00000000; 
		
		wrapper_pci_read_config_dword( pDevice->F9D9594A095F0463193B7588374CF8310, 0x00000010, &CFG10 );

		wrapper_pci_read_config_dword( pDevice->F9D9594A095F0463193B7588374CF8310, 0x00000014, &CFG14 );

		if( (pDevice->m_pRegBaseCommonPhysicalBuffer[ 0 ] | 0x00000004) != CFG10 ) {
		
			F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] E9221AB6271147C39123AF9DE00B9033() error m_pRegBaseCommonPhysicalBuffer[ 0 ](0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pDevice->m_pRegBaseCommonPhysicalBuffer[ 0 ] );

			if( pDevice->m_pRegBaseCommonPhysicalBuffer[ 0 ] == 0x0000000000000000 ) {	goto ERROR_HARDWARE_INITIALIZE; }

			CFG10 |= 0x00000004;

			wrapper_pci_write_config_dword( pDevice->F9D9594A095F0463193B7588374CF8310, 0x00000010, CFG10 );

			wrapper_pci_read_config_dword( pDevice->F9D9594A095F0463193B7588374CF8310, 0x00000010, &CFG10 );

			if( (pDevice->m_pRegBaseCommonPhysicalBuffer[ 0 ] | 0x00000004) != CFG10 ) { goto ERROR_HARDWARE_INITIALIZE; }
		}

		F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] E9221AB6271147C39123AF9DE00B9033() CFG10(0x%x) m_pRegBaseCommonPhysicalBuffer[ 0 ](0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, CFG10, pDevice->m_pRegBaseCommonPhysicalBuffer[ 0 ] );

	}

	// CGU (CLOCK.SHOP) PROGRAMMING (m_pMunit_CGU) (m_pClockShop)
	//
	// -----> tmClockShop::GetBootScriptSetup()
	// 
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x00 + 0x04 * 6, 0x00000001 ); // CGU.PCR.R00.06 GREG
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x00 + 0x04 * 3, 0x00000001 ); // CGU.PCR.R00.03 PSS_MMU
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x00 + 0x04 * 4, 0x00000001 ); // CGU.PCR.R00.04 PSS_DTL2MTL
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x00 + 0x04 * 5, 0x00000001 ); // CGU.PCR.R00.05 MSI
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x30 + 0x04 * 2, 0x00000001 ); // CGU.PCR.R03.02 I2C
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x3C + 0x04 * 1, 0x00000001 ); // CGU.PCR.R04.01 PHI
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x00 + 0x04 * 7, 0x00000001 ); // CGU.PCR.R00.07 GPIO
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x28 + 0x04 * 1, 0x00000001 ); // CGU.PCR.R02.01 SPI
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x20 + 0x04 * 1, 0x00000001 ); // CGU.PCR.R01.01 DCS
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x30 + 0x04 * 1, 0x00000001 ); // CGU.PCR.R03.01 BOOT

    // [PSS   = 00] 00013218
    // [DCS   = 01] 0001321C
    // [SPI   = 02] 00013220
    // [I2C   = 03] 00013224
    // [PHI   = 04] 00013228
    // [VIP0  = 05] 0001322C
    // [VIP1  = 06] 00013230
    // [FGPI0 = 07] 00013234
    // [FGPI1 = 08] 00013238
    // [FGPI2 = 09] 0001323C
    // [FGPI3 = 10] 00013240
    // [AI0   = 11] 00013244
    // [AI1   = 12] 00013248
    // [PHY   = 13] 0001324C
	// 
	p_sys_cfg->n_min_frequency = C_PLL_FREQ / 255;

	p_sys_cfg->n_max_frequency = C_PLL_FREQ;

	if( (C_PLL_FREQ) > (p_sys_cfg->n_min_frequency * 255) ) {

		p_sys_cfg->n_min_frequency++;
	}
	for( i = 0 ; i < C_CGU_CLKS ; i++ ) {

		CHAR N = 0;

		SHORT M = 0;

		p_sys_cfg->n_boot_clock_divider[ i ] = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00013000 + 0x0218 + 0x04 * i ); // CGU.FDC.R**

        p_sys_cfg->n_current_clock_divider[ i ] = p_sys_cfg->n_boot_clock_divider[ i ];

        N = (CHAR)((p_sys_cfg->n_current_clock_divider[ i ] >> 11) & 0xFF);

        N *= -1;

        M = (CHAR)((p_sys_cfg->n_current_clock_divider[ i ] >>  3) & 0xFF);

		M += N;

        if( M > 0 ) {

            p_sys_cfg->n_frequency_table[ i ] = (((ULONG)(N)) * C_PLL_FREQ) / ((ULONG)(M));
        }
        else {

            p_sys_cfg->n_frequency_table[ i ] = 0;
        }
	}

	// -----> tmClockShop::tmSetInternalClock( STREAM_PORT_ALL )
	// 
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x44, 0x00000001 ); // CGU.PCR.R05 VIP 0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x48, 0x00000001 ); // CGU.PCR.R06 VIP 1
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x4C, 0x00000001 ); // CGU.PCR.R07 FGPI 0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x50, 0x00000001 ); // CGU.PCR.R08 FGPI 1
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x54, 0x00000001 ); // CGU.PCR.R09 FGPI 2
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x58, 0x00000001 ); // CGU.PCR.R10 FGPI 3
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x5C, 0x00000001 ); // CGU.PCR.R11 AI0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x00E0 + 0x60, 0x00000001 ); // CGU.PCR.R12 AI1

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 *  5, 0x00000001 ); // CGU.SCR.05 VIP 0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 *  6, 0x00000001 ); // CGU.SCR.06 VIP 1
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 *  7, 0x00000001 ); // CGU.SCR.07 FGPI 0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 *  8, 0x00000001 ); // CGU.SCR.08 FGPI 1
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 *  9, 0x00000001 ); // CGU.SCR.09 FGPI 2
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 * 10, 0x00000001 ); // CGU.SCR.10 FGPI 3
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 * 11, 0x00000001 ); // CGU.SCR.11 AI0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0000 + 0x04 * 12, 0x00000001 ); // CGU.SCR.12 AI1

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 *  5, 0x00000000 ); // CGU.FS1.05 VIP 0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 *  6, 0x00000000 ); // CGU.FS1.06 VIP 1
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 *  7, 0x00000000 ); // CGU.FS1.07 FGPI 0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 *  8, 0x00000000 ); // CGU.FS1.08 FGPI 1
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 *  9, 0x00000000 ); // CGU.FS1.09 FGPI 2
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 * 10, 0x00000000 ); // CGU.FS1.10 FGPI 3
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 * 11, 0x00000000 ); // CGU.FS1.11 AI0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0038 + 0x04 * 12, 0x00000000 ); // CGU.FS1.12 AI1

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x44, 0x00000001 ); // CGU.ESR.05 VIP 0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x48, 0x00000001 ); // CGU.ESR.06 VIP 1
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x4C, 0x00000001 ); // CGU.ESR.07 FGPI 0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x50, 0x00000001 ); // CGU.ESR.08 FGPI 1
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x54, 0x00000001 ); // CGU.ESR.09 FGPI 2
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x58, 0x00000001 ); // CGU.ESR.10 FGPI 3
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x5C, 0x00000001 ); // CGU.ESR.11 AI0
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x01B0 + 0x60, 0x00000001 ); // CGU.ESR.12 AI1

	wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(10) );

	// GREG PROGRAMMING (m_pMunit_GREG)

	// GPIO PROGRAMMING (m_pMunit_GPIO) (m_pGPIOLayer)
	//
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0FF0, 0x00000001 ); // GPIO.SW.RST

	// PHI PROGRAMMING (m_pMunit_SPI) (m_pSPILayer) (None)

	// PHI PROGRAMMING (m_pMunit_PHI) (m_pPHILayer) (None)
	//
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000F000 + 0x0FF0, 0x00000001 ); // PHI.SW.RST

	// DCS PROGRAMMING (m_pMunit_DCS)

	// I2C PROGRAMMING (m_pMunit_I2C) (m_pI2CLayer)
	//
	for( i = 0 ; i < 1 ; i++ ) {

		ULONG R0000B008 = 0x00000000;

		ULONG R0000B00C = 0x00000000;

		ULONG R0000BFE4 = 0x00000000;

		// -----> CI2CLayer_IP3204::Init()
		//
		for( j = 0 ; j < 100 ; j++ ) {

			R0000B008 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + i * 0x00001000 + 0x0008 ); // I2C.STATUS

			if( (R0000B008 & 0x0F) == 0x0D ) {

				break;
			}
			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );
		}
		if( (R0000B008 & 0x0F) != 0x0D ) { ; }

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x000C, 0x000000CC ); // I2C.CONTROL

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0FD8, 0x00001FFF ); // I2C.INT.CLR.ENABLE

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0FE8, 0x00001FFF ); // I2C.INT.CLR.STATUS

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x000C, 0x000000C1 ); // I2C.CONTROL

		for( j = 0 ; j < 100 ; j++ ) {

			R0000B00C = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + i * 0x00001000 + 0x000C ); // I2C.CONTROL

			if( R0000B00C == 0x000000C0 ) {

				break;
			}
			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );
		}
		if( R0000B00C != 0x000000C0 ) { goto ERROR_HARDWARE_INITIALIZE; }

		R0000B008 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + i * 0x00001000 + 0x0008 ); // I2C.STATUS

		if( (R0000B008 & 0x00000008) == 0x00 ) {

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x000C, 0x000000C0 ); // CONTROL

			wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );

			for( j = 0 ; j < 9 ; j++ ) {

				A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x000C, 0x00000040 ); // CONTROL

				wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );

				A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x000C, 0x000000C0 ); // CONTROL

				wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );
			}
		}
//		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0010, 0x00000068 ); // CLOCK.DIVISOR.HIGH

//		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0014, 0x00000087 ); // CLOCK.DIVISOR.LOW

//		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0028, 0x00000060 ); // SDA.HOLD

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0010, 0x00000104 ); // CLOCK.DIVISOR.HIGH (40K)

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0014, 0x00000151 ); // CLOCK.DIVISOR.LOW (40K)

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0028, 0x000000C0 ); // SDA.HOLD (40K)

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0FD8, 0x00001FFF ); // INT.CLR.ENABLE

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0FE8, 0x00001FFF ); // INT.CLR.STATUS

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000B000 + i * 0x00001000 + 0x0FDC, 0x000000C7 ); // INT.SET.ENABLE

		R0000BFE4 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + i * 0x00001000 + 0x0FE4 ); // INT.ENABLE

		if( R0000BFE4 != 0x000000C7 ) { goto ERROR_HARDWARE_INITIALIZE; }

		R0000B008 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000B000 + i * 0x00001000 + 0x0008 ); // STATUS

		if( (R0000B008 & 0x0F) != 0x0D ) { goto ERROR_HARDWARE_INITIALIZE; }

		F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] E9221AB6271147C39123AF9DE00B9033( I2C:%08lX:%08lX:%08lX )\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R0000B008, R0000B00C, R0000BFE4 );
	}

	// MSI PROGRAMMING (m_pMunit_MSI) (m_pHWInterrupts)
	//
	// -----> tmHWInterrupts_mUncle::tmInitMSI()
	//
	ULONG R0000AFFC = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FFC ); // MSI.MODULE.ID

	if( R0000AFFC != 0x00030100 ) { ; }

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0000, 0x00000000 ); // MSI.F6B9E557A4BA24ffd926B820B836289C8.TIMER

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0004, 0x00000001 ); // MSI.INTA.POLARITY

	for( i = 0 ; i < 49 ; i++ ) {

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0008 + 0x04 * i, 0x01000000 ); // MSI.CONFIG
	}
	ULONG R0000A0FD8 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FD8 ); // MSI.INT.ENA.L

	ULONG R0000A0FDC = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FDC ); // MSI.INT.ENA.H

	ULONG R0000A0FC0 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FC0 ); // MSI.INT.STATUS.L

	ULONG R0000A0FC4 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FC4 ); // MSI.INT.STATUS.H

	for( i = 0 ; i < 2 ; i++ ) {

		if( R0000A0FC0 ) { A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0FC8, R0000A0FC0 ); } // MSI.INT.STATUS.CLR.L

		if( R0000A0FC4 ) { A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0FCC, R0000A0FC4 ); } // MSI.INT.STATUS.CLR.H

		if( R0000A0FD8 ) { A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0FE0, R0000A0FD8 ); } // MSI.INT.ENA.CLR.L

		if( R0000A0FDC ) { A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0FE4, R0000A0FDC ); } // MSI.INT.ENA.CLR.H

		wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(5) );

		R0000A0FD8 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FD8 ); // MSI.INT.ENA.L

		R0000A0FDC = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FDC ); // MSI.INT.ENA.H

		R0000A0FC0 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FC0 ); // MSI.INT.STATUS.L

		R0000A0FC4 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FC4 ); // MSI.INT.STATUS.H
	}
	if( R0000A0FD8 != 0x00000000 ) { ; }

	if( R0000A0FDC != 0x00000000 ) { ; }

	if( R0000A0FC0 != 0x00000000 ) { ; }

	if( R0000A0FC4 != 0x00000000 ) { ; }

	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] E9221AB6271147C39123AF9DE00B9033( MSI:%08lX:%08lX:%08lX:%08lX:%08lX )\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R0000AFFC, R0000A0FD8, R0000A0FDC, R0000A0FC0, R0000A0FC4 );

	// DCS PROGRAMMING (m_pMunit_DCS)
	// 
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00014000 + 0x0000, 0x00000016 ); // DCS.CTRL

	// MSI PROGRAMMING (m_pMunit_MSI)
	// 
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0FF0, 0x00000001 ); // MSI.SW.RST

	// MMU PROGRAMMING (m_pMunit_MMU)
	// 
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0FF0, 0x00000001 ); // MMU.SW.RST

	// BAM PROGRAMMING (m_pMunit_BAM)
	// 
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0FF0, 0x00000001 ); // BAM.RST

	// MMU PROGRAMMING (m_pMunit_MMU)
	// 
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0000, 0x00000014 ); // MMU.MODE

	// OTHERS
	// 
	// -----> tmHWStreamPort_VIP_Video::tmHWStreamPort_VIP_Video()
	// 
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0000, 0x00010000 ); // VIP.MODE
	
	// -----> tmHWStreamPort_VIP_Video::InitPageTables()
	// 
	{	ULONG i = 0 ; 

		ULONGLONG memory_F6F32B5439E4C42f095E08326DFA73107 = pDevice->FA81F93DB0A8D49bdBC3753334A5D581D[ 0 ];
		
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0004, 0x00000007 ); // MMU.DMA.CONFIG
	
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0008, 0x00000007 ); // MMU.DMA.CONFIG
				
		for( i = 0 ; i < 8 ; i++ ) {

			UINT R00009044 = (UINT)((memory_F6F32B5439E4C42f095E08326DFA73107 >>  0) & 0xFFFFFFFF);

			UINT R00009048 = (UINT)((memory_F6F32B5439E4C42f095E08326DFA73107 >> 32) & 0xFFFFFFFF);

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0044 + 0x08 * i, R00009044 ); // MMU.PTA.LX

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0048 + 0x08 * i, R00009048 ); // MMU.PTA.LX

			memory_F6F32B5439E4C42f095E08326DFA73107 += 4096;

			R00009044 = (UINT)((memory_F6F32B5439E4C42f095E08326DFA73107 >>  0) & 0xFFFFFFFF);

			R00009048 = (UINT)((memory_F6F32B5439E4C42f095E08326DFA73107 >> 32) & 0xFFFFFFFF);

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0084 + 0x08 * i, R00009044 ); // MMU.PTA.LX

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0088 + 0x08 * i, R00009048 ); // MMU.PTA.LX

			memory_F6F32B5439E4C42f095E08326DFA73107 += 4096;
		}
	}
	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] E9221AB6271147C39123AF9DE00B9033() finish  tmHWStreamPort_VIP_Video::tmHWStreamPort_VIP_Video()\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );

	// -----> tmHWStreamPort_Audio::InitPageTables()
	// 
	{	ULONG i = 0 ;
			
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x002C, 0x00000007 ); // MMU.DMA.CONFIG (A)

		ULONGLONG memory_F6F32B5439E4C42f095E08326DFA73107 = pDevice->FA81F93DB0A8D49bdBC3753334A5D581D[ 1 ];
		
		for( i = 0 ; i < 8 ; i++ ) {

			UINT R000092C4 = (UINT)((memory_F6F32B5439E4C42f095E08326DFA73107 >>  0) & 0xFFFFFFFF);

			UINT R000092C8 = 0;

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x02C4 + 0x08 * i, R000092C4 ); // MMU.PTA.LX

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x02C8 + 0x08 * i, R000092C8 ); // MMU.PTA.LX

			memory_F6F32B5439E4C42f095E08326DFA73107 += 4096;
		}
	}
	{	ULONG i = 0 ;
			
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0030, 0x00000007 ); // MMU.DMA.CONFIG (B)

//#ifdef ENABLE_8CHS
//		ULONGLONG memory_F6F32B5439E4C42f095E08326DFA73107 = pDevice->FA81F93DB0A8D49bdBC3753334A5D581D[ 1 ] + (AMEBDAD_MAX_AUDIO_DMA_BUFFER_SIZE / 2); 
//#else
		ULONGLONG memory_F6F32B5439E4C42f095E08326DFA73107 = pDevice->FA81F93DB0A8D49bdBC3753334A5D581D[ 1 ]; 
//#endif
		if( (pDevice->iManufacturer & 0x10) == 0x10 && ENABLE_8CHS )
		{
			memory_F6F32B5439E4C42f095E08326DFA73107 = pDevice->FA81F93DB0A8D49bdBC3753334A5D581D[ 1 ] + (AMEBDAD_MAX_AUDIO_DMA_BUFFER_SIZE / 2);
		}

		for( i = 0 ; i < 8 ; i++ ) {

			UINT R00009304 = (UINT)((memory_F6F32B5439E4C42f095E08326DFA73107 >>  0) & 0xFFFFFFFF);

			UINT R00009308 = 0;

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0304 + 0x08 * i, R00009304 ); // MMU.PTA.LX

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00009000 + 0x0308 + 0x08 * i, R00009308 ); // MMU.PTA.LX

			memory_F6F32B5439E4C42f095E08326DFA73107 += 4096;
		}
	}
	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] E9221AB6271147C39123AF9DE00B9033() finish  tmHWStreamPort_Audio::InitPageTables()\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );

	// GPIO PROGRAMMING (m_pMunit_GPIO) (m_pGPIOLayer)
	//
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0008, 0x00000000 ); // GPIO.WR.MODE (BY PROGRAMMING IT, GPIO PIN ALSO CAN BE USED AS PHI INTERFACE)

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, 0x00000000 ); // GPIO.WR

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x000C, 0xFBEC3F93 ); // GPIO.OEN

	// GREG PROGRAMMING (m_pMunit_GREG)
	//
	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00012000 + 0x0010, 0x06080F8C ); // GREG.VIP.CTRL

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00012000 + 0x0014, 0x00000321 ); // GREG.FGPI.CTRL

	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00012000 + 0x0028, 0x00000000 ); // GREG.VIP.PORT.CTRL

	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] E9221AB6271147C39123AF9DE00B9033() iManufacturer(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pDevice->iManufacturer );

	if( pDevice->iManufacturer == 0x0A ||

		pDevice->iManufacturer == 0x0D ||

		pDevice->iManufacturer == 0x18 ||

		pDevice->iManufacturer == 0x1A ) {

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00012000 + 0x000C, 0x00000C00 ); // GREG.PMCSR.DATA.2 (08.BITS)
	}
	else {

	//	A60D06861EDC409FA66867980ABA9748( pDevice, 0x00012000 + 0x000C, 0x00000300 ); // GREG.PMCSR.DATA.2 (10.BITS)

		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00012000 + 0x000C, 0x00000C00 ); // GREG.PMCSR.DATA.2 (08.BITS)
	}
//	// GPIO PROGRAMMING (m_pMunit_GPIO) (m_pGPIOLayer)
//	//
//	ULONG R0000A008 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0008 + 0x04 * i ); // MSI.CONFIG
//  
//	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0008 + 0x04 * i, R0000A008 ); // MSI.CONFIG (RISING.EDGE = 0x01000000 / FALLING.EDGE = 0x02000000 / ANY.EDGE = 0x03000000)
//  
//	ULONGLONG INTERRUPTS = (0x0000000000000001 << i);
//  
//	ULONG R0000A0FE8 = (ULONG)((INTERRUPTS >>  0) & (0xFFFFFFFF));
//  
//	ULONG R0000A0FEC = (ULONG)((INTERRUPTS >> 32) & (0xFFFFFFFF));
//  
//	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0FE8, R0000A0FE8 ); // MSI.INT.ENA.SET.L
//  
//	A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0FEC, R0000A0FEC ); // MSI.INT.ENA.SET.H
//  
//	ULONG R0000A0FC0 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FC0 ); // MSI.INT.STATUS.L
//  
//	ULONG R0000A0FC4 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FC4 ); // MSI.INT.STATUS.H
//  
//	if( R0000A0FC0 == 0x00000000 && R0000A0FC4 == 0x00000000 ) { return FALSE ; }
//  
//	if( R0000A0FC0 == 0xFFFFFFFF && R0000A0FC4 == 0xFFFFFFFF ) { return FALSE ; }
//  
//	if( R0000A0FC0 ) { A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0FC8, R0000A0FC0 ); } // MSI.INT.STATUS.CLR.L
//  
//	if( R0000A0FC4 ) { A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0FCC, R0000A0FC4 ); } // MSI.INT.STATUS.CLR.H

	pDevice->m_nAnalogVideoDecoderStatusProperty = 0;

	if( pDevice->iManufacturer == 0x19 ) { // SC510N1.2ND

		;
	}
	else if( pDevice->iManufacturer == 0x0A ||

			 pDevice->iManufacturer == 0x0D ||

			 pDevice->iManufacturer == 0x18 ||
		
			 pDevice->iManufacturer == 0x1A ) {

		BB937A02B9974C289CED8B808D5297D6( pDevice );
	}
	else if( pDevice->iManufacturer == 0x13 ) { // SC510N2.HDMI.4K2K.ADV7619

		SA7160_ADV7619_HwInitialize( pDevice );
	}
	else if( (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x01) ||
				   
			 (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x04) ||
				   
			 (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x06) ||
			   
			 (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x07) ||
			   
			 (pDevice->iProduct == 0xF5 && pDevice->iManufacturer == 0x02) ||
				   
			 (pDevice->iManufacturer == 0x08) ||
				   
			 (pDevice->iManufacturer == 0x12) ||

			 (pDevice->iManufacturer == 0x14) ||

			 (pDevice->iManufacturer == 0x1B) ||
				   
			 (pDevice->iManufacturer == 0x1C) ) {

		E44F164ACBDA4DEF88F28EFF4E99E67A( pDevice );
	}
	else {

		if( pDevice->m_nAnalogCrossbarVideoInputProperty == 5 ) { // COMPOSITE

			F09F823971BF454EB08124479CC7EDB4( pDevice );

			//C2B253D32391436C99E0206137A018A8( pDevice, 0x02, 0x0040 );

//euresys square pixel
			//only update bit 2:5

			BYTE reg02 = E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x02 );

			reg02 &= 0xC0;

			C2B253D32391436C99E0206137A018A8( pDevice, 0x02, reg02 );

			C2B253D32391436C99E0206137A018A8( pDevice, 0x06, 0x0042 );
		}
		else if( pDevice->m_nAnalogCrossbarVideoInputProperty == 6 ) { // SVIDEO

			F09F823971BF454EB08124479CC7EDB4( pDevice );

			//C2B253D32391436C99E0206137A018A8( pDevice, 0x02, 0x0054 );
			BYTE reg02 = E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x02 );

			reg02 &= 0xC0;
				
			reg02 |= 0x14;

			C2B253D32391436C99E0206137A018A8( pDevice, 0x02, reg02 );

			C2B253D32391436C99E0206137A018A8( pDevice, 0x06, 0x0040 );
		}
		else if( pDevice->m_nAnalogCrossbarVideoInputProperty == 4 ) {

			E44F164ACBDA4DEF88F28EFF4E99E67A( pDevice );
		}
		else {

			MST3367_HwInitialize( pDevice );
		}
	}
	if( pDevice->iManufacturer != 0x09 ) { // SC502N1.MC.ADV7181

		ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 );

		if( pDevice->m_nAnalogCrossbarVideoInputProperty == 0 ||  // HDMI (TMDS.B)

			pDevice->m_nAnalogCrossbarVideoInputProperty == 1 ||  // DVI.DIGITAL (TMDS.A)

			pDevice->m_nAnalogCrossbarVideoInputProperty == 4 ) { // SDI

			if( pDevice->m_nAnalogCrossbarAudioInputProperty == 0 ) {

				R0000E004 |=  (1 << 5); // I2S.SEL = 1
			}
			if( pDevice->m_nAnalogCrossbarAudioInputProperty == 1 ) {

				R0000E004 &= ~(1 << 5); // I2S.SEL = 0

				R0000E004 |=  (1 << 3); // CLK.SEL1 = HIGH, USE CLOCK FROM OSC
			}
		}
		if( pDevice->m_nAnalogCrossbarVideoInputProperty == 2 ||  // COMPONENT

			pDevice->m_nAnalogCrossbarVideoInputProperty == 3 ||  // DVI.ANALOG

			pDevice->m_nAnalogCrossbarVideoInputProperty == 5 ||  // COMPOSITE

			pDevice->m_nAnalogCrossbarVideoInputProperty == 6 ) { // SVIDEO

			R0000E004 &= ~(1 << 5); // I2S.SEL = 0

			R0000E004 |= (1 << 3); // CLK.SEL1 = HIGH, USE CLOCK FROM OSC
		}
		A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
	}

	BOOL is_main_chip = FALSE;

#ifdef SA7160_COPYPORTECT_ARCHITECTURE

	{	
//		A60D06861EDC409FA66867980ABA9748( pDevice, 1, 0x00700000 + 0x00000008, 0x0000000C ); // GPIO
		
		struct timeval ts; wrapper_do_gettimeofday( &ts );

		BYTE F12C7345F5F5944bd9BF6C72DBEF85387[ 4 ] = { ((ts.tv_usec / 1) % 0xFF), ((ts.tv_usec / 10) % 0xFF), ((ts.tv_usec / 100) % 0xFF), ((ts.tv_usec / 1000) % 0xFF) };

		BYTE F2F581730428B430cBF3FD8EC8D409BC0[ 4 ] = { 0x00, 0x00, 0x00, 0x00 };

		ULONGLONG delay = 125; // 100NS

		SA7160_F8B7FB94CF24D4152842C9743714CDAA9( pDevice, delay ); SA7160_F1FF06F06D32B4c0aB2C20D3FB71281B5( pDevice, 0xA2, delay ); SA7160_F1FF06F06D32B4c0aB2C20D3FB71281B5( pDevice, 0x13, delay ); SA7160_F1FF06F06D32B4c0aB2C20D3FB71281B5( pDevice, F12C7345F5F5944bd9BF6C72DBEF85387[ 0 ], delay ); SA7160_F1FF06F06D32B4c0aB2C20D3FB71281B5( pDevice, F12C7345F5F5944bd9BF6C72DBEF85387[ 1 ], delay ); SA7160_F1FF06F06D32B4c0aB2C20D3FB71281B5( pDevice, F12C7345F5F5944bd9BF6C72DBEF85387[ 2 ], delay ); SA7160_F1FF06F06D32B4c0aB2C20D3FB71281B5( pDevice, F12C7345F5F5944bd9BF6C72DBEF85387[ 3 ], delay ); SA7160_F1C002401C7AE4334A36AC1B1E338AD75( pDevice, delay ); 

		wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies( 100 ) );

		SA7160_F8B7FB94CF24D4152842C9743714CDAA9( pDevice, delay ); SA7160_F1FF06F06D32B4c0aB2C20D3FB71281B5( pDevice, 0xA3, delay ); F2F581730428B430cBF3FD8EC8D409BC0[ 0 ] = SA7160_F6E9556EF6B7D45fbB367C7EF7BF65BFB( pDevice, 0, delay ); F2F581730428B430cBF3FD8EC8D409BC0[ 1 ] = SA7160_F6E9556EF6B7D45fbB367C7EF7BF65BFB( pDevice, 0, delay ); F2F581730428B430cBF3FD8EC8D409BC0[ 2 ] = SA7160_F6E9556EF6B7D45fbB367C7EF7BF65BFB( pDevice, 0, delay ); F2F581730428B430cBF3FD8EC8D409BC0[ 3 ] = SA7160_F6E9556EF6B7D45fbB367C7EF7BF65BFB( pDevice, 0, delay ); SA7160_F1C002401C7AE4334A36AC1B1E338AD75( pDevice, delay ); 

		F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "【CODE = %08X | KEY = %08X】\n", *((DWORD *)(F12C7345F5F5944bd9BF6C72DBEF85387)), *((DWORD *)(F2F581730428B430cBF3FD8EC8D409BC0)) );

		if( (*((DWORD *)(F2F581730428B430cBF3FD8EC8D409BC0)) != 0x00000000) && (*((DWORD *)(F2F581730428B430cBF3FD8EC8D409BC0)) != 0xFFFFFFFF) ) {

			FD0AC55FE0C0B45a788FEC199C5758F1E[ pDevice->FF362AA37F7D046bf90568AC1600626D9 ] = 1;

			F6053D464C87D41c1B8CBE8A39FCDF2D2[ pDevice->FF362AA37F7D046bf90568AC1600626D9 ] = 1;

		}
	}

#endif
	//
	// 
	if( pDevice->iManufacturer == 0x1C ) { // SC520Q4
		/*
		ULONG R = pDevice->m_nCustomGpioDirectionProperty & 0xFFFF;
		
		R = ~R; // INPUT PIN IS ALWAYS HIGH

		R |= pDevice->m_nCustomGpioDataProperty & 0xFFFF;

		BYTE TXL[ 2 ] = { 0x40, (BYTE)(R >> 0) }; C1927E78C828471394AE300589EB1258( pDevice, 0, TXL, 2 );

		BYTE TXH[ 2 ] = { 0x42, (BYTE)(R >> 8) }; C1927E78C828471394AE300589EB1258( pDevice, 0, TXH, 2 );

		F6B9E557A4BA24ffd926B820B836289C8_100NS( 1250000 );

		KeInitializeTimer( &pDevice->m_hCustomTimer );

		KeInitializeDpc( &pDevice->m_hCustomTimerDPC, (PKDEFERRED_ROUTINE)(SA7160_ON_TIME_F6B9E557A4BA24ffd926B820B836289C8), pDevice );
		*/
	}
	else {

		if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) || // EURESYS.SC510N1.1ST
				
			(pDevice->iManufacturer == 0x10) ) { // SC510N1.1ST
			/*
			FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x11, (BYTE)((~(pDevice->m_nCustomGpioDirectionProperty >> 0)) & 0xFF) );

			FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x01, (BYTE)((pDevice->m_nCustomGpioDataProperty >> 0) & 0xFF) );

			{	BYTE R = (BYTE)((pDevice->m_nCustomGpioDirectionProperty & 0x0000FF00) >> 8); 

				R = ~R; // INPUT PIN IS ALWAYS HIGH

				R |= (BYTE)((pDevice->m_nCustomGpioDataProperty & 0x0000FF00) >> 8);

				BYTE TX[ 2 ] = { 0x40, R };
				
				C1927E78C828471394AE300589EB1258( pDevice, 1, TX, 2 );
			}
			if( is_main_chip ) {

				pDevice->m_nCustomGpioSupportProperty = 16;
			}
			*/
		}
		else if( (pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
				
				 (pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST

				 (pDevice->iManufacturer == 0x12) ||  // SC510N1.SDI.1ST

				 (pDevice->iManufacturer == 0x14) ||  // SC510N1.SDI.1ST

				 (pDevice->iManufacturer == 0x16) ||  // SC512N1.DVI.1ST

				 (pDevice->iManufacturer == 0x17) ||  // SC512N1.DVI.1ST

				 (pDevice->iManufacturer == 0x18) ||  // SC510N1.HDMI.ITE6603.1ST
			
				 (pDevice->iManufacturer == 0x1A) ||  // SC510N4.HDMI.ITE6603
			
				 (pDevice->iManufacturer == 0x1B) ) { // SC510N4.SDI

			BOOLEAN returns = TRUE;
				
			returns = FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x11, (BYTE)((~(pDevice->m_nCustomGpioDirectionProperty >> 0)) & 0xFF) );

			returns = FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x01, (BYTE)((pDevice->m_nCustomGpioDataProperty >> 0) & 0xFF) );

			if( returns ) {
				
				pDevice->m_nCustomGpioSupportProperty = 8;
			}
		}
		else {

			FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x10, (BYTE)((~(pDevice->m_nCustomGpioDirectionProperty >> 0)) & 0xFF) );

			FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x11, (BYTE)((~(pDevice->m_nCustomGpioDirectionProperty >> 8)) & 0xFF) );

			FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x00, (BYTE)((pDevice->m_nCustomGpioDataProperty >> 0) & 0xFF) );

			FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x01, (BYTE)((pDevice->m_nCustomGpioDataProperty >> 8) & 0xFF) );

			if( is_main_chip ) {

				pDevice->m_nCustomGpioSupportProperty = 16;
			}
		}
	}

	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] m_nCustomGpioSupportProperty(0d%d)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pDevice->m_nCustomGpioSupportProperty);

	//create 100% YCbCr colorbar pattern
	
	if(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE == 0)
	{
		/*
		BYTE* color_array = COLOR_BAR_720;

		for(i = 0; i < 4; i ++)
		{
			int index = 0;
			int color_segment = sizeof(COLOR_BAR_720)/8;
			
			if( i == 0)
			{
				color_segment = sizeof(COLOR_BAR_720)/8;
				color_array = COLOR_BAR_720;
			}
			else if ( i == 1 )
			{
				color_segment = sizeof(COLOR_BAR_1280)/8;
				color_array = COLOR_BAR_1280;
			}
			else if( i == 2)
			{
				color_segment = sizeof(COLOR_BAR_1920)/8;
				color_array = COLOR_BAR_1920;
			}
			else
			{
				color_segment = sizeof(COLOR_BAR_3840)/8;
				color_array = COLOR_BAR_3840;
			}


			
			//white
			for( index = 0 ; index < color_segment; index++ )
			{
				if( (index % 4 == 0) || (index % 4 == 2) )
				{
					*(color_array + index) = 235;
				}
				if( index % 4 == 1 )
				{
					*(color_array + index) = 128;
				}

				if( index % 4 == 3)
				{
					*(color_array + index) = 128;
				}
			}
			//yellow
			for( index = color_segment ; index < color_segment * 2; index++ )
			{
				if( (index % 4 == 0) || (index % 4 == 2) )
				{
					*(color_array + index) = 210;
				}
				if( index % 4 == 1 )
				{
					*(color_array + index) = 16;
				}

				if( index % 4 == 3)
				{
					*(color_array + index) = 146;
				}
			}
			//cyan
			for( index = color_segment*2 ; index < color_segment * 3; index++ )
			{
				if( (index % 4 == 0) || (index % 4 == 2) )
				{
					*(color_array + index) = 170;
				}
				if( index % 4 == 1 )
				{
					*(color_array + index) = 166;
				}

				if( index % 4 == 3)
				{
					*(color_array + index) = 16;
				}
			}
			//green
			for( index = color_segment*3 ; index < color_segment * 4; index++ )
			{
				if( (index % 4 == 0) || (index % 4 == 2) )
				{
					*(color_array + index) = 145;
				}
				if( index % 4 == 1 )
				{
					*(color_array + index) = 54;
				}

				if( index % 4 == 3)
				{
					*(color_array + index) = 34;
				}
			}
			//magenta
			for( index = color_segment*4 ; index < color_segment * 5; index++ )
			{
				if( (index % 4 == 0) || (index % 4 == 2) )
				{
					*(color_array + index) = 107;
				}
				if( index % 4 == 1 )
				{
					*(color_array + index) = 202;
				}

				if( index % 4 == 3)
				{
					*(color_array + index) = 221;
				}
			}
			//red
			for( index = color_segment*5 ; index < color_segment * 6; index++ )
			{
				if( (index % 4 == 0) || (index % 4 == 2) )
				{
					*(color_array + index) = 82;
				}
				if( index % 4 == 1 )
				{
					*(color_array + index) = 90;
				}

				if( index % 4 == 3)
				{
					*(color_array + index) = 240;
				}
			}
			//blue
			for( index = color_segment*6 ; index < color_segment * 7; index++ )
			{
				if( (index % 4 == 0) || (index % 4 == 2) )
				{
					*(color_array + index) = 41;
				}
				if( index % 4 == 1 )
				{
					*(color_array + index) = 240;
				}

				if( index % 4 == 3)
				{
					*(color_array + index) = 110;
				}
			}
			//black
			for( index = color_segment*7 ; index < color_segment * 8; index++ )
			{
				if( (index % 4 == 0) || (index % 4 == 2) )
				{
					*(color_array + index) = 16;
				}
				if( index % 4 == 1 )
				{
					*(color_array + index) = 128;
				}

				if( index % 4 == 3)
				{
					*(color_array + index) = 128;
				}
			}
		}
		*/

		//create white line
		BYTE* color_array = WHITE_LINE_3840;

		for(i = 0; i < 3840 * 2; i++)
		{
			if( (i % 4 == 0) || (i % 4 == 2) )
			{
				*(color_array + i) = 235;
			}
			if( i % 4 == 1 )
			{
				*(color_array + i) = 128;
			}

			if( i % 4 == 3)
			{
				*(color_array + i) = 128;
			}
		}

		//create yellow line
		color_array = YELLOW_LINE_3840;

		for(i = 0; i < 3840 * 2; i++)
		{
			if( (i % 4 == 0) || (i % 4 == 2) )
			{
				*(color_array + i) = 210;
			}
			if( i % 4 == 1 )
			{
				*(color_array + i) = 16;
			}

			if( i % 4 == 3)
			{
				*(color_array + i) = 146;
			}
		}

		//create cyan line
		color_array = CYAN_LINE_3840;

		for(i = 0; i < 3840 * 2; i++)
		{
			if( (i % 4 == 0) || (i % 4 == 2) )
			{
				*(color_array + i) = 170;
			}
			if( i % 4 == 1 )
			{
				*(color_array + i) = 166;
			}

			if( i % 4 == 3)
			{
				*(color_array + i) = 16;
			}
		}

		//create green line
		color_array = GREEN_LINE_3840;

		for(i = 0; i < 3840 * 2; i++)
		{
			if( (i % 4 == 0) || (i % 4 == 2) )
			{
				*(color_array + i) = 145;
			}
			if( i % 4 == 1 )
			{
				*(color_array + i) = 54;
			}

			if( i % 4 == 3)
			{
				*(color_array + i) = 34;
			}
		}

		//create magenta line
		color_array = MAGENTA_LINE_3840;

		for(i = 0; i < 3840 * 2; i++)
		{
			if( (i % 4 == 0) || (i % 4 == 2) )
			{
				*(color_array + i) = 107;
			}
			if( i % 4 == 1 )
			{
				*(color_array + i) = 202;
			}

			if( i % 4 == 3)
			{
				*(color_array + i) = 221;
			}
		}

		//create red line
		color_array = RED_LINE_3840;

		for(i = 0; i < 3840 * 2; i++)
		{
			if( (i % 4 == 0) || (i % 4 == 2) )
			{
				*(color_array + i) = 82;
			}
			if( i % 4 == 1 )
			{
				*(color_array + i) = 90;
			}

			if( i % 4 == 3)
			{
				*(color_array + i) = 240;
			}
		}

		//create blue line
		color_array = BLUE_LINE_3840;

		for(i = 0; i < 3840 * 2; i++)
		{
			if( (i % 4 == 0) || (i % 4 == 2) )
			{
				*(color_array + i) = 41;
			}
			if( i % 4 == 1 )
			{
				*(color_array + i) = 240;
			}

			if( i % 4 == 3)
			{
				*(color_array + i) = 110;
			}
		}

		//create black line
		color_array = BLACK_LINE_3840;

		for(i = 0; i < 3840 * 2; i++)
		{
			if( (i % 4 == 0) || (i % 4 == 2) )
			{
				*(color_array + i) = 16;
			}
			if( i % 4 == 1 )
			{
				*(color_array + i) = 128;
			}

			if( i % 4 == 3)
			{
				*(color_array + i) = 128;
			}
		}


	}
	

	EB81DC0C97B1494483D7CA0ED36B5459( pDevice );

//	SA7160_START_THREAD();

	F5D69F1955AA4EBCAF770CF98A9B4992( pDevice );

	return SA7160_PowerDownPeripherals( pDevice );

ERROR_HARDWARE_INITIALIZE:

//	SA7160_START_THREAD();
	F5D69F1955AA4EBCAF770CF98A9B4992( pDevice );

	return FALSE;
}

BOOLEAN DA4990901F0C404EB66C1B0FC874B8DD( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice )
{
	ULONG i = 0 ;
	
	SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "%02d] DA4990901F0C404EB66C1B0FC874B8DD()\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );

//	SA7160_CLOSE_THREAD();
	B6B487882F964675B66617C7847B8BB5( pDevice );

	// CGU (CLOCK.SHOP) PROGRAMMING
	// 
	if( p_sys_cfg ) {

		for( i = 0 ; i < C_CGU_CLKS ; i++ ) {

			if( p_sys_cfg->n_boot_clock_divider[ i ] == 0x00000000 ) { continue ; }

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00013000 + 0x0218 + 0x04 * i, p_sys_cfg->n_boot_clock_divider[ i ] );
		}
	}
	g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE ] = NULL;
	
	FREE( pDevice->m_pCustomSystemConfigProperty );

	return TRUE;
}

BOOLEAN A8B3AE340FFB46118473A18E8F7E3675( BYTE* dest, BYTE* src_Y, BYTE* src_UV, int buffer_size, F301FA49098CE4d9eB95F22BBD388E837 * pVideo )
{
	//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "A8B3AE340FFB46118473A18E8F7E3675() buffer_size(0x%x)\n", buffer_size );

	int i = 0;

	int limit = min( buffer_size, 960 * 1080 * 2);

	if( dest && src_Y && src_UV )
	{
		if(pVideo->FA8153D6A19C2451d94BB0F52E68471F1 == V4L2_PIX_FMT_UYVY)
		{
			for(i = 0; i < limit; i++)//UYVY
			{
				*dest++ = *src_UV++;

				*dest++ = *src_Y++;
			}
		}
		else
		{
			for(i = 0; i < limit; i++)//YUYV
			{
				*dest++ = *src_Y++;
				
				*dest++ = *src_UV++;
			}
		}
	
	}
	else
	{
		return FALSE;
	}

	return TRUE;
}

BOOLEAN A8B3AE340FFB46118473A18E8F7E3675_4chip( BYTE* dest, BYTE* chip0, BYTE* chip1, BYTE* chip2, BYTE* chip3, int pixel, F301FA49098CE4d9eB95F22BBD388E837 * pVideo )
{
	//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "A8B3AE340FFB46118473A18E8F7E3675_4chip() pixel(0x%x)\n", pixel );

	int i = 0;

	int limit = min( pixel, 3840 * 2160);

	if( dest && chip0 && chip1 && chip2 && chip3 )
	{
		//Y1U1Y2V1Y3U2Y4V2

		//chip0 Y2 Y4
		//chip1 V1 V2
		//chip2 Y1 Y3
		//chip3 U1 U2
		
		if(pVideo->FA8153D6A19C2451d94BB0F52E68471F1 == V4L2_PIX_FMT_UYVY)
		{
			
			for(i = 0; i < limit / 2; i++)//UYVY
			{

				*dest++ = *chip3++;
				
				*dest++ = *chip2++;

				*dest++ = *chip1++;
				
				*dest++ = *chip0++;
			}
			
		}
		else
		{
			for(i = 0; i < limit / 2; i++)//YUYV
			{
				
				*dest++ = *chip2++;
				
				*dest++ = *chip3++;

				*dest++ = *chip0++;
				
				*dest++ = *chip1++;

				/*
				//CYGNUS
				*dest++ = *chip0++;
				
				*dest++ = *chip3++;

				*dest++ = *chip2++;
				
				*dest++ = *chip1++;
				*/
			}
		}
	
	}
	else
	{
		return FALSE;
	}

	return TRUE;
}
/*
BYTE getcolorbar(F42A18AF66EFF459eA332CA253FFF8A65 *pDevice, int cxe)
{
	int i =  pDevice->m_colorbar_pos % (cxe * 2);

	BYTE* po = COLOR_BAR_3840;

	pDevice->m_colorbar_pos++;

	if( cxe == 720 )
	{
		po = COLOR_BAR_720; 
	}

	if( cxe == 1280 )
	{
		po = COLOR_BAR_1280; 
	}

	if( cxe == 1920 )
	{
		po = COLOR_BAR_1920; 
	}

	if( cxe == 3840 )
	{
		po = COLOR_BAR_3840; 
	}

	if(pDevice->m_No_Signal_black_pattern_property)
	{
		po = BLACK_LINE_3840; 
	}

	return *(po + i);
}
*/

BYTE getpo(F42A18AF66EFF459eA332CA253FFF8A65 *pDevice, int dst_width, int src_width, BYTE* po)
{
	if( (pDevice->m_buf_pos++ % (dst_width * 2)) < (src_width * 2))//video
	{
		return *( po + pDevice->m_src_pos++);
	}
	else//blank
	{
		return 0x00;
	}
}

struct timeval previous_ts[16];

BOOLEAN AF6D1A686DC84B949B3B1770AC209112( F42A18AF66EFF459eA332CA253FFF8A65 *pDevice, ULONG status, ULONG mask, F301FA49098CE4d9eB95F22BBD388E837* pVideos[ F91863BEB45D34624A724F2D29823D9E3 ][ MAX_DEVICE_OPEN_NUM ], F170997530C6943659ECE8DEC21301F66* pVideoBuffers[ F91863BEB45D34624A724F2D29823D9E3 ][ MAX_DEVICE_OPEN_NUM ], BOOLEAN p_FDFC345768E394d138EA574DEB55B7949s[ F91863BEB45D34624A724F2D29823D9E3 ][ MAX_DEVICE_OPEN_NUM ], BOOLEAN F6E2E659AAB8C4494A193C313276DAA65[ F91863BEB45D34624A724F2D29823D9E3 ][ MAX_DEVICE_OPEN_NUM ] )
{

	//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] AF6D1A686DC84B949B3B1770AC209112() status(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, status );

	if( status == 0xFFFFFFFF )
	{
		int k = 0;
		for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
		{
			if( pVideos[ 0 ][ k ] && pVideoBuffers[ 0 ][ k ] )
			{
				#if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,24)
				{
					BYTE * po = WHITE_LINE_3840;

					//BYTE * pe = wrapper_videobuf_to_vmalloc( &pVideoBuffers[ 0 ]->F6A821C5E7AA043f999FB3C51DB94DD2B ); //NOTE: should use videobuf_queue_vmalloc_init, not videobuf_queue_sg_init

					struct videobuf_dmabuf * F9FF98D32C15242b8979B2F47C7F951BE = videobuf_to_dma( &pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B );

					struct scatterlist * F1A9C3A4F207F456cAFB0163C5F30C91D = (struct scatterlist *)(F9FF98D32C15242b8979B2F47C7F951BE->sglist);
			
					dma_addr_t F6F32B5439E4C42f095E08326DFA73107 = sg_dma_address( F1A9C3A4F207F456cAFB0163C5F30C91D );
			
					ULONG F2B6709824D504332834A012BCBE1945D = sg_dma_len( F1A9C3A4F207F456cAFB0163C5F30C91D );//4096

					ULONG count = 0;

					ULONG F08220F0B4E654ce48460AA8A5F049BFB = F9FF98D32C15242b8979B2F47C7F951BE->sglen; // (FF7E121E5F6A1461dA967001C1404EB52/F2B6709824D504332834A012BCBE1945D) + 1

					ULONG FF7E121E5F6A1461dA967001C1404EB52 = pVideos[ 0 ][ k ]->FD1832F8D382F4e91914C0048CC5A9DD8 * pVideos[ 0 ][ k ]->F5B8891B732954fc2B26B7BFFCB15B596 * 2;

					if( FF7E121E5F6A1461dA967001C1404EB52 <= 0 || F2B6709824D504332834A012BCBE1945D == 0 || F08220F0B4E654ce48460AA8A5F049BFB == 0)
					{
						F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] = TRUE;
	
						return TRUE;
					}

					BYTE* pe = (BYTE*)phys_to_virt(F6F32B5439E4C42f095E08326DFA73107);

					if( pe == NULL ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] can not allocate pe()\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE ); return TRUE; }

					if( pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.state != VIDEOBUF_QUEUED ) { F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] pe state error(%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.state ); continue; }

					// COPY VIDEO FRAME TO VIDEO BUFFER 
					//

					if( pe && po ) 
					{

						ULONG cxe = pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.width;

						ULONG cye = pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.height;

						if( (cxe * cye * 2) <= pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size )
						{
							/*
							int line = 0;
							for( line = 0; line < cye; line++ )
							{
							
								if( (pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 != 0) && (pVideoBuffers[ 0 ]->F6A821C5E7AA043f999FB3C51DB94DD2B.state == VIDEOBUF_QUEUED) )
								{
									if(pDevice->m_No_Signal_black_pattern_property)
									{
										po = BLACK_LINE_3840; 
									}

									memcpy( pe + line * cxe * 2, po, cxe * 2 ); 
								}
							
							}
							*/
							//int i = 0;

							//pDevice->m_colorbar_pos = 0;//reset colorbar pattern
	
							while( FF7E121E5F6A1461dA967001C1404EB52 ) {

								if( FF7E121E5F6A1461dA967001C1404EB52 < 4096 ) {

									memcpy(pe, BLACK_LINE_3840, FF7E121E5F6A1461dA967001C1404EB52);

									FF7E121E5F6A1461dA967001C1404EB52 = 0;

									break;
								}
								else {

									/*
									for(i = 0; i < F2B6709824D504332834A012BCBE1945D; i++)
									{
										*pe++ = getcolorbar(pDevice, cxe);
									}
									*/
									if(pDevice->m_No_Signal_black_pattern_property)
									{
										memcpy(pe, BLACK_LINE_3840, F2B6709824D504332834A012BCBE1945D);
									}
									else
									{
										if( FF7E121E5F6A1461dA967001C1404EB52 > (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size * 7 >> 3) )
										{
											memcpy(pe, WHITE_LINE_3840, F2B6709824D504332834A012BCBE1945D);
										}
										else if( FF7E121E5F6A1461dA967001C1404EB52 > (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size * 6 >> 3) )
										{
											memcpy(pe, YELLOW_LINE_3840, F2B6709824D504332834A012BCBE1945D);
										}
										else if( FF7E121E5F6A1461dA967001C1404EB52 > (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size * 5 >> 3) )
										{
											memcpy(pe, CYAN_LINE_3840, F2B6709824D504332834A012BCBE1945D);
										}
										else if( FF7E121E5F6A1461dA967001C1404EB52 > (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size * 4 >> 3) )
										{
											memcpy(pe, GREEN_LINE_3840, F2B6709824D504332834A012BCBE1945D);
										}
										else if( FF7E121E5F6A1461dA967001C1404EB52 > (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size * 3 >> 3) )
										{
											memcpy(pe, MAGENTA_LINE_3840, F2B6709824D504332834A012BCBE1945D);
										}
										else if( FF7E121E5F6A1461dA967001C1404EB52 > (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size * 2 >> 3) )
										{
											memcpy(pe, RED_LINE_3840, F2B6709824D504332834A012BCBE1945D);
										}
										else if( FF7E121E5F6A1461dA967001C1404EB52 > (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size * 1 >> 3) )
										{
											memcpy(pe, BLUE_LINE_3840, F2B6709824D504332834A012BCBE1945D);
										}
										else
										{
											memcpy(pe, BLACK_LINE_3840, F2B6709824D504332834A012BCBE1945D);
										}
									}

									FF7E121E5F6A1461dA967001C1404EB52 -= F2B6709824D504332834A012BCBE1945D;

									F1A9C3A4F207F456cAFB0163C5F30C91D++;

									count++;

									if( count < F08220F0B4E654ce48460AA8A5F049BFB ) {

										pe = sg_dma_address( F1A9C3A4F207F456cAFB0163C5F30C91D );

										pe = (BYTE*)phys_to_virt(pe);

										F2B6709824D504332834A012BCBE1945D = sg_dma_len( F1A9C3A4F207F456cAFB0163C5F30C91D );
									}
									else {
										break; 
									}
								}
							}// end of while
						
						}
						else
						{
							//should not go here
							if( (pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 != 0) && (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.state == VIDEOBUF_QUEUED) )
							{
								//memset(pe, 0x00, pVideoBuffers[ 0 ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size);
							}
						}
					}
				}
				#endif

				F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] = FALSE;

				p_FDFC345768E394d138EA574DEB55B7949s[ 0 ][ k ] = TRUE;

				pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.input = 0xFFFFFFFF; //
			}
		}//end of for
		
		return TRUE;
	}//end of if
	
	pDevice->F03D1DD650AC64c28B04687338F970D0E[ 0 ]++;

	LONG i_major = 0;

	if( status & 0x0000000000000001 ) {

		//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] status & 0x0000001\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );
		int k = 0;//device opened serial number

		SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

		//in case DMA occured while signal thread is not proceeded yet
		if( (p_sys_cfg->n_input_video_resolution_cx == 0) || (p_sys_cfg->n_input_video_resolution_cy == 0) )
		{
			for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
			{
				F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] = TRUE;
			}

			return TRUE;
		}


		ULONG R00008000 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00008000 + 0x00000000 ); // BAM.DMA.BUF.MODE

		//ULONG R00000FE0 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000FE0 ); // VIP.INT.STATUS
		
		ULONG R00000FE0 = mask; // from ISR

		//prepare for next interrupt, otherwise first a few bytes wil be lost
		ULONG i = (R00008000 & 0x00000038) >> 3; i = ( i + 1 ) % 8;

		if( (p_sys_cfg->n_input_video_resolution_cx ==  720 && p_sys_cfg->n_input_video_resolution_cy == 240) ||

			(p_sys_cfg->n_input_video_resolution_cx ==  720 && p_sys_cfg->n_input_video_resolution_cy == 288) ||

			(p_sys_cfg->n_input_video_resolution_cx ==  640 && p_sys_cfg->n_input_video_resolution_cy == 240) ||
			(p_sys_cfg->n_input_video_resolution_cx ==  640 && p_sys_cfg->n_input_video_resolution_cy == 288) ||

			(p_sys_cfg->n_input_video_resolution_cx ==  768 && p_sys_cfg->n_input_video_resolution_cy == 288) ||
			
			(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy == 540) ||
			
			(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 540) ) {

			if( R00000FE0 & 0x40000000 ) { // INTERLEAVED

				i_major = (R00008000 & 0x00000038) >> 3;
			}
			else {

				i_major = i;
			}
		}
		else {

			i_major = i;
		}

		ULONGLONG F6F32B5439E4C42f095E08326DFA73107_dummy = pDevice->FA81F93DB0A8D49bdBC3753334A5D581D[ 0 ];

		UINT * pe = (UINT *)(pDevice->F41F19BDAA144449fA254B8E3282D1425[ 0 ] + 4096 * 2 * i);

		F6F32B5439E4C42f095E08326DFA73107_dummy += 4096 * 2 * 8;

		ULONG F02B309C176EE43069FA75F18FD5EBA3E = 0;

		ULONG pages = 0;

		if( (p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy == 240) ||

			(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy == 288) ) {
		
			F02B309C176EE43069FA75F18FD5EBA3E = p_sys_cfg->n_input_video_resolution_cx >> 1;
		}
		else{

			F02B309C176EE43069FA75F18FD5EBA3E = p_sys_cfg->n_input_video_resolution_cx;
		}

		#ifdef ENABLE_1920X1080PX60FPS

		if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) ||
		
			(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) ||
		
			(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) ||

			(pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||
			
			(pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 8) ||

			(pDevice->iManufacturer == 0x10) ||

			(pDevice->iManufacturer == 0x12) ||

			(pDevice->iManufacturer == 0x13) ||

			(pDevice->iManufacturer == 0x14) ||

			(pDevice->iManufacturer == 0x16) ||

			(pDevice->iManufacturer == 0x17) ||

			(pDevice->iManufacturer == 0x18) ||
		
		   ((pDevice->iManufacturer & 0xF0) == 0x00 &&
		   
			(pDevice->iProduct & 0x0F) == 0x05) )
		{

				if( (p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  768 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  800 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps ==  75) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps ==  75) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1400 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps ==  75) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1680 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps ==  61) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps ==  60) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps ==  50) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1600 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
					
					(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

					(p_sys_cfg->n_input_video_resolution_cx == 3840 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
					
					(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
					
					(p_sys_cfg->n_input_video_resolution_cx == 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

					(p_sys_cfg->n_input_video_resolution_cx == 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

					(p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

					(p_sys_cfg->n_input_video_resolution_h_total > 0 && 
						
					 p_sys_cfg->b_input_video_resolution_spliter_mode == TRUE) ) {

					if( p_sys_cfg->n_input_video_resolution_cy == 1200 ) {

						F02B309C176EE43069FA75F18FD5EBA3E /= 1;	
					}
					else {
						
						F02B309C176EE43069FA75F18FD5EBA3E /= 2;	
					}
				}

		}
		#endif

		ULONG FF7E121E5F6A1461dA967001C1404EB52 = 0;
		
		for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
		{
			if(pVideoBuffers[ 0 ][ k ])
			{
				FF7E121E5F6A1461dA967001C1404EB52 = pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size;

				break; //assume every pVideoBuffers with same size
			}
		}

		if( FF7E121E5F6A1461dA967001C1404EB52 <= 0 )
		{
			for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
			{
				F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] = TRUE;
			}
	
			return TRUE;
		}

		ULONG j = ( p_sys_cfg->C4E7BABA3C164ABA99E460C0B8165385 ) % SA7160_MAX_BUFFER;

		for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
		{
			if(pVideoBuffers[ 0 ][ k ])
			{
				pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.input = j;
			}
		}

		dma_addr_t F6F32B5439E4C42f095E08326DFA73107 = pDevice->m_SA7160_video_buffer_F6F32B5439E4C42f095E08326DFA73107[ j ];
			
		ULONG F2B6709824D504332834A012BCBE1945D = 4096;

		ULONG F08220F0B4E654ce48460AA8A5F049BFB = (FF7E121E5F6A1461dA967001C1404EB52 / 4096 ) + 1; 

//		if( j == 0 ) { offset = F6F32B5439E4C42f095E08326DFA73107 & 0x00000FFF; }
		
		while( FF7E121E5F6A1461dA967001C1404EB52 > 0 ) {

//sizeof(ULONG) FC15_X64 is 4, FC14_X64, FC16_X64 is 8

			*pe++ = (UINT)((F6F32B5439E4C42f095E08326DFA73107 >>  0) & 0xFFFFF000);

			//*pe++ = (UINT)(F6F32B5439E4C42f095E08326DFA73107 >>  32);
			*pe++ = 0;
					
			//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%d]F6F32B5439E4C42f095E08326DFA73107(0x%x)\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), F6F32B5439E4C42f095E08326DFA73107 );
			//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%d]F6F32B5439E4C42f095E08326DFA73107 >> 32 (0x%x)\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), F6F32B5439E4C42f095E08326DFA73107 >> 32 );

			pages++;

			if( pages >= 1024 ) { goto LOOP_END_LINES; }

			FF7E121E5F6A1461dA967001C1404EB52 -= F2B6709824D504332834A012BCBE1945D;

			if( pages < F08220F0B4E654ce48460AA8A5F049BFB ) {

				F6F32B5439E4C42f095E08326DFA73107 += 4096;

				F2B6709824D504332834A012BCBE1945D = 4096;

			}
			else {

				//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "all F08220F0B4E654ce48460AA8A5F049BFB run out \n" );

				F6F32B5439E4C42f095E08326DFA73107 = 0;

				F2B6709824D504332834A012BCBE1945D = 0;

				goto LOOP_END_LINES;
			}

		}//end of while

LOOP_END_LINES:

		for( ; pages < 1024 ; pages++ ) {

			*pe++ = (UINT) (F6F32B5439E4C42f095E08326DFA73107_dummy);

			*pe++ = 0;

		}
		if( (p_sys_cfg->n_input_video_resolution_cx ==  720 && p_sys_cfg->n_input_video_resolution_cy == 240) ||

			(p_sys_cfg->n_input_video_resolution_cx ==  720 && p_sys_cfg->n_input_video_resolution_cy == 288) ||

			(p_sys_cfg->n_input_video_resolution_cx ==  640 && p_sys_cfg->n_input_video_resolution_cy == 240) ||
			(p_sys_cfg->n_input_video_resolution_cx ==  640 && p_sys_cfg->n_input_video_resolution_cy == 288) ||

			(p_sys_cfg->n_input_video_resolution_cx ==  768 && p_sys_cfg->n_input_video_resolution_cy == 288) ||
			
			(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy == 540) ) {

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0344, F02B309C176EE43069FA75F18FD5EBA3E * 4 );

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0354, F02B309C176EE43069FA75F18FD5EBA3E * 2 );

			for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
			{
				if(pVideos[ 0 ][ k ] && pVideoBuffers[ 0 ][ k ])
				{
					if( R00000FE0 & 0x40000000 ) { // INTERLEAVED

						if( pVideos[ 0 ][ k ]->F8C5A9629DDA74022A5888D194EA3D926 == 0x80000000 ) {

							F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] = FALSE;

							p_FDFC345768E394d138EA574DEB55B7949s[ 0 ][ k ] = TRUE;
	
						}
						pVideos[ 0 ][ k ]->F8C5A9629DDA74022A5888D194EA3D926 = 0x00000000;

					}
					else {

						pVideos[ 0 ][ k ]->F8C5A9629DDA74022A5888D194EA3D926 = 0x80000000;
					}
				}
			}
		}
		else if (p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 540) 
		{

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0344, F02B309C176EE43069FA75F18FD5EBA3E * 4 );

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0354, F02B309C176EE43069FA75F18FD5EBA3E * 2 );
		
			//if( R00000FE0 & 0x40000000 ) { // INTERLEAVED

			if( (R00000FE0 & 0x40000000) && ( ((R00000FE0 & 0x3FF0000) >> 16) > 0x21a) ) { // INTERLEAVED

				struct timeval now_ts;
						
				wrapper_do_gettimeofday( &now_ts );

				ULONG diff = 0;
				
				if( now_ts.tv_sec == pDevice->A999292E148D40E58CCA15DC366CF956.tv_sec)
				{
					diff = now_ts.tv_usec - pDevice->A999292E148D40E58CCA15DC366CF956.tv_usec;
				}
				else
				{
					diff = (now_ts.tv_sec - pDevice->A999292E148D40E58CCA15DC366CF956.tv_sec) * 1000000  + now_ts.tv_usec - pDevice->A999292E148D40E58CCA15DC366CF956.tv_usec;
				}
			
				pDevice->A999292E148D40E58CCA15DC366CF956.tv_sec = now_ts.tv_sec;

				pDevice->A999292E148D40E58CCA15DC366CF956.tv_usec = now_ts.tv_usec;

				if( diff > 12000 )
				{
					for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
					{
						if(pVideos[ 0 ][ k ] && pVideoBuffers[ 0 ][ k ])
						{
							if( pVideos[ 0 ][ k ]->F8C5A9629DDA74022A5888D194EA3D926 == 0x80000000 ) {

								F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] = FALSE;

								p_FDFC345768E394d138EA574DEB55B7949s[ 0 ][ k ] = TRUE;
							}

							pVideos[ 0 ][ k ]->F8C5A9629DDA74022A5888D194EA3D926 = 0x00000000;
						}

						//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] 1080I, k(%d) pVideos(0x%x) pVideoBuffers(0x%x) p_FDFC345768E394d138EA574DEB55B7949s(0x%x) F6E2E659AAB8C4494A193C313276DAA65(0x%x)\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), k, pVideos[ 0 ][ k ], pVideoBuffers[ 0 ][ k ], p_FDFC345768E394d138EA574DEB55B7949s[ 0 ][ k ], F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] );

					}
					pDevice->FE995CA4291A4F109AAE766EB116EB25 = 0; //reset
				}

			}
			else {

				for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
				{
					if(pVideos[ 0 ][ k ] && pVideoBuffers[ 0 ][ k ])
					{
						pVideos[ 0 ][ k ]->F8C5A9629DDA74022A5888D194EA3D926 = 0x80000000;
					}
					//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] 1080I, k(%d) pVideos(0x%x) pVideoBuffers(0x%x) p_FDFC345768E394d138EA574DEB55B7949s(0x%x) F6E2E659AAB8C4494A193C313276DAA65(0x%x)---\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), k, pVideos[ 0 ][ k ], pVideoBuffers[ 0 ][ k ], p_FDFC345768E394d138EA574DEB55B7949s[ 0 ][ k ], F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] );
				}

				#ifdef DMA_ERROR_1080i 

				pDevice->FE995CA4291A4F109AAE766EB116EB25++;

				struct timeval now_ts;
						
				wrapper_do_gettimeofday( &now_ts );

				ULONG diff = 0;
				
				if( now_ts.tv_sec == pDevice->A999292E148D40E58CCA15DC366CF956.tv_sec)
				{
					diff = now_ts.tv_usec - pDevice->A999292E148D40E58CCA15DC366CF956.tv_usec;
				}
				else
				{
					diff = (now_ts.tv_sec - pDevice->A999292E148D40E58CCA15DC366CF956.tv_sec) * 1000000  + now_ts.tv_usec - pDevice->A999292E148D40E58CCA15DC366CF956.tv_usec;
				}

				pDevice->A999292E148D40E58CCA15DC366CF956.tv_sec = now_ts.tv_sec;

				pDevice->A999292E148D40E58CCA15DC366CF956.tv_usec = now_ts.tv_usec;


				if( (diff > 12000) && (diff < 28000) )
				{
					if( (pDevice->FE995CA4291A4F109AAE766EB116EB25 % 2 ) == 0 )//only previous filed is odd
					{
						for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
						{
							if(pVideos[ 0 ][ k ] && pVideoBuffers[ 0 ][ k ])
							{
								F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] = FALSE;

								p_FDFC345768E394d138EA574DEB55B7949s[ 0 ][ k ] = TRUE;
		
								pVideos[ 0 ][ k ]->F8C5A9629DDA74022A5888D194EA3D926 = 0x00000000;
							}
						}
						F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] fix interlace\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );
					}
				}
				#endif

			}
		}
		else { // PROGRESSIVE

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0344, F02B309C176EE43069FA75F18FD5EBA3E * 2 );

			A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x0354, F02B309C176EE43069FA75F18FD5EBA3E * 0 );

			for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
			{
				if(pVideos[ 0 ][ k ] && pVideoBuffers[ 0 ][ k ])
				{
					F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] = FALSE;

					p_FDFC345768E394d138EA574DEB55B7949s[ 0 ][ k ] = TRUE;
				}
			}

		}

//		A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0004 + 0x04 * (i), offset );

#ifdef ENABLE_1920X1080PX60FPS

		// -----> tmStreamPort::tmIOnInterrupt() -----> tmHWStreamPort_VIP_Video::tmIGetCurrentWritePosition()
		//
		if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) ||
		
			(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) ||
				
			(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) ||
				 
			(pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||
		
			(pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 8) ||

			(pDevice->iManufacturer == 0x10) ||
		
			(pDevice->iManufacturer == 0x12) ||
		
			(pDevice->iManufacturer == 0x13) ||
		
			(pDevice->iManufacturer == 0x14) ||
		
			(pDevice->iManufacturer == 0x16) ||
		
			(pDevice->iManufacturer == 0x17) ||

			(pDevice->iManufacturer == 0x18) ) {

			SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

			if( (p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  768 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  800 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps ==  75) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps ==  75) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1400 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps ==  75) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1680 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps ==  61) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps ==  60) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps ==  50) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1600 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

				(p_sys_cfg->n_input_video_resolution_cx == 3840 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

				(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

				(p_sys_cfg->n_input_video_resolution_cx >= 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

				(p_sys_cfg->n_input_video_resolution_cx >= 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

				(p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
			
				(p_sys_cfg->n_input_video_resolution_h_total > 0 && 
			
				 p_sys_cfg->b_input_video_resolution_spliter_mode == TRUE) ) {

				ULONG nums = 1;

				if( (p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
				
					(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
				
					(p_sys_cfg->n_input_video_resolution_cx >= 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
				
					(p_sys_cfg->n_input_video_resolution_cx >= 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

					(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120) ) {

					nums = 3;
				}
				else {

					nums = 1;
				}

	//			SA7160_POLLING_F6B9E557A4BA24ffd926B820B836289C8_100NS( pDevice, 5000 ); // 500US	
			
				ULONG n = 0;
				for( n = 0 ; n < nums ; n++ ) {

					F42A18AF66EFF459eA332CA253FFF8A65 * pBrotherDevice = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + n + 1 ];

					if( pBrotherDevice ) {

						if( status & 0x0000000000000001 ) {

							if( pBrotherDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 > 0 ) { break ; } // +SC510N4

							{	ULONG counts = 0;

								ULONG timeouts = (nums == 3) ? 200 : 20;

								ULONG R00000FE0 = 0x00000000;

								while( R00000FE0 == 0x00000000 &&
								
									   counts < timeouts ) {

									R00000FE0 = A77C4935F8134B048348571A43F2A9CA( pBrotherDevice, 0x00000000 + 0x00000FE0 ) & 0x00000001;

									counts++;

									udelay(1);
								}
							//	if( counts == timeouts ) { DbgPrint( "%d ---------------------------------------- timeout", n ); }
							}
						}
					}
				}

				for( n = 0 ; n < nums ; n++ ) {

					F42A18AF66EFF459eA332CA253FFF8A65 * pBrotherDevice = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + n + 1 ];

					if( pBrotherDevice ) {

						if( status & 0x0000000000000001 ) {

							if( pBrotherDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 > 0 ) { break ; } // +SC510N4

							ULONG R00008000 = A77C4935F8134B048348571A43F2A9CA( pBrotherDevice, 0x00008000 + 0x00000000 ); // BAM.DMA.BUF.MODE

							ULONG i = (R00008000 & 0x00000038) >> 3; i = (i + 1) % 8;

							dma_addr_t F6F32B5439E4C42f095E08326DFA73107_dummy = pBrotherDevice->m_SA7160_video_buffer_F6F32B5439E4C42f095E08326DFA73107[ j ];

							UINT * pe = (UINT *)(pBrotherDevice->F41F19BDAA144449fA254B8E3282D1425[ 0 ] + 4096 * 2 * i);

							F6F32B5439E4C42f095E08326DFA73107_dummy += 4096 * 2 * 8;

							ULONG F02B309C176EE43069FA75F18FD5EBA3E = 0;

							ULONG pages = 0;

							F02B309C176EE43069FA75F18FD5EBA3E = p_sys_cfg->n_input_video_resolution_cx;

							if( (p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy == 240) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy == 288) ) {
						
								F02B309C176EE43069FA75F18FD5EBA3E = p_sys_cfg->n_input_video_resolution_cx >> 2;
							}
							else{

								F02B309C176EE43069FA75F18FD5EBA3E = p_sys_cfg->n_input_video_resolution_cx / 2;
							}
							if( p_sys_cfg->n_input_video_resolution_cy == 1200 ) {

								F02B309C176EE43069FA75F18FD5EBA3E <<= 1;
							}
					
							ULONG FF7E121E5F6A1461dA967001C1404EB52 = 0; //= pVideoBuffers[ 0 ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size;//??

							for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
							{
								if( pVideoBuffers[ 0 ][ k ] )
								{
									FF7E121E5F6A1461dA967001C1404EB52 = pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size;

									break;
								}
							}
							if( FF7E121E5F6A1461dA967001C1404EB52 == 0 )
							{
								continue;
							}

							/*
							ULONG FF7E121E5F6A1461dA967001C1404EB52 = F02B309C176EE43069FA75F18FD5EBA3E * p_sys_cfg->n_input_video_resolution_cy * 2;

							if( p_sys_cfg->n_input_video_resolution_cy == 240 ||

								p_sys_cfg->n_input_video_resolution_cy == 288 ||

								p_sys_cfg->n_input_video_resolution_cy == 540 ) {

								FF7E121E5F6A1461dA967001C1404EB52 = F02B309C176EE43069FA75F18FD5EBA3E * p_sys_cfg->n_input_video_resolution_cy * 2 * 2;
							}
							else if( p_sys_cfg->n_input_video_resolution_cy == 2160 || p_sys_cfg->n_input_video_resolution_cy == 2100)
							{
								FF7E121E5F6A1461dA967001C1404EB52 = F02B309C176EE43069FA75F18FD5EBA3E * (p_sys_cfg->n_input_video_resolution_cy / 2)  * 2;
							}
							else {

								FF7E121E5F6A1461dA967001C1404EB52 = F02B309C176EE43069FA75F18FD5EBA3E * p_sys_cfg->n_input_video_resolution_cy * 2;
							}
							*/
							dma_addr_t F6F32B5439E4C42f095E08326DFA73107 = pBrotherDevice->m_SA7160_video_buffer_F6F32B5439E4C42f095E08326DFA73107[ j ];

							ULONG F2B6709824D504332834A012BCBE1945D = 4096;

							ULONG F08220F0B4E654ce48460AA8A5F049BFB = (FF7E121E5F6A1461dA967001C1404EB52 / 4096 ) + 1; 

							//if( j == 0 ) { offset = F6F32B5439E4C42f095E08326DFA73107.LowPart & 0x00000FFF; }

							while( FF7E121E5F6A1461dA967001C1404EB52 > 0 ) {

								*pe++ = (UINT)((F6F32B5439E4C42f095E08326DFA73107 >>  0) & 0xFFFFF000);

								*pe++ = 0;

								pages++;

								if( pages >= 1024 ) { goto LOOP_END_VIP_MAPPINGS_EX; }

								FF7E121E5F6A1461dA967001C1404EB52 -= F2B6709824D504332834A012BCBE1945D;

								if( pages < F08220F0B4E654ce48460AA8A5F049BFB ) {

									F6F32B5439E4C42f095E08326DFA73107 += 4096;

									F2B6709824D504332834A012BCBE1945D = 4096;

								}
								else {

									//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "all F08220F0B4E654ce48460AA8A5F049BFB run out \n" );

									F6F32B5439E4C42f095E08326DFA73107 = 0;

									F2B6709824D504332834A012BCBE1945D = 0;

									goto LOOP_END_VIP_MAPPINGS_EX;
								}
							}

	LOOP_END_VIP_MAPPINGS_EX:

							for( ; pages < 1024 ; pages++ ) {

							   *pe++ = (UINT) F6F32B5439E4C42f095E08326DFA73107_dummy;

							   *pe++ = 0;
							}
							if( (p_sys_cfg->n_input_video_resolution_cx ==  720 && p_sys_cfg->n_input_video_resolution_cy == 240) ||

								(p_sys_cfg->n_input_video_resolution_cx ==  720 && p_sys_cfg->n_input_video_resolution_cy == 288) ||

								(p_sys_cfg->n_input_video_resolution_cx ==  640 && p_sys_cfg->n_input_video_resolution_cy == 240) ||
								(p_sys_cfg->n_input_video_resolution_cx ==  640 && p_sys_cfg->n_input_video_resolution_cy == 288) ||

								(p_sys_cfg->n_input_video_resolution_cx ==  768 && p_sys_cfg->n_input_video_resolution_cy == 288) ||
						
								(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy == 540) ||
							
								(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 540) ) {

								A60D06861EDC409FA66867980ABA9748( pBrotherDevice, 0x00000000 + 0x0344, F02B309C176EE43069FA75F18FD5EBA3E * 4 );

								A60D06861EDC409FA66867980ABA9748( pBrotherDevice, 0x00000000 + 0x0354, F02B309C176EE43069FA75F18FD5EBA3E * 2 );
							}
							else {

								A60D06861EDC409FA66867980ABA9748( pBrotherDevice, 0x00000000 + 0x0344, F02B309C176EE43069FA75F18FD5EBA3E * 2 ); // PROGRESSIVE

								A60D06861EDC409FA66867980ABA9748( pBrotherDevice, 0x00000000 + 0x0354, F02B309C176EE43069FA75F18FD5EBA3E * 0 ); // PROGRESSIVE
							}
							//A60D06861EDC409FA66867980ABA9748( pBrotherDevice, 0x00008000 + 0x0004 + 0x04 * (i), offset );
						}//end of if status & 0x0000000000000001
					}//end of if( pBrotherDevice
				}//end of for
			}//end of if( (p_sys_cf
		}//end of if( (pDevice->iMan

#endif

		BOOLEAN	C4E7BABA3C164ABA99E460C0B8165385_not_modified = TRUE;

		for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
		{
			if(	p_FDFC345768E394d138EA574DEB55B7949s[ 0 ][ k ] == TRUE )
			{
				if( pVideoBuffers[ 0 ][ k ] == NULL )
				{
					if( (pDevice->iManufacturer == 0x19) ||

						(pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 0) ||  

						(pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 0) ||
					
						(pDevice->iManufacturer == 0x18 && SA7160_IS_4K2K_ENABLED( pDevice ) ) )
					{
						NULL;
					}
					else
					{
						//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] no pVideoBuffers[ 0 ], return\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );
					}

					F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] = TRUE;
	
					continue;
				}
			
				if( pVideos[ 0 ][ k ] == NULL )
				{
					F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] no pVideos[ 0 ][ %d ], return\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), k );

					continue;
				}
			
				//first 2 frames are error
				if(	pVideos[ 0 ][ k ]->m_video_preview_frame_number < 2)
				{
					F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] FirsttwoFrame, return\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );

					pVideos[ 0 ][ k ]->m_video_preview_frame_number++;

					F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] = TRUE;
	
					if( C4E7BABA3C164ABA99E460C0B8165385_not_modified )// do only once
					{
						p_sys_cfg->C4E7BABA3C164ABA99E460C0B8165385 =  (p_sys_cfg->C4E7BABA3C164ABA99E460C0B8165385 + 1) % SA7160_MAX_BUFFER;//??????????
	
						C4E7BABA3C164ABA99E460C0B8165385_not_modified = FALSE;
					}

					continue;
				}
			
	//skip frame here
				// CALCULATE OUTPUT FPS 
				//
				ULONGLONG n_video_encoder_frame_fps_mask = 0;
				ULONG n_video_encoder_frame_fps_mask_length = 0;

				n_video_encoder_frame_fps_mask = F35907A2DBBF411B9B7E50176EEA1202( pDevice, (pDevice->m_nCustomAnalogVideoAvgFrameRateProperty[ 0 ] & 0x77FFFFFF)/1000 );

				n_video_encoder_frame_fps_mask_length = pDevice->m_nCustomAnalogVideoFrameRateProperty;//real fps of signal

				if( pDevice->m_nCustomAnalogVideoInterleavedProperty == 1 )
				{
					n_video_encoder_frame_fps_mask_length /= 2;
				}

				ULONG is_skip = FALSE;
				ULONGLONG bit = 0;

				if(  ( pDevice->iManufacturer == 0x19 ) || (pDevice->iManufacturer == 0x18 && SA7160_IS_4K2K_ENABLED( pDevice ))  )
				{
					NULL;
				}
				else
				{
					if( n_video_encoder_frame_fps_mask_length <= ((pDevice->m_nCustomAnalogVideoAvgFrameRateProperty[ 0 ] & 0x77FFFFFF)/1000) )
					{
						is_skip = FALSE;
					}
					else
					{
					
						bit = (ULONG)(pVideos[ 0 ][ k ]->m_video_preview_frame_number ) % (n_video_encoder_frame_fps_mask_length);

						is_skip = ((( (ULONGLONG)1 << bit) & (n_video_encoder_frame_fps_mask)) == 0) ? TRUE : FALSE;
					}

					pVideos[ 0 ][ k ]->m_video_preview_frame_number++;

				}
			
				if( is_skip ) 
				{
					F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "skip frame, bit(%d)\n", bit );
				
					F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] = TRUE;
				
					if( C4E7BABA3C164ABA99E460C0B8165385_not_modified )// do only once
					{
						p_sys_cfg->C4E7BABA3C164ABA99E460C0B8165385 =  (p_sys_cfg->C4E7BABA3C164ABA99E460C0B8165385 + 1) % SA7160_MAX_BUFFER; //???????
	
						C4E7BABA3C164ABA99E460C0B8165385_not_modified = FALSE;
					}

				}
				else
				{
					BYTE * po = NULL;

					//BYTE * pe = wrapper_videobuf_to_vmalloc( &pVideoBuffers[ 0 ]->F6A821C5E7AA043f999FB3C51DB94DD2B ); //NOTE: should use videobuf_queue_vmalloc_init, not videobuf_queue_sg_init

					#if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,24)
	
					struct videobuf_dmabuf * F9FF98D32C15242b8979B2F47C7F951BE = videobuf_to_dma( &pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B );

					#else
					
					struct videobuf_dmabuf * F9FF98D32C15242b8979B2F47C7F951BE = &(pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.dma);
	
					#endif

					struct scatterlist * F1A9C3A4F207F456cAFB0163C5F30C91D = (struct scatterlist *)(F9FF98D32C15242b8979B2F47C7F951BE->sglist);
			
					dma_addr_t F6F32B5439E4C42f095E08326DFA73107 = sg_dma_address( F1A9C3A4F207F456cAFB0163C5F30C91D );
			
					ULONG F2B6709824D504332834A012BCBE1945D = sg_dma_len( F1A9C3A4F207F456cAFB0163C5F30C91D );//4096, or 4080, update this every time

					ULONG count = 0;

					ULONG F08220F0B4E654ce48460AA8A5F049BFB = F9FF98D32C15242b8979B2F47C7F951BE->sglen; // (FF7E121E5F6A1461dA967001C1404EB52/F2B6709824D504332834A012BCBE1945D) + 1

					ULONG FF7E121E5F6A1461dA967001C1404EB52 = pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size;

					if( FF7E121E5F6A1461dA967001C1404EB52 <= 0 || F2B6709824D504332834A012BCBE1945D == 0 || F08220F0B4E654ce48460AA8A5F049BFB == 0)
					{
						F6E2E659AAB8C4494A193C313276DAA65[ 0 ][ k ] = TRUE;
	
						continue;
					}

					BYTE* pe = (BYTE*)phys_to_virt(F6F32B5439E4C42f095E08326DFA73107);

					if( pe == NULL ) { F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "can not allocate pe()\n" ); continue; }

					if( pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.state != VIDEOBUF_QUEUED ) { F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "pe state error(%x)\n", pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.state ); continue; }

					// COPY VIDEO FRAME TO VIDEO BUFFER 
					//
					ULONG cxe = F02B309C176EE43069FA75F18FD5EBA3E;

					//ULONG cye = pVideos[ 0 ]->F5B8891B732954fc2B26B7BFFCB15B596;

					ULONG cye  = p_sys_cfg->n_input_video_resolution_cy;

					if( pDevice->m_nCustomAnalogVideoInterleavedProperty == 1 )
					{
						cye *= 2;
					}

					ULONG j = (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.input + 1) % SA7160_MAX_BUFFER;// fetch the previous 2 DMA

					po = (BYTE*)pDevice->m_SA7160_video_buffer[ j ]; 

					if( pe && po ) {

						if( pDevice->m_nAnalogCopyProtMacrovisionProperty == 1 )//HDCP
						{
							F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] m_nAnalogCopyProtMacrovisionProperty == 1!!!\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );
						
							if( (pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 != 0) && (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.state == VIDEOBUF_QUEUED) )
							{
								while( FF7E121E5F6A1461dA967001C1404EB52 ) {

									if( FF7E121E5F6A1461dA967001C1404EB52 < 4096 ) {

										memset(pe, 0x00, FF7E121E5F6A1461dA967001C1404EB52);

										FF7E121E5F6A1461dA967001C1404EB52 -= FF7E121E5F6A1461dA967001C1404EB52;

										break;
									}
									else {

										memset(pe, 0x00, F2B6709824D504332834A012BCBE1945D);

										po += F2B6709824D504332834A012BCBE1945D;

										FF7E121E5F6A1461dA967001C1404EB52 -= F2B6709824D504332834A012BCBE1945D;

										F1A9C3A4F207F456cAFB0163C5F30C91D++;

										count++;

										if( count < F08220F0B4E654ce48460AA8A5F049BFB ) {

											pe = sg_dma_address( F1A9C3A4F207F456cAFB0163C5F30C91D );

											pe = (BYTE*)phys_to_virt(pe);

											F2B6709824D504332834A012BCBE1945D = sg_dma_len( F1A9C3A4F207F456cAFB0163C5F30C91D );
										}
										else {
											break; 
										}
									}
								}//end of while
							}
						}
						else
						{
							if( (pDevice->iManufacturer == 0x10 ||

								 pDevice->iManufacturer == 0x12 ||

								 pDevice->iManufacturer == 0x13 ||

								 pDevice->iManufacturer == 0x14 ||

								 pDevice->iManufacturer == 0x16 ||

								 pDevice->iManufacturer == 0x17 ||
					
								 pDevice->iManufacturer == 0x18 ||
							
								 (pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||

								 (pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 8) ||

								 (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) ||

								 (pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) ||
							 
								 (pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07)  )  
							 
								 &&	 (F02B309C176EE43069FA75F18FD5EBA3E != p_sys_cfg->n_input_video_resolution_cx) )
							{

								ULONG vbi_F3B543EB6D1C348648C2947A125F64000 = 0;

								ULONG src_cx = p_sys_cfg->n_input_video_resolution_cx;

								ULONG src_cy = p_sys_cfg->n_input_video_resolution_cy;

								ULONG src_fps = p_sys_cfg->n_input_video_resolution_fps;

								{	if( p_sys_cfg->n_input_video_resolution_interleaved ) { // [PROGRAM PATCH] SUPPORT VBI

										src_cy <<= 1;

										src_cy += p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000 << 1;

										vbi_F3B543EB6D1C348648C2947A125F64000 = p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000 << 1;
									}
									else {

										src_cy += p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000;

										vbi_F3B543EB6D1C348648C2947A125F64000 = p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000;
									}
								}
								//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "src_cx(0d%d) src_cy(0d%d) src_fps(0d%d) vbi_F3B543EB6D1C348648C2947A125F64000(0d%d)\n", src_cx, src_cy, src_fps, vbi_F3B543EB6D1C348648C2947A125F64000);
							
								ULONG  cw = pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.width;

								ULONG  cx = pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.width;

								ULONG  cy = pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.height;

								if( src_cx < cx ) {

									cx = src_cx;
								}
								if( src_cy < cy ) {
			
									cy = src_cy;
								}

								if( (pDevice->iManufacturer == 0x13) && 
								
									((p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
								
									(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
								
									(p_sys_cfg->n_input_video_resolution_cx >= 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

									(p_sys_cfg->n_input_video_resolution_cx >= 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
								
									(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120)) ) {
							
									F42A18AF66EFF459eA332CA253FFF8A65 * pBrotherDevice_1 = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + 1 ];
									F42A18AF66EFF459eA332CA253FFF8A65 * pBrotherDevice_2 = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + 2 ];
									F42A18AF66EFF459eA332CA253FFF8A65 * pBrotherDevice_3 = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + 3 ];

									if( pBrotherDevice_1 && pBrotherDevice_2 && pBrotherDevice_3) {

										if( (pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 != 0) && (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.state == VIDEOBUF_QUEUED) )
										{
											//A8B3AE340FFB46118473A18E8F7E3675_4chip(pe, pDevice->m_SA7160_video_buffer[ j ], pBrotherDevice_1->m_SA7160_video_buffer[ j ], pBrotherDevice_2->m_SA7160_video_buffer[ j ], pBrotherDevice_3->m_SA7160_video_buffer[ j ], pVideoBuffers[ 0 ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size / 2, pVideos[ 0 ]);

											//need to optimize here ???????

											//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "convert Y1 Y2\n");

											//BYTE * po_y1 = pBrotherDevice_2->m_SA7160_video_buffer[ j ];
											BYTE * po_y1 = (BYTE*)pDevice->m_SA7160_video_buffer[ j ];

											BYTE * po_cb = (BYTE*)pBrotherDevice_1->m_SA7160_video_buffer[ j ];

											//BYTE * po_y2 = pDevice->m_SA7160_video_buffer[ j ];
											BYTE * po_y2 = (BYTE*)pBrotherDevice_2->m_SA7160_video_buffer[ j ];

											BYTE * po_cr = (BYTE*)pBrotherDevice_3->m_SA7160_video_buffer[ j ];
											/*
											if( pe ) {

												ULONG y = 0;
												for( y = 0 ; y < cy ; y++ ) {

													BYTE * pe_tmp = pe;

													BYTE * po_y1_tmp = po_y1;

													BYTE * po_cb_tmp = po_cb;

													BYTE * po_y2_tmp = po_y2;

													BYTE * po_cr_tmp = po_cr;
							
													ULONG x = 0;
													for( x = 0 ; x < cx ; x += 2 ) {
							
														*pe_tmp++ = *po_y2_tmp++;

														*pe_tmp++ = *po_cr_tmp++;
							
														*pe_tmp++ = *po_y1_tmp++;

														*pe_tmp++ = *po_cb_tmp++;
													}
													po_y1 += src_cx >> 1;

													po_cb += src_cx >> 1;

													po_y2 += src_cx >> 1;

													po_cr += src_cx >> 1;

													pe += cw << 1;
												}
											}
											*/
											BYTE * po_y1_tmp = po_y1;

											BYTE * po_cb_tmp = po_cb;

											BYTE * po_y2_tmp = po_y2;

											BYTE * po_cr_tmp = po_cr;

											while( FF7E121E5F6A1461dA967001C1404EB52 ) {

												if( FF7E121E5F6A1461dA967001C1404EB52 < 4096 ) {

													for(i = 0; i < FF7E121E5F6A1461dA967001C1404EB52; i+=4)
													{
														*pe++ = *po_y2_tmp++;

														*pe++ = *po_cr_tmp++;
							
														*pe++ = *po_y1_tmp++;

														*pe++ = *po_cb_tmp++;
													}
											
													FF7E121E5F6A1461dA967001C1404EB52 = 0;

													break;
												}
												else {

													for(i = 0; i < F2B6709824D504332834A012BCBE1945D; i+=4)
													{
														*pe++ = *po_y2_tmp++;

														*pe++ = *po_cr_tmp++;
							
														*pe++ = *po_y1_tmp++;

														*pe++ = *po_cb_tmp++;
													}
											
													FF7E121E5F6A1461dA967001C1404EB52 -= F2B6709824D504332834A012BCBE1945D;

													F1A9C3A4F207F456cAFB0163C5F30C91D++;

													count++;

													if( count < F08220F0B4E654ce48460AA8A5F049BFB ) {

														pe = sg_dma_address( F1A9C3A4F207F456cAFB0163C5F30C91D );

														pe = (BYTE*)phys_to_virt(pe);

														F2B6709824D504332834A012BCBE1945D = sg_dma_len( F1A9C3A4F207F456cAFB0163C5F30C91D );
													}
													else {
														break; 
													}
												}
											}// end of while
										}
									}
								}
								else if( (pDevice->iManufacturer == 0x18) && SA7160_IS_4K2K_ENABLED( pDevice ) )
								{
									NULL;
								}
								else
								{
									F42A18AF66EFF459eA332CA253FFF8A65 * pBrotherDevice = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + 1 ];

									if( pBrotherDevice ) {

										if( (pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 != 0) && (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.state == VIDEOBUF_QUEUED) )
										{
											//A8B3AE340FFB46118473A18E8F7E3675(pe, pDevice->m_SA7160_video_buffer[ j ], pBrotherDevice->m_SA7160_video_buffer[ j ], pVideoBuffers[ 0 ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size / 2, pVideos[ 0 ]);
											//need to optimize here ???????
											BYTE * po_y = (BYTE*)pDevice->m_SA7160_video_buffer[ j ];

											BYTE * po_c = (BYTE*)pBrotherDevice->m_SA7160_video_buffer[ j ];//salve SA7160 DMA address

											if( pe ) {
												/*
												ULONG y = 0;
												for( y = 0 ; y < cy ; y++ ) {

													BYTE * pe_tmp = pe;

													BYTE * po_y_tmp = po_y;

													BYTE * po_c_tmp = po_c;

													ULONG x = 0 ;
													for( x = 0 ; x < cx ; x++ ) { // unpack_low / unpack_high
					
														if( y < vbi_F3B543EB6D1C348648C2947A125F64000 ) { // [PROGRAM PATCH] SUPPORT VBI

															USHORT H = (*po_y_tmp) & 0x3E; H <<= 4;

															USHORT L = (*po_c_tmp) & 0x3E; L >>= 1;

															USHORT D = H | L;

														   *pe_tmp++ = (BYTE)((D >> 0) & 0xFF);

														   *pe_tmp++ = (BYTE)((D >> 8) & 0x03);

															po_y_tmp++;

															po_c_tmp++;
														}
														else {

														   *pe_tmp++ = *po_y_tmp++;

														   *pe_tmp++ = *po_c_tmp++;
														}
													}
													if( y < vbi_F3B543EB6D1C348648C2947A125F64000 ) {

														F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X\n", y, po_y[ 0 ], po_c[ 0 ], po_y[ 1 ], po_c[ 1 ], po_y[ 2 ], po_c[ 2 ], po_y[ 3 ], po_c[ 3 ], po_y[ 4 ], po_c[ 4 ], po_y[ 5 ], po_c[ 5 ], po_y[ 6 ], po_c[ 6 ], po_y[ 7 ], po_c[ 7 ] );

														F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X\n", y, pe[ 0 ], pe[ 1 ], pe[ 2 ], pe[ 3 ], pe[ 4 ], pe[ 5 ], pe[ 6 ], pe[ 7 ], pe[ 8 ], pe[ 9 ], pe[ 10 ], pe[ 11 ], pe[ 12 ], pe[ 13 ], pe[ 14 ], pe[ 15 ] );
													}
													po_y += src_cx;

													po_c += src_cx;

													pe += cw << 1;
												}
												*/

												BYTE * po_y_tmp = po_y;

												BYTE * po_c_tmp = po_c;

												int vbi_counter = cx * vbi_F3B543EB6D1C348648C2947A125F64000;

												while( FF7E121E5F6A1461dA967001C1404EB52 ) {

													if( FF7E121E5F6A1461dA967001C1404EB52 < 4096 ) {
													
														for(i = 0; i < FF7E121E5F6A1461dA967001C1404EB52; i+=2)
														{
														   *pe++ = *po_y_tmp++;
														   *pe++ = *po_c_tmp++;
														}

														FF7E121E5F6A1461dA967001C1404EB52 = 0;

														break;
													}
													else {

														for(i = 0; i < F2B6709824D504332834A012BCBE1945D; i+=2)
														{
															//if(vbi_counter-- > 0 )
															if( vbi_counter > 0 )
															{
																USHORT H = (*po_y_tmp) & 0x3E; H <<= 4;

																USHORT L = (*po_c_tmp) & 0x3E; L >>= 1;

																USHORT D = H | L;

															   *pe++ = (BYTE)((D >> 0) & 0xFF);

															   *pe++ = (BYTE)((D >> 8) & 0x03);

																po_y_tmp++;

																po_c_tmp++;
																/*
																if(cx)
																{
																	if( ( vbi_counter % cx ) == 0 )//start of line
																	{

																		F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] line left %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X\n", vbi_counter / cx, po_y[ 0 ], po_c[ 0 ], po_y[ 1 ], po_c[ 1 ], po_y[ 2 ], po_c[ 2 ], po_y[ 3 ], po_c[ 3 ], po_y[ 4 ], po_c[ 4 ], po_y[ 5 ], po_c[ 5 ], po_y[ 6 ], po_c[ 6 ], po_y[ 7 ], po_c[ 7 ] );

																		F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] line left %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X %02X\n\n", vbi_counter / cx, pe[ 0 ], pe[ 1 ], pe[ 2 ], pe[ 3 ], pe[ 4 ], pe[ 5 ], pe[ 6 ], pe[ 7 ], pe[ 8 ], pe[ 9 ], pe[ 10 ], pe[ 11 ], pe[ 12 ], pe[ 13 ], pe[ 14 ], pe[ 15 ] );
																	}
																}
																*/
															}
															else
															{
																*pe++ = *po_y_tmp++;
																*pe++ = *po_c_tmp++;
															}
															vbi_counter--;
														}
											
														FF7E121E5F6A1461dA967001C1404EB52 -= F2B6709824D504332834A012BCBE1945D;

														F1A9C3A4F207F456cAFB0163C5F30C91D++;

														count++;

														if( count < F08220F0B4E654ce48460AA8A5F049BFB ) {

															pe = sg_dma_address( F1A9C3A4F207F456cAFB0163C5F30C91D );

															pe = (BYTE*)phys_to_virt(pe);

															F2B6709824D504332834A012BCBE1945D = sg_dma_len( F1A9C3A4F207F456cAFB0163C5F30C91D );
														}
														else {
															break; 
														}
													}
												}// end of while
											}
										}
									}
								}
							}
							else
							{
	
								//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] width(0d%d) height(0d%d) size(0d%d)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, pVideoBuffers[ 0 ]->F6A821C5E7AA043f999FB3C51DB94DD2B.width, pVideoBuffers[ 0 ]->F6A821C5E7AA043f999FB3C51DB94DD2B.height, pVideoBuffers[ 0 ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size );

								if( (cxe * cye * 2) == pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size )
								{
									if( (pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 != 0) && (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.state == VIDEOBUF_QUEUED) )
									{
										//memcpy( pe, po, (cxe * cye) * 2 ); 

										while( FF7E121E5F6A1461dA967001C1404EB52 ) {

											if( FF7E121E5F6A1461dA967001C1404EB52 < 4096 ) {
											
												memcpy(pe, po, FF7E121E5F6A1461dA967001C1404EB52);

												FF7E121E5F6A1461dA967001C1404EB52 = 0;

												break;
											}
											else {
											
												memcpy(pe, po, F2B6709824D504332834A012BCBE1945D);

												po += F2B6709824D504332834A012BCBE1945D;

												FF7E121E5F6A1461dA967001C1404EB52 -= F2B6709824D504332834A012BCBE1945D;

												F1A9C3A4F207F456cAFB0163C5F30C91D++;

												count++;

												if( count < F08220F0B4E654ce48460AA8A5F049BFB ) {

													pe = sg_dma_address( F1A9C3A4F207F456cAFB0163C5F30C91D );

													pe = (BYTE*)phys_to_virt(pe);

													F2B6709824D504332834A012BCBE1945D = sg_dma_len( F1A9C3A4F207F456cAFB0163C5F30C91D );
												}
												else {
													break; 
												}
											}
										}// end of while
									}
								}
								else
								{
									if( (pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 != 0) && (pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.state == VIDEOBUF_QUEUED) )
									{
									
										int min = MIN( cxe * cye * 2, pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.size);

										FF7E121E5F6A1461dA967001C1404EB52 = min;

										pDevice->m_buf_pos = 0;

										pDevice->m_src_pos = 0;

										while( FF7E121E5F6A1461dA967001C1404EB52 ) {

											if( FF7E121E5F6A1461dA967001C1404EB52 < 4096 ) {

												for(i = 0; i < FF7E121E5F6A1461dA967001C1404EB52; i++)
												{
													*pe++ = getpo(pDevice, pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.width, cxe, po);
												}

												FF7E121E5F6A1461dA967001C1404EB52 = 0;

												break;
											}
											else {

												for(i = 0; i < F2B6709824D504332834A012BCBE1945D; i++)
												{
													*pe++ = getpo(pDevice, pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.width, cxe, po);
												}

												FF7E121E5F6A1461dA967001C1404EB52 -= F2B6709824D504332834A012BCBE1945D;

												F1A9C3A4F207F456cAFB0163C5F30C91D++;

												count++;

												if( count < F08220F0B4E654ce48460AA8A5F049BFB ) {

													pe = sg_dma_address( F1A9C3A4F207F456cAFB0163C5F30C91D );

													pe = (BYTE*)phys_to_virt(pe);

													F2B6709824D504332834A012BCBE1945D = sg_dma_len( F1A9C3A4F207F456cAFB0163C5F30C91D );
												}
												else {
													break; 
												}
											}
										}// end of while

									
									}
								}

								/*
								//check frame interval
								struct timeval now_ts;
							
								wrapper_do_gettimeofday( &now_ts );

								ULONG diff = 0;
							
								if( now_ts.tv_sec == previous_ts[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE ].tv_sec)
								{
									diff = now_ts.tv_usec - previous_ts[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE ].tv_usec;
								}
								else
								{
									diff = (now_ts.tv_sec - previous_ts[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE ].tv_sec) * 1000000  + now_ts.tv_usec - previous_ts[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE ].tv_usec;
								}

								previous_ts[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE ].tv_sec = now_ts.tv_sec;

								previous_ts[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE ].tv_usec = now_ts.tv_usec;

								if((diff > 56000) || (diff < 24000))
								{
									F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] diff(0d%d)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, diff );
								}
								*/
							}
						}
					}//if( pe && po )

					//move to next video ring buffer
					if( C4E7BABA3C164ABA99E460C0B8165385_not_modified )// do only once
					{
						p_sys_cfg->C4E7BABA3C164ABA99E460C0B8165385 =  (p_sys_cfg->C4E7BABA3C164ABA99E460C0B8165385 + 1) % SA7160_MAX_BUFFER; //?????

						C4E7BABA3C164ABA99E460C0B8165385_not_modified = FALSE;
					}
					pVideoBuffers[ 0 ][ k ]->F6A821C5E7AA043f999FB3C51DB94DD2B.input = 0xFFFFFFFF; //
				}
			}//end of p_FDFC345768E394d138EA574DEB55B7949s[ 0 ] == TRUE
		}//end of for
	}


	return TRUE;
}

/*
BYTE base_ready = 0;
BYTE print_error = 0;
#define COMPARESIZE		(4*4*12)

short Buffer[1024];
short Buffer1[1024];

int offset[3] = {128, 64, 0};
int counter = 0;
BYTE audio_base[192];
BYTE audio_error[192];
*/

BOOLEAN	EBCFB2FF0E5F46BAB89C2DCB6DC14419( F42A18AF66EFF459eA332CA253FFF8A65 *pDevice, ULONG status, ULONG mask, FE8EB18A4C9984f9789EFF7C05EE073A0 * pAudios[ F03706E45925547d799BA016E4F0F6D6B ], FFE3034C8E38D40dbAF3D2CD6E461C55C * pAudioBuffers[ F03706E45925547d799BA016E4F0F6D6B ], BOOLEAN p_FDFC345768E394d138EA574DEB55B7949s[ F91863BEB45D34624A724F2D29823D9E3 ][ MAX_DEVICE_OPEN_NUM ], BOOLEAN F6E2E659AAB8C4494A193C313276DAA65[ F91863BEB45D34624A724F2D29823D9E3 ][ MAX_DEVICE_OPEN_NUM ] )
{
	// -----> tmStreamPort::tmIOnInterrupt() -----> tmHWStreamPort_Audio::tmIGetCurrentWritePosition()
	//
	FE8EB18A4C9984f9789EFF7C05EE073A0 * pAudio = pAudios[ 0 ];

	SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

	//BOOLEAN FDFC345768E394d138EA574DEB55B7949 = FALSE;

	BYTE * pout = NULL;
	
	LONG i_major = 0;

	ULONG i = 0;

	int k = 0;

	if( pAudio == NULL )
	{
		return FALSE;
	}

	if( status == 0xFFFFFFFF )
	{
		for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
		{
			if( pAudio->FB6E79A0780E64bb28A3308666E67881C->F13A906F1479D4245B9F207A09C70BCE6[ pAudio->F0DD7393CD1494e27A72652C7D1A97893 ] & ( 1 << k ) )
			{
				if( pAudio )
				{
					if( pAudio->F823E5E1F924443f8AD2BC9CBED4CE613[ k ] )
					{
						pout = (BYTE*) (pAudio->F823E5E1F924443f8AD2BC9CBED4CE613[ k ]->runtime->dma_area);
					}
				}
				if( pout ) 
				{
					pout += pAudio->F6578ACFCB40E44819A12FD3E27A48085[ k ] * pAudio->F1461B75D9C644717A130B5C10D966CF0;
			
					memset( pout, 0x00, 4096 );

					p_FDFC345768E394d138EA574DEB55B7949s[ 0 ][ k ] = TRUE;

				}
			}
		}
		return TRUE;
	}
//2 channel
//#ifndef ENABLE_8CHS
	if( (pDevice->iManufacturer & 0x10) == 0x10 && ENABLE_8CHS )
	{
		if( status & 0x0000000000000400 ) {

			//j=0,1 main chip,  J=2,3 slave chip
			//actual audio data is at FA81F93DB0A8D49bdBC3753334A5D581D[ 2 ], which is (4096*8) * 4, main chip use 1,2 (does not use 3,4)
			// slave chip use 3,4 (does not use 1,2)
			ULONG j = 0;
			for( j = 0 ; j < 4 ; j++ ) { 

				F42A18AF66EFF459eA332CA253FFF8A65 * p_device = (j < 2) ? pDevice : g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + 1 ];

				if( p_device == NULL ) { continue ; }

				ULONG i = 0;
		
				if( j == 0 || j == 2 ) {
			
					ULONG R00008168 = A77C4935F8134B048348571A43F2A9CA( p_device, 0x00008000 + 0x00000168 ); // BAM.DMA.BUF.MODE
	
					i = (R00008168 & 0x00000038) >> 3; i = (i + 1) % 8;
				}
				if( j == 1 || j == 3 ) {
				
					ULONG R0000818C = A77C4935F8134B048348571A43F2A9CA( p_device, 0x00008000 + 0x0000018C ); // BAM.DMA.BUF.MODE

					i = (R0000818C & 0x00000038) >> 3; i = (i + 1) % 8;
				}
				if( j == 0 ) {

					i_major = i;
				}
				dma_addr_t F6F32B5439E4C42f095E08326DFA73107_dummy = p_device->FA81F93DB0A8D49bdBC3753334A5D581D[ 1 ];

				UINT* pe = NULL;

				if( j == 0 || j == 2 ) {
			
					pe = (UINT *)(p_device->F41F19BDAA144449fA254B8E3282D1425[ 1 ] + 4096 * 1 * i + (0));

					F6F32B5439E4C42f095E08326DFA73107_dummy += 4096 * 1 * 8;
				}
				if( j == 1 || j == 3 ) {
			
					pe = (UINT *)(p_device->F41F19BDAA144449fA254B8E3282D1425[ 1 ] + 4096 * 1 * i + (AMEBDAD_MAX_AUDIO_DMA_BUFFER_SIZE / 2));

					F6F32B5439E4C42f095E08326DFA73107_dummy += (AMEBDAD_MAX_AUDIO_DMA_BUFFER_SIZE / 2);

					F6F32B5439E4C42f095E08326DFA73107_dummy += 4096 * 1 * 8;
				}
				{	dma_addr_t F6F32B5439E4C42f095E08326DFA73107 = p_device->FA81F93DB0A8D49bdBC3753334A5D581D[ 2 ]; 
			
					F6F32B5439E4C42f095E08326DFA73107 += (4096 * 1 * i_major);

					ULONG F2B6709824D504332834A012BCBE1945D = 4096 * 1;

					ULONG pages = 0;

					ULONG offset = F6F32B5439E4C42f095E08326DFA73107 & 0x00000FFF;
							
					if( j == 0 ) {

						F6F32B5439E4C42f095E08326DFA73107 += (4096 * 1 *  0);
					}
					if( j == 1 ) {

						F6F32B5439E4C42f095E08326DFA73107 += (4096 * 1 *  8);
					}
					if( j == 2 ) {

						F6F32B5439E4C42f095E08326DFA73107 += (4096 * 1 * 16);
					}
					if( j == 3 ) {

						F6F32B5439E4C42f095E08326DFA73107 += (4096 * 1 * 24);
					}
					while( F2B6709824D504332834A012BCBE1945D > 0 ) {

						*pe++ = F6F32B5439E4C42f095E08326DFA73107 & 0xFFFFF000;

						*pe++ = 0;

						pages++;

						if( pages >= 1024 ) { goto LOOP_END_AIP_MAPPINGS_2; }

						if( F2B6709824D504332834A012BCBE1945D > 4096 ) {

							if( F6F32B5439E4C42f095E08326DFA73107 & 0x0000000000000FFF ) {

								F2B6709824D504332834A012BCBE1945D -= (4096) - (F6F32B5439E4C42f095E08326DFA73107 & 0x00000FFF);
							}
							else {

								F2B6709824D504332834A012BCBE1945D -= (4096);
							}
							F6F32B5439E4C42f095E08326DFA73107 &= 0xFFFFFFFFFFFFF000;

							F6F32B5439E4C42f095E08326DFA73107 += 0x0000000000001000;

							continue ;
						}
						else {

							break ;
						}
					}

	LOOP_END_AIP_MAPPINGS_2:

				//	for( ; pages < 1024 ; pages++ ) {

					for( ; pages < 8 ; pages++ ) {

						*pe++ = F6F32B5439E4C42f095E08326DFA73107_dummy;

						*pe++ = 0;
					}
					if( j == 0 ) {

						//if( pAudio )
						for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
						{
							if( pAudio->FB6E79A0780E64bb28A3308666E67881C->F13A906F1479D4245B9F207A09C70BCE6[ pAudio->F0DD7393CD1494e27A72652C7D1A97893 ] & ( 1 << k ) )
							{
								p_FDFC345768E394d138EA574DEB55B7949s[ 0 ][ k ] = TRUE;

								UINT * F947DB5F969484d42AA3A243E06DB35EB_00 = NULL;
								UINT * F947DB5F969484d42AA3A243E06DB35EB_01 = NULL;
								UINT * F947DB5F969484d42AA3A243E06DB35EB_02 = NULL;
								UINT * F947DB5F969484d42AA3A243E06DB35EB_03 = NULL;

								pout = NULL;

								//copy buffer to AP for previous channel of interrupt

								if( p_device->F41F19BDAA144449fA254B8E3282D1425[ 2 ] )
								{
									F947DB5F969484d42AA3A243E06DB35EB_00 = (UINT *)(p_device->F41F19BDAA144449fA254B8E3282D1425[ 2 ] + (4096 * 1 * p_sys_cfg->n_previous_audio_channel) );
									F947DB5F969484d42AA3A243E06DB35EB_01 = (UINT *)(p_device->F41F19BDAA144449fA254B8E3282D1425[ 2 ] + (4096 * 8) + (4096 * 1 * p_sys_cfg->n_previous_audio_channel) );
								}
								if( g_pDevice[ p_device->F0C7DF8CDF1004a6eB97071CBDF459ECE + 1 ]->F41F19BDAA144449fA254B8E3282D1425[ 2 ] )
								{
									F947DB5F969484d42AA3A243E06DB35EB_02 = (UINT *)(g_pDevice[ p_device->F0C7DF8CDF1004a6eB97071CBDF459ECE + 1 ]->F41F19BDAA144449fA254B8E3282D1425[ 2 ] + (4096 * 8 * 2) + (4096 * 1 * p_sys_cfg->n_previous_audio_channel) );//??
									F947DB5F969484d42AA3A243E06DB35EB_03 = (UINT *)(g_pDevice[ p_device->F0C7DF8CDF1004a6eB97071CBDF459ECE + 1 ]->F41F19BDAA144449fA254B8E3282D1425[ 2 ] + (4096 * 8 * 3) + (4096 * 1 * p_sys_cfg->n_previous_audio_channel) );
								}
							
								if( pAudio->F823E5E1F924443f8AD2BC9CBED4CE613[ k ] )
								{
									pout = (BYTE*) (pAudio->F823E5E1F924443f8AD2BC9CBED4CE613[ k ]->runtime->dma_area);
								}

								if( F947DB5F969484d42AA3A243E06DB35EB_00 && F947DB5F969484d42AA3A243E06DB35EB_01 && F947DB5F969484d42AA3A243E06DB35EB_02 && F947DB5F969484d42AA3A243E06DB35EB_03 && pout ) 
								{
									pout += pAudio->F6578ACFCB40E44819A12FD3E27A48085[ k ] * pAudio->F1461B75D9C644717A130B5C10D966CF0;

									UINT * po_i2s_00 = (UINT *)(F947DB5F969484d42AA3A243E06DB35EB_00);

									UINT * po_i2s_01 = (UINT *)(F947DB5F969484d42AA3A243E06DB35EB_01);

									UINT * po_i2s_02 = (UINT *)(F947DB5F969484d42AA3A243E06DB35EB_02);

									UINT * po_i2s_03 = (UINT *)(F947DB5F969484d42AA3A243E06DB35EB_03);

									UINT * pe_i2s = (UINT *)(pout);

									ULONG size = 4096 / 4;

									ULONG w = 0;
									for( w = 0 ; w < size ; w++ ) {

										*pe_i2s++ = *po_i2s_00++;

										*pe_i2s++ = *po_i2s_01++;

										*pe_i2s++ = *po_i2s_02++;

										*pe_i2s++ = *po_i2s_03++;
									}

									pAudio->F6578ACFCB40E44819A12FD3E27A48085[ k ] = (pAudio->F6578ACFCB40E44819A12FD3E27A48085[ k ] + 1) % (pAudio->FD9C8A1F986EF488a8883B3CAD736747F);

									wrapper_snd_pcm_period_elapsed( pAudio->F823E5E1F924443f8AD2BC9CBED4CE613[ k ] );

								}
							}
						}
					}
					if( j == 0 || j == 2 ) {
			
						A60D06861EDC409FA66867980ABA9748( p_device, 0x00008000 + 0x016C + 0x04 * (i), offset );
					}
					if( j == 1 || j == 3 ) {
				
						A60D06861EDC409FA66867980ABA9748( p_device, 0x00008000 + 0x0190 + 0x04 * (i), offset );
					}
				}
			}//end of for

			p_sys_cfg->n_previous_audio_channel = (i_major + 6) % 8; // fetch the previous 2 DMA
		}//end of 0x400
	}
	else
	{
		if( status & 0x0000000000000C00 ) {

			if( status & 0x0000000000000400 ) {

				ULONG R00008168 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00008000 + 0x00000168 ); // BAM.DMA.BUF.MODE

				i = (R00008168 & 0x00000038) >> 3; i = ( i + 1 ) % 8;
			}

			if( status & 0x0000000000000800 ) {

				ULONG R0000818C = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00008000 + 0x0000018C ); // BAM.DMA.BUF.MODE

				i = (R0000818C & 0x00000038) >> 3; i = ( i + 1 ) % 8;
			}
			
			dma_addr_t F6F32B5439E4C42f095E08326DFA73107_dummy = pDevice->FA81F93DB0A8D49bdBC3753334A5D581D[ 1 ];

			UINT * pe = (UINT *)(pDevice->F41F19BDAA144449fA254B8E3282D1425[ 1 ] + 4096 * 1 * i );

			F6F32B5439E4C42f095E08326DFA73107_dummy += 4096 * 1 * 8;

			dma_addr_t F6F32B5439E4C42f095E08326DFA73107 = pDevice->FA81F93DB0A8D49bdBC3753334A5D581D[ 2 ];  

			F6F32B5439E4C42f095E08326DFA73107 += (4096 * 1 * i); 

			ULONG F2B6709824D504332834A012BCBE1945D = 4096;

			ULONG pages = 0;

			ULONG offset = F6F32B5439E4C42f095E08326DFA73107 & 0x00000FFF;

			while( F2B6709824D504332834A012BCBE1945D > 0 ) {

			   *pe++ = F6F32B5439E4C42f095E08326DFA73107 & 0xFFFFF000;

			   *pe++ = 0;


				pages++;

				if( pages >= 1024 ) { goto LOOP_END_AIP_MAPPINGS; }

				if( F2B6709824D504332834A012BCBE1945D > 4096 ) {

					if( F6F32B5439E4C42f095E08326DFA73107 & 0x0000000000000FFF ) {

						F2B6709824D504332834A012BCBE1945D -= (4096) - (F6F32B5439E4C42f095E08326DFA73107 & 0x00000FFF);
					}
					else {

						F2B6709824D504332834A012BCBE1945D -= (4096);
					}
					F6F32B5439E4C42f095E08326DFA73107 &= 0xFFFFFFFFFFFFF000;

					F6F32B5439E4C42f095E08326DFA73107 += 0x0000000000001000;

					continue ;
				}
				else {

					break ;
				}
			}

LOOP_END_AIP_MAPPINGS:

		//	for( ; pages < 1024 ; pages++ ) {

			for( ; pages < 8 ; pages++ ) {

			   *pe++ = F6F32B5439E4C42f095E08326DFA73107_dummy;

			   *pe++ = 0;
			}
						
			if( status & 0x0000000000000400 ) {
			
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x016C + 0x04 * (i), offset );
			}

			if( status & 0x0000000000000800 ) {
			
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00008000 + 0x0190 + 0x04 * (i), offset );
			}
		//}

			ULONG * F947DB5F969484d42AA3A243E06DB35EB = NULL;

			//copy buffer to AP for previous channel of interrupt
			if( pDevice->F41F19BDAA144449fA254B8E3282D1425[ 2 ] )
			{
				F947DB5F969484d42AA3A243E06DB35EB = (ULONG *)(pDevice->F41F19BDAA144449fA254B8E3282D1425[ 2 ] + (4096 * 1 * p_sys_cfg->n_previous_audio_channel) );
			}

			for(k = 0; k < MAX_DEVICE_OPEN_NUM; k++ )
			{
				pout = NULL;
				
				if( pAudio->FB6E79A0780E64bb28A3308666E67881C->F13A906F1479D4245B9F207A09C70BCE6[ pAudio->F0DD7393CD1494e27A72652C7D1A97893 ] & ( 1 << k ) )
				{
					if( pAudio->F823E5E1F924443f8AD2BC9CBED4CE613[ k ] )
					{
						pout = (BYTE*) (pAudio->F823E5E1F924443f8AD2BC9CBED4CE613[ k ]->runtime->dma_area);
					}
	
					if( F947DB5F969484d42AA3A243E06DB35EB && pout ) 
					{
						pout += pAudio->F6578ACFCB40E44819A12FD3E27A48085[ k ] * pAudio->F1461B75D9C644717A130B5C10D966CF0;
	
						if( (pDevice->iManufacturer == 0x1B) && (pDevice->m_nAnalogCrossbarAudioInputProperty == 1) ) // SC510N4.SDI LINE.IN
						{
							USHORT * pe_w = (USHORT *)(pout);
	
							USHORT * po_w = (USHORT *)(F947DB5F969484d42AA3A243E06DB35EB);
	
							if( pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE % 2 ) { po_w++; }
	
							ULONG i = 0;
	
							for( i = 0 ; i < 1024 ; i++ ) {
	
							   *pe_w++ = *po_w;
	
							   *pe_w++ = *po_w;
	
								po_w++;
	
								po_w++;
							}
				
						}
						else
						{
							memcpy( pout, F947DB5F969484d42AA3A243E06DB35EB, 4096 );
						}
					
						p_FDFC345768E394d138EA574DEB55B7949s[ 0 ][ k ] = TRUE;
	
						pAudio->F6578ACFCB40E44819A12FD3E27A48085[ k ] = (pAudio->F6578ACFCB40E44819A12FD3E27A48085[ k ] + 1) % (pAudio->FD9C8A1F986EF488a8883B3CAD736747F);
	
						wrapper_snd_pcm_period_elapsed( pAudio->F823E5E1F924443f8AD2BC9CBED4CE613[ k ] );
	
						//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "EBCFB2FF0E5F46BAB89C2DCB6DC14419() perform copy, n_previous_audio_channel(%d) k(%d) p_FDFC345768E394d138EA574DEB55B7949s(%x) pout(%x)\n", p_sys_cfg->n_previous_audio_channel, k, p_FDFC345768E394d138EA574DEB55B7949s[ 0 ][ k ], pout );
	
					}
					else
					{
			//			F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "EBCFB2FF0E5F46BAB89C2DCB6DC14419() F947DB5F969484d42AA3A243E06DB35EB(%x) pout(%x)\n", F947DB5F969484d42AA3A243E06DB35EB, pout );
					}
				}
			}
			p_sys_cfg->n_previous_audio_channel = (i + 6) % 8; // fetch the previous 2 DMA
		}//end of if c00
	}
	return TRUE;
}

static int DD0AB4D2D5F0453B8F9DEFA51F43AC42( void * FD51B2B4E0CAC4359A9EFA429A9E16157 )
{

	F42A18AF66EFF459eA332CA253FFF8A65 * pDevice = (F42A18AF66EFF459eA332CA253FFF8A65 *)FD51B2B4E0CAC4359A9EFA429A9E16157;

	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] DD0AB4D2D5F0453B8F9DEFA51F43AC42( enter ) - %08X\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), (unsigned int)(pDevice->m_pControlThread) );

	ULONG resets = 0;

	ULONG errors = 0;

	ULONG counts = 0;

	ULONG mod = 5; 

	ULONG backup_status = -1;

	ULONG no_signals = 0;

	if( pDevice->iManufacturer == 0x1C ) { mod = 50; }; // SWITCHING.CARD

	if( pDevice->iManufacturer == 0x0A ) { mod =  1; };

	if( pDevice->iManufacturer == 0x0D ) { mod =  1; };

	if( pDevice->iManufacturer == 0x18 ) { mod =  1; };

	if( pDevice->iManufacturer == 0x1A ) { mod =  1; };

	while( wrapper_kthread_should_stop() == FALSE ) {

		//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] counts(%d) start\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), counts );

		SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);

		if( (counts % mod) == 0 ) { 

			if( pDevice->bcdDevice == 0x12AB ||
				
				pDevice->bcdDevice == 0x1805 ) { // EURESYS

				// VIDEO FORAMT DETECTION
				//
				if( pDevice->iManufacturer == 0x19 ) { // SC510N1.2ND

					;
				}
				else if( pDevice->iManufacturer == 0x0A ||

						 pDevice->iManufacturer == 0x0D ||
						 
						 pDevice->iManufacturer == 0x18 ||

						 pDevice->iManufacturer == 0x1A ) {

						if( pDevice->iManufacturer == 0x18 ) {

							if( SA7160_IS_4K2K_ENABLED( pDevice ) ) {

								goto EXIT;
							}
						}
						CheckHDMIRX( pDevice );//6603
				}
				else if( pDevice->iManufacturer == 0x13 ) { // SC510N2.HDMI.4K2K.ADV7619

					if( g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + 1 ] == NULL ) { goto EXIT; }

					if( g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + 2 ] == NULL ) { goto EXIT; }

					if( g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + 3 ] == NULL ) { goto EXIT; }

					//peter fix
					//BYTE R68 = 0x00;
					
					//if( SA7160_GetADV7619Register( pDevice, 0x68, 0x04, &R68 ) == TRUE ) {

						//if( (R68 & 0x02) == 0x02 ) {

					BYTE R04 = 0x00;
					BYTE R07 = 0x00;
	
					if( SA7160_GetADV7619Register( pDevice, 0x68, 0x04, &R04 ) == TRUE ) {
	
						if( SA7160_GetADV7619Register( pDevice, 0x68, 0x07, &R07 ) == FALSE ) { goto EXIT; }
	
						if( (R07 & 0xA0) == 0xA0 ) //vertical lock & DE regeneration lock (h lock)
						{

							if( (R04 & 0x02) == 0x02 ) {//TMDS PLL locked
								DWORD n_h_active = 0;

								DWORD n_v_active_1 = 0;

								DWORD n_v_active_2 = 0;

								DWORD n_h_total = 0;

								DWORD n_v_total_1 = 0;

								DWORD n_v_total_2 = 0;

								DWORD n_is_interlace = 0;

								DWORD n_a_freq = 48000;

								DWORD TMDSFREQ_FRAC = 0;

								DWORD PIXEL_CLOCK = 0;

								DWORD fps = 0;

								DWORD bits = 8;
								//peter fix
								//BYTE R07 = 0;
							
								BYTE R08 = 0;
							
								BYTE R09 = 0;
							
								BYTE R0A = 0;
							
								BYTE R0B = 0;
							
								BYTE R0C = 0;
							
								BYTE R1E = 0;
							
								BYTE R1F = 0;
							
								BYTE R26 = 0;
							
								BYTE R27 = 0;
							
								BYTE R28 = 0;
							
								BYTE R29 = 0;
							
								BYTE R39 = 0;
						
								BYTE R51 = 0;
							
								BYTE R52 = 0;
								//peter fix
								//if( SA7160_GetADV7619Register( pDevice, 0x68, 0x07, &R07 ) == FALSE ) { goto EXIT; }

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x08, &R08 ) == FALSE ) { goto EXIT; }

								n_h_active = ((R07 & 0x1F) << 8) | R08;

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x09, &R09 ) == FALSE ) { goto EXIT; }

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x0A, &R0A ) == FALSE ) { goto EXIT; }

								n_v_active_1 = ((R09 & 0x1F) << 8) | R0A;

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x0B, &R0B ) == FALSE ) { goto EXIT; }

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x0C, &R0C ) == FALSE ) { goto EXIT; }

								n_v_active_2 = ((R0B & 0x1F) << 8) | R0C;

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x1E, &R1E ) == FALSE ) { goto EXIT; }

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x1F, &R1F ) == FALSE ) { goto EXIT; }

								n_h_total = (R1E << 8) | R1F;

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x26, &R26 ) == FALSE ) { goto EXIT; }

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x27, &R27 ) == FALSE ) { goto EXIT; }

								n_v_total_1 = ((R26 & 0x3F) << 8) | R27;

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x28, &R28 ) == FALSE ) { goto EXIT; }

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x29, &R29 ) == FALSE ) { goto EXIT; }

								n_v_total_2 = ((R28 & 0x3F) << 8) | R29;

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x0B, &R0B ) == FALSE ) { goto EXIT; }

								n_is_interlace = (R0B & 0x20) >> 5;

								if( (R0B & 0xC0) == 0x00 ) {

									bits = 8;
								}
								else if( (R0B & 0xC0) == 0x40 ) {

									bits = 10;
								}
								else if( (R0B & 0xC0) == 0x80 ) {

									bits = 12;
								}
								else if( (R0B & 0xC0) == 0xC0 ) {

									bits = 16;
								}
								else {

									bits = 8;
								}
								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x52, &R52 ) == FALSE ) { goto EXIT; }

								TMDSFREQ_FRAC = R52 & 0x7F;

								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x51, &R51 ) == FALSE ) { goto EXIT; }

								PIXEL_CLOCK = ((R51 & 0xFF) << 1) | ((R52 & 0x80) >> 7);

								PIXEL_CLOCK *= 1000000;

								PIXEL_CLOCK += ((TMDSFREQ_FRAC * 1000000) / 128);

								if( bits == 12 ) {

									PIXEL_CLOCK = (PIXEL_CLOCK * 2) / 3;
								}
								else if( bits == 10 ) {

									PIXEL_CLOCK = (PIXEL_CLOCK * 4) / 5;
								}
								else if( bits == 16 ) {

									PIXEL_CLOCK /= 2;
								}
								else {

									;
								}
								if( n_h_total && n_v_total_1 ) {

									if( n_is_interlace ) {
			
										ULONG tmp = n_h_total * ((n_v_total_1 + n_v_total_2) >> 1);

										if( tmp ) {

											if( PIXEL_CLOCK % tmp ) {

												fps = (PIXEL_CLOCK / tmp) + 1;
											}
											else {

												fps = (PIXEL_CLOCK / tmp);
											}
											fps *= 2;
										}
									}
									else {

										n_v_total_1 >>= 1;

										ULONG tmp = n_h_total * n_v_total_1;

										if( tmp > 0 ) {

											if( PIXEL_CLOCK % tmp ) {

												fps = (PIXEL_CLOCK / tmp) + 1;
											}
											else {

												fps = (PIXEL_CLOCK / tmp);
											}
										}
									}
								}
								if( SA7160_GetADV7619Register( pDevice, 0x68, 0x39, &R39 ) == FALSE ) { goto EXIT; }

								if( (R39 & 0x0F) == 0x00 ) { n_a_freq = 44100; } else 

								if( (R39 & 0x0F) == 0x02 ) { n_a_freq = 48000; } else 

								if( (R39 & 0x0F) == 0x03 ) { n_a_freq = 32000; }
								
								F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "HACTIVE = %d, VACTIVE1 = %d, VACTIVE2 = %d, HTOTAL = %d, VTOTAL1 = %d, VTOTAL2 = %d, TMDSFREQ_FRAC = %d, PIXEL_CLOCK = %d, FPS = %d, INTERLACE = %d\n", 
								
												 n_h_active, n_v_active_1, n_v_active_2, 
											
												 n_h_total, n_v_total_1, n_v_total_2, 
											
												 TMDSFREQ_FRAC, PIXEL_CLOCK, 
											 
												 fps, n_is_interlace);
								//via
								if( fps == 0 || n_v_total_1 >= 4000)
								{
									F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "EXIT fps(%d) n_v_total_1(%d)\n", fps, n_v_total_1 );
									goto EXIT;
								}
							
								ULONG x = n_h_active;

								ULONG y = n_v_active_1;

								if( x == 4096 && y == 2160 ) { x = 0; y = 0; }

								if( x != 0 && y != 0 ) {

									BYTE R05 = 0x00;

									if( SA7160_GetADV7619Register( pDevice, 0x68, 0x05, &R05 ) ) {

										pDevice->m_nAnalogCopyProtMacrovisionProperty = (R05 & 0x40) ? 1 : 0;
									}
									//should put here
									pDevice->m_nAnalogVideoDecoderStatusProperty = 1;
								}
								else {

									pDevice->m_nAnalogCopyProtMacrovisionProperty = 0;
								}
								if( p_sys_cfg->n_input_video_resolution_cx != x ||
									
									p_sys_cfg->n_input_video_resolution_cy != y ||

									p_sys_cfg->n_input_video_resolution_fps != fps ) {

									if( (x == 4096 && y == 2160 && fps >    0) ||
									
										(x >= 3840 && y == 2160 && fps >    0) ||
									
										(x >= 2800 && y == 2100 && fps >    0) ||

										(x >= 2560 && y == 1440 && fps >    0) ||
									
										(x == 1920 && y == 1080 && fps == 120) ) {

										p_sys_cfg->n_input_video_resolution_cx = x;

										p_sys_cfg->n_input_video_resolution_cy = y;

										p_sys_cfg->n_input_video_resolution_fps = fps;

										p_sys_cfg->n_input_video_resolution_fps_m = 0;

										p_sys_cfg->n_input_video_resolution_interleaved = 0;

										p_sys_cfg->n_input_video_resolution_h_total = 0;

										SA7160_SetADV7619Register( pDevice, 0x9A, 0x02, 0xF2 );

										SA7160_SetADV7619Register( pDevice, 0x9A, 0x05, 0x28 ); // EXTERNAL SYNC

										SA7160_SetADV7619Register( pDevice, 0x9A, 0x06, 0xA0 );

										SA7160_SetADV7619Register( pDevice, 0x9A, 0x03, 0x94 );
									
										SA7160_SetADV7619Register( pDevice, 0x4C, 0xC3, 0x80 );
									
										SA7160_SetADV7619Register( pDevice, 0x4C, 0xCF, 0x03 );
									
										SA7160_SetADV7619Register( pDevice, 0x9A, 0xDD, 0xA0 );

										FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x24, 0x01 );

										FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x25, 0x01 ); // EXTERNAL SYNC -> EMBEDDED SYNC
		
										F42A18AF66EFF459eA332CA253FFF8A65 * p_brother_device = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + 2 ];

										if( p_brother_device ) {
										
											F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] thread() setting FPGA(ITE6603) for 4K2K\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );

											ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( p_brother_device, 0x0000E000 + 0x0004 ); // GPIO.WR
										
											R0000E004 &=  0xFFFFFFF3; // 

										//	R0000E004 |=  0x00000004; // BYPASS

											R0000E004 &= ~0x00000004; // SPLIT

											A60D06861EDC409FA66867980ABA9748( p_brother_device, 0x0000E000 + 0x0004, R0000E004 ); wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(50) ); // GPIO.WR (HARDWARE.RESET)

											FB416CF1CDE54D39BFB1E336A29493C2( p_brother_device, 0x20, 0x01 ); // PORT#01

											FB416CF1CDE54D39BFB1E336A29493C2( p_brother_device, 0x24, 0x01 );

											FB416CF1CDE54D39BFB1E336A29493C2( p_brother_device, 0x25, 0x01 ); // EXTERNAL SYNC -> EMBEDDED SYNC
										}
									}
									else {

										F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] thread() ADV7619 not 4K2K ---\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );
									
										SA7160_SetADV7619Register( pDevice, 0x9A, 0x02, 0xF5 ); //

										SA7160_SetADV7619Register( pDevice, 0x9A, 0x05, 0x2C ); // EMBEDDED SYNC

										SA7160_SetADV7619Register( pDevice, 0x9A, 0x06, 0xA6 ); //

										SA7160_SetADV7619Register( pDevice, 0x9A, 0x03, 0x80 );
									
										SA7160_SetADV7619Register( pDevice, 0x4C, 0xC3, 0x00 );
									
										SA7160_SetADV7619Register( pDevice, 0x4C, 0xCF, 0x00 );
									
										SA7160_SetADV7619Register( pDevice, 0x9A, 0xDD, 0x00 );
									
										if( y == 1200 ) {

											FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x24, 0x01 );
										}
										else {

											FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x24, 0x00 );
										}
										FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x25, 0x01 );

										if( SA7160_IS_4K2K_ENABLED( pDevice ) ) {

											F42A18AF66EFF459eA332CA253FFF8A65 * p_brother_device = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + 2 ];

											if( p_brother_device ) {
											
												FB416CF1CDE54D39BFB1E336A29493C2( p_brother_device, 0x20, 0x00 ); // PORT#00

												FB416CF1CDE54D39BFB1E336A29493C2( p_brother_device, 0x24, 0x00 );

												FB416CF1CDE54D39BFB1E336A29493C2( p_brother_device, 0x25, 0x00 );

												SA7160_SYS_CFG * p_brother_sys_cfg = (SA7160_SYS_CFG *)(p_brother_device->m_pCustomSystemConfigProperty);

												p_brother_sys_cfg->n_input_video_resolution_cx = 0;

												p_brother_sys_cfg->n_input_video_resolution_cy = 0;

												p_brother_sys_cfg->n_input_video_resolution_fps = 0;

												p_brother_sys_cfg->n_input_video_resolution_fps_m = 0;

												p_brother_sys_cfg->n_input_video_resolution_interleaved = 0;
											}
										}
									}
									p_sys_cfg->n_input_video_resolution_cx = x;

									p_sys_cfg->n_input_video_resolution_cy = y;

									p_sys_cfg->n_input_video_resolution_fps = fps;

									p_sys_cfg->n_input_video_resolution_fps_m = 0;

									p_sys_cfg->n_input_video_resolution_interleaved = n_is_interlace;

									p_sys_cfg->n_input_video_resolution_h_total = 0;

									if( (x * y * fps) > (80000000) ||
							
										(x * y) > (2073600) ) {

										p_sys_cfg->b_input_video_resolution_spliter_mode = TRUE;
									}
									else {

										p_sys_cfg->b_input_video_resolution_spliter_mode = FALSE;
									}
									p_sys_cfg->b_input_video_signal_changed = TRUE;	

									pDevice->m_nCustomAnalogVideoResolutionProperty = (p_sys_cfg->n_input_video_resolution_cx << 16) | 

																					  (p_sys_cfg->n_input_video_resolution_cy <<  0);

									pDevice->m_nCustomAnalogVideoFrameRateProperty = (p_sys_cfg->n_input_video_resolution_fps);

									pDevice->m_nCustomAnalogVideoInterleavedProperty = (p_sys_cfg->n_input_video_resolution_interleaved);

									pDevice->m_nCustomAnalogAudioSampleFrequencyProperty = 48000;

									//pDevice->m_nAnalogVideoDecoderStatusProperty = 1;
								
									#ifdef ENABLE_1920X1080PX60FPS // +SC500

									// FPGA
									// 
									if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) ||
						
										(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) ||
										
										(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) ||

										(pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||
									
										(pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 8) ||
								
										(pDevice->iManufacturer == 0x10) ||
			
										(pDevice->iManufacturer == 0x12) ||
			
										(pDevice->iManufacturer == 0x13) ||
			
										(pDevice->iManufacturer == 0x14) ||
			
										(pDevice->iManufacturer == 0x16) ||
			
										(pDevice->iManufacturer == 0x17) ||

										(pDevice->iManufacturer == 0x18) ||
					
									   ((pDevice->iManufacturer & 0xF0) == 0x00 &&
								   
										(pDevice->iProduct & 0x0F) == 0x05) ) {

										if( (p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  768 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  800 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps ==  75) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps ==  75) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1400 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps ==  75) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps ==  85) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1680 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps ==  61) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps ==  60) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps ==  50) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

											(p_sys_cfg->n_input_video_resolution_cx == 1600 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
	 
											(p_sys_cfg->n_input_video_resolution_cx == 3840 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

											(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
										
											(p_sys_cfg->n_input_video_resolution_cx >= 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
										
											(p_sys_cfg->n_input_video_resolution_cx >= 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

											(p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

											(p_sys_cfg->n_input_video_resolution_h_total > 0 && 
										
											 p_sys_cfg->b_input_video_resolution_spliter_mode == TRUE) ) {

											if( ((pDevice->iManufacturer & 0xF0) == 0x00 &&
										   
												 (pDevice->iProduct & 0x0F) == 0x05) ) {

												FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); // BYPASS.MODE

												FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x00 ); // SPLIT.MODE
											}
											else if( pDevice->iManufacturer == 0x12 ||
											
													 pDevice->iManufacturer == 0x14 ) {

												FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); // BYPASS.MODE

												FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x00 ); // SPLIT.MODE
											}
											else if( pDevice->iManufacturer == 0x13 ||
											
													 pDevice->iManufacturer == 0x18 ||
											
													 pDevice->iManufacturer == 0x1A ) {

												F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] thread() setting FPGA(ADV7619) split for 4K2K\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );

												ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
											
												R0000E004 |=  0x00000004; // BYPASS.MODE

												A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

												R0000E004 &= ~0x00000004; // SPLITER.MODE

												A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
											}
											else {

												ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
											
												R0000E004 |=  0x00020000; // BYPASS.MODE

												A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

												R0000E004 &= ~0x00020000; // SPLITER.MODE

												A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
											}
										}
										else {

											if( ((pDevice->iManufacturer & 0xF0) == 0x00 &&
										   
												 (pDevice->iProduct & 0x0F) == 0x05) ) {

												FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x00 ); // SPLIT.MODE

												FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); // BYPASS.MODE
											}
											else if( pDevice->iManufacturer == 0x12 ||
											
													 pDevice->iManufacturer == 0x14 ) {

												FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x00 ); // SPLIT.MODE

												FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); // BYPASS.MODE
											}
											else if( pDevice->iManufacturer == 0x13 ||
											
													 pDevice->iManufacturer == 0x18 ||
											
													 pDevice->iManufacturer == 0x1A ) {

												ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
											
												R0000E004 &= ~0x00000004; // SPLIT.MODE

												A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

												R0000E004 |=  0x00000004; // BYPASS.MODE

												A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
											}
											else {

												ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
											
												R0000E004 &= ~0x00020000; // SPLIT.MODE

												A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

												R0000E004 |=  0x00020000; // BYPASS.MODE

												A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
											}
										}
									}
									#endif
								}
							}//end of TMDS PLL lock
						}//end of vertical filter lock & DE
						else {

							if( SA7160_IS_4K2K_ENABLED( pDevice ) ) {

								F42A18AF66EFF459eA332CA253FFF8A65 * p_brother_device = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + 2 ];

								if( p_brother_device ) {
																
									FB416CF1CDE54D39BFB1E336A29493C2( p_brother_device, 0x20, 0x00 ); // PORT#00

									FB416CF1CDE54D39BFB1E336A29493C2( p_brother_device, 0x24, 0x00 );

									FB416CF1CDE54D39BFB1E336A29493C2( p_brother_device, 0x25, 0x00 );

									SA7160_SYS_CFG * p_brother_sys_cfg = (SA7160_SYS_CFG *)(p_brother_device->m_pCustomSystemConfigProperty);

									p_brother_sys_cfg->n_input_video_resolution_cx = 0;

									p_brother_sys_cfg->n_input_video_resolution_cy = 0;

									p_brother_sys_cfg->n_input_video_resolution_fps = 0;

									p_brother_sys_cfg->n_input_video_resolution_fps_m = 0;

									p_brother_sys_cfg->n_input_video_resolution_interleaved = 0;
								}
							}
							pDevice->m_nCustomAnalogVideoResolutionProperty = 0;

							pDevice->m_nCustomAnalogVideoFrameRateProperty = 0;

							pDevice->m_nCustomAnalogVideoInterleavedProperty = 0;

							pDevice->m_nCustomAnalogAudioSampleFrequencyProperty = 0;

							pDevice->m_nAnalogCopyProtMacrovisionProperty = 0;

							pDevice->m_nAnalogVideoDecoderStatusProperty = 0;

							p_sys_cfg->n_input_video_resolution_cx = 0;

							p_sys_cfg->n_input_video_resolution_cy = 0;

							p_sys_cfg->n_input_video_resolution_fps = 0;

							p_sys_cfg->n_input_video_resolution_fps_m = 0;

							p_sys_cfg->n_input_video_resolution_interleaved = 0;
						}////end of else of vertical filter lock & DE 
					}//end of read 0x04
				}//end of SC510N2.HDMI.4K2K.ADV7619
				else {

					if( (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x01) ||
					   
						(pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x04) ||
					   
						(pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x06) ||
						   
						(pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x07) ||
						   
						(pDevice->iProduct == 0xF5 && pDevice->iManufacturer == 0x02) ||
					   
						(pDevice->iManufacturer == 0x08) ||

						(pDevice->iManufacturer == 0x12) ||

						(pDevice->iManufacturer == 0x14) ||

						(pDevice->iManufacturer == 0x1B) ||
					   
						(pDevice->iManufacturer == 0x1C) ||
						
						(pDevice->m_nAnalogCrossbarVideoInputProperty == 4) ) {

						USHORT R00006 = FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x0006, 10 ) & 0x3F00; R00006 >>= 8; // VD_STD

						USHORT R0001F = FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x001F, 10 ) & 0x3FFF; // WORDS PER ACTIVE LINE

						USHORT R00022 = FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x0022, 10 ) & 0x2000; // M

						ULONG x = 0;

						ULONG y = 0;

						ULONG fps = 0;

						ULONG m = (R00022 & 0x2000) ? 1 : 0; // EX: 29.97 / 30.00

						ULONG n_blank_F3B543EB6D1C348648C2947A125F64000 = 0;

						if( R00006 == 0x16 || R00006 == 0x17 ) { x =  720; y =  240; fps = 60; n_blank_F3B543EB6D1C348648C2947A125F64000 =  525 -  480; }
	
						if( R00006 == 0x19 || R00006 == 0x1B ) { x =  720; y =  240; fps = 60; n_blank_F3B543EB6D1C348648C2947A125F64000 =  525 -  480; }
	
						if( R00006 == 0x18 || R00006 == 0x1A ) { x =  720; y =  288; fps = 50; n_blank_F3B543EB6D1C348648C2947A125F64000 =  625 -  576; }

						if( R00006 == 0x1E ) { 
							
							USHORT R00021 = FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x0021, 10 ) & 0x07FF; // LINES PER FRAME 

							if( R00021 == 525 ) {

							x = 720; y = 288; fps = 50; n_blank_F3B543EB6D1C348648C2947A125F64000 = 625 - 576;
							}
							else {

							x = 720; y = 240; fps = 60; n_blank_F3B543EB6D1C348648C2947A125F64000 = 525 - 480;
							}
						}
						if( R00006 == 0x20 || R00006 == 0x00 ) { x = 1280; y =  720; fps = 60; n_blank_F3B543EB6D1C348648C2947A125F64000 =  750 -  720; }
	
						if( R00006 == 0x24 || R00006 == 0x04 ) { x = 1280; y =  720; fps = 50; n_blank_F3B543EB6D1C348648C2947A125F64000 =  750 -  720; }
	
						if( R00006 == 0x22 || R00006 == 0x02 ) { x = 1280; y =  720; fps = 30; n_blank_F3B543EB6D1C348648C2947A125F64000 =  750 -  720; }
	
						if( R00006 == 0x26 || R00006 == 0x06 ) { x = 1280; y =  720; fps = 25; n_blank_F3B543EB6D1C348648C2947A125F64000 =  750 -  720; }
	
						if( R00006 == 0x28 || R00006 == 0x08 ) { x = 1280; y =  720; fps = 24; n_blank_F3B543EB6D1C348648C2947A125F64000 =  750 -  720; }
	
						if( R00006 == 0x2A || R00006 == 0x0A ) { x = 1920; y =  540; fps = 60; n_blank_F3B543EB6D1C348648C2947A125F64000 = 1125 - 1080; }
	
						if( R00006 == 0x2C || R00006 == 0x0C ) { x = 1920; y =  540; fps = 50; n_blank_F3B543EB6D1C348648C2947A125F64000 = 1250 - 1080; }
	
						if( R00006 == 0x2B || R00006 == 0x0B ) { x = 1920; y = 1080; fps = 30; n_blank_F3B543EB6D1C348648C2947A125F64000 = 1125 - 1080; }
	
						if( R00006 == 0x2D || R00006 == 0x0D ) { x = 1920; y = 1080; fps = 25; n_blank_F3B543EB6D1C348648C2947A125F64000 = 1125 - 1080; }
	
						if( R00006 == 0x30 || R00006 == 0x10 ) { x = 1920; y = 1080; fps = 24; n_blank_F3B543EB6D1C348648C2947A125F64000 = 1125 - 1080; }
	
						if( R00006 == 0x2B && R0001F == 1920 ) { x = 1920; y = 1080; fps = 60; n_blank_F3B543EB6D1C348648C2947A125F64000 = 1125 - 1080; }
	
						if( R00006 == 0x2D && R0001F == 1920 ) { x = 1920; y = 1080; fps = 50; n_blank_F3B543EB6D1C348648C2947A125F64000 = 1125 - 1080; }
					
						
						if( x != 0 && y != 0 ) {

							if( p_sys_cfg->n_input_video_resolution_cx != x ||

								p_sys_cfg->n_input_video_resolution_cy != y ||

								p_sys_cfg->n_input_video_resolution_fps != fps ) {

								p_sys_cfg->n_input_video_resolution_cx = x;

								p_sys_cfg->n_input_video_resolution_cy = y;

								p_sys_cfg->n_input_video_resolution_fps = fps;

								p_sys_cfg->n_input_video_resolution_fps_m = m;
	
								if( p_sys_cfg->n_input_video_resolution_cy == 240 ||
	
									p_sys_cfg->n_input_video_resolution_cy == 288 ||
	
									p_sys_cfg->n_input_video_resolution_cy == 540 ) {
	
									p_sys_cfg->n_input_video_resolution_interleaved = 1;
								}
								else {
	
									p_sys_cfg->n_input_video_resolution_interleaved = 0;
								}
								p_sys_cfg->b_input_video_signal_changed = TRUE;
	
								p_sys_cfg->n_input_audio_sampling_frequency = 48000;

								#ifdef ENABLE_1920X1080PX60FPS	// +SC500

								// FPGA
								// 
								if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) ||
									
									(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) ||
									
									(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) ||
	
									(pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||
									
									(pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 8) ||

									pDevice->iManufacturer == 0x10 ||
			
									pDevice->iManufacturer == 0x12 ||

									pDevice->iManufacturer == 0x13 ||

									pDevice->iManufacturer == 0x14 ||

									pDevice->iManufacturer == 0x16 ||

									pDevice->iManufacturer == 0x17 ||

									pDevice->iManufacturer == 0x18 ||

								   ((pDevice->iManufacturer & 0xF0) == 0x00 &&
								   
									(pDevice->iProduct & 0x0F) == 0x05) ) {

									ULONG n_skip_even_F3B543EB6D1C348648C2947A125F64000 = 0;
	
									ULONG n_skip_odd_F3B543EB6D1C348648C2947A125F64000 = 0;
	
									if( pDevice->m_nCustomAnalogVideoVbiLinesEnableProperty == TRUE &&
										
										pDevice->m_nCustomAnalogVideoVbiLinesProperty > 0 && 
										
										n_blank_F3B543EB6D1C348648C2947A125F64000 > pDevice->m_nCustomAnalogVideoVbiLinesProperty ) {
	
										if( p_sys_cfg->n_input_video_resolution_interleaved ) {
	
											p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000 = (pDevice->m_nCustomAnalogVideoVbiLinesProperty >> 1);
	
											n_skip_even_F3B543EB6D1C348648C2947A125F64000 = ((n_blank_F3B543EB6D1C348648C2947A125F64000 - pDevice->m_nCustomAnalogVideoVbiLinesProperty) + 1) >> 1;
	
											n_skip_odd_F3B543EB6D1C348648C2947A125F64000 = ((n_blank_F3B543EB6D1C348648C2947A125F64000 - pDevice->m_nCustomAnalogVideoVbiLinesProperty) + 0) >> 1;
										}
										else {
	
											p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000 = pDevice->m_nCustomAnalogVideoVbiLinesProperty;
	
											n_skip_even_F3B543EB6D1C348648C2947A125F64000 = n_blank_F3B543EB6D1C348648C2947A125F64000 - pDevice->m_nCustomAnalogVideoVbiLinesProperty;
	
											n_skip_odd_F3B543EB6D1C348648C2947A125F64000 = n_blank_F3B543EB6D1C348648C2947A125F64000 - pDevice->m_nCustomAnalogVideoVbiLinesProperty;
										}
										p_sys_cfg->b_input_video_resolution_spliter_mode = TRUE;
	
										p_sys_cfg->n_input_video_resolution_h_total = 1;	
									}
									else {
	
										p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000 = 0;
											
										p_sys_cfg->n_input_video_resolution_h_total = 0;
	
										p_sys_cfg->b_input_video_resolution_spliter_mode = FALSE;
	
										n_skip_even_F3B543EB6D1C348648C2947A125F64000 = 0;
	
										n_skip_odd_F3B543EB6D1C348648C2947A125F64000 = 0;
									}
									FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x26, (BYTE)(n_skip_even_F3B543EB6D1C348648C2947A125F64000) ); // [PROGRAM PATCH] SUPPORT VBI

									FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x27, (BYTE)(n_skip_odd_F3B543EB6D1C348648C2947A125F64000) ); // [PROGRAM PATCH] SUPPORT VBI

									if( (p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  768 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  800 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1400 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1680 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 61) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 60) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 50) ||

										(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120) ||
	
										(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
	
										(p_sys_cfg->n_input_video_resolution_cx == 1600 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
	
										(p_sys_cfg->n_input_video_resolution_cx == 3840 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
	
										(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
										
										(p_sys_cfg->n_input_video_resolution_cx >= 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
	
										(p_sys_cfg->n_input_video_resolution_cx >= 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

										(p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
	
										(p_sys_cfg->n_input_video_resolution_h_total > 0 && 

									 	p_sys_cfg->b_input_video_resolution_spliter_mode == TRUE) ) {

										if( ((pDevice->iManufacturer & 0xF0) == 0x00 &&
										   
											 (pDevice->iProduct & 0x0F) == 0x05) ) {

											FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); // BYPASS.MODE

											FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x00 ); // SPLIT.MODE
										}
										else if( pDevice->iManufacturer == 0x12 || 
										
												pDevice->iManufacturer == 0x14) {

											FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); // BYPASS.MODE

											FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x00 ); // SPLIT.MODE
										}
										else if( pDevice->iManufacturer == 0x13 ||
												
												pDevice->iManufacturer == 0x18 ||

												pDevice->iManufacturer == 0x1A	) {

											ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
											
											R0000E004 |=  0x00000004; // BYPASS.MODE

											A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

											R0000E004 &= ~0x00000004; // SPLITER.MODE

											A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
										}
										else {

											ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
											
											R0000E004 |=  0x00020000; // BYPASS.MODE

											A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

											R0000E004 &= ~0x00020000; // SPLITER.MODE

											A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
										}
									}
									else {

										if( ((pDevice->iManufacturer & 0xF0) == 0x00 &&
										   
											 (pDevice->iProduct & 0x0F) == 0x05) ) {

											FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x00 ); // SPLIT.MODE

											FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); // BYPASS.MODE
										}
										else if( pDevice->iManufacturer == 0x12 ||
											
												pDevice->iManufacturer == 0x14 ) {

											FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x00 ); // SPLIT.MODE

											FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); // BYPASS.MODE
										}
										else if( pDevice->iManufacturer == 0x13 ||
												
												pDevice->iManufacturer == 0x18 ||

												pDevice->iManufacturer == 0x1A	) {

											ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
											
											R0000E004 &= ~0x00000004; // SPLIT.MODE

											A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

											R0000E004 |=  0x00000004; // BYPASS.MODE

											A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
										}
										else {

											ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
											
											R0000E004 &= ~0x00020000; // SPLIT.MODE

											A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

											R0000E004 |=  0x00020000; // BYPASS.MODE

											A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
										}
									}
								}
								#endif
							}
							F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%d] GV7601_SDI_MODE_DETECT( %d x %d x %d )\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, (ULONG)(x), (ULONG)(y), (ULONG)(fps) );

							GET_ANC_DATA( pDevice );

							pDevice->m_nCustomAnalogVideoResolutionProperty = (p_sys_cfg->n_input_video_resolution_cx << 16) | 
	
																			  (p_sys_cfg->n_input_video_resolution_cy <<  0);
	
							pDevice->m_nCustomAnalogVideoFrameRateProperty = (p_sys_cfg->n_input_video_resolution_fps);
	
							pDevice->m_nCustomAnalogVideoInterleavedProperty = (p_sys_cfg->n_input_video_resolution_interleaved);

							pDevice->m_nCustomAnalogAudioSampleFrequencyProperty = 48000;

							pDevice->m_nAnalogCopyProtMacrovisionProperty = 0;

							pDevice->m_nAnalogVideoDecoderStatusProperty = 1;
						}
						else {


							p_sys_cfg->n_input_video_resolution_cx = 0;
							p_sys_cfg->n_input_video_resolution_cy = 0;
							p_sys_cfg->n_input_video_resolution_fps = 0;

							F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "\n" );
							F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "[%d]GV7601_SDI_MODE_DETECT() R00006(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R00006 );
							F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "[%d]GV7601_SDI_MODE_DETECT() R0001F(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R0001F );
							F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "[%d]GV7601_SDI_MODE_DETECT() R00020(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x0020, 10 ) );
							F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "[%d]GV7601_SDI_MODE_DETECT() R00021(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x0021, 10 ) );
							F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "[%d]GV7601_SDI_MODE_DETECT() R00022(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x0022, 10 ) );
							F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "[%d]GV7601_SDI_MODE_DETECT() R00023(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x0023, 10 ) );
							F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "[%d]GV7601_SDI_MODE_DETECT() R00024(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x0024, 10 ) );
							F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "[%d]GV7601_SDI_MODE_DETECT() R00025(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x0025, 10 ) );
							F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "[%d]GV7601_SDI_MODE_DETECT() R00026(0x%x)\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, FB6F05D19A4A4FC6A4E97328568DC0D8( pDevice, 0x0026, 10 ) );
							F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "\n" );

							if( (pDevice->iManufacturer == 0x1B && 
							
								pDevice->m_nCustomGpioSupportProperty == 8) ) { // +SC510N4
							
								if( p_sys_cfg->n_input_video_resolution_cx != 0 || 
									
									p_sys_cfg->n_input_video_resolution_cy != 0 ) {

									p_sys_cfg->n_input_video_resolution_cx = 0;

									p_sys_cfg->n_input_video_resolution_cy = 0;

									p_sys_cfg->n_input_video_resolution_fps = 0;

									p_sys_cfg->n_input_video_resolution_fps_m = 0;

									p_sys_cfg->n_input_video_resolution_interleaved = 0;

									ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
									
									if( (R0000E004 & 0x00020000) == 0x00000000 ) {

										R0000E004 &= ~0x00020000; // SPLIT.MODE

										A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

										R0000E004 |=  0x00020000; // BYPASS.MODE

										A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
									}
								}
							}
							pDevice->m_nCustomAnalogVideoResolutionProperty = 0;

							pDevice->m_nCustomAnalogVideoFrameRateProperty = 0;

							pDevice->m_nCustomAnalogVideoInterleavedProperty = 0;

							pDevice->m_nCustomAnalogAudioSampleFrequencyProperty = 0;

							pDevice->m_nAnalogCopyProtMacrovisionProperty = 0;

							pDevice->m_nAnalogVideoDecoderStatusProperty = 0;
						}
					}
					else {

						if( pDevice->m_nAnalogCrossbarVideoInputProperty == 5 || 
							
							pDevice->m_nAnalogCrossbarVideoInputProperty == 6 ) {
							
							if( (pDevice->iManufacturer == 0x10 && pDevice->iProduct == 0xE5) || // NINTENDO SC510N1.1ST

								(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST
										
								(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) || // EURESYS.SC512N1.DVI.1ST

								(pDevice->iManufacturer == 0x17) ) { // SC512N1.DVI.1ST

								//if( pDevice->m_nAnalogVideoDecoderStandardProperty & SUPPORTED_ANALOG_VIDEO_STANDARDS_60HZ ) {
								if( pDevice->FD314ADAD9404496b842EBFC396E875CB & V4L2_STD_525_60 ) {

									pDevice->m_nAnalogVideoDecoderStatusProperty = ((E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x01 ) & 0xC9) == 0x48) ? 1 : 0; wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );
								}

								//if( pDevice->m_nAnalogVideoDecoderStandardProperty & SUPPORTED_ANALOG_VIDEO_STANDARDS_50HZ ) {
								if( pDevice->FD314ADAD9404496b842EBFC396E875CB & V4L2_STD_625_50 ) {

									pDevice->m_nAnalogVideoDecoderStatusProperty = ((E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x01 ) & 0xC9) == 0x49) ? 1 : 0; wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(1) );
								}
								if( pDevice->m_nAnalogVideoDecoderStatusProperty == 1 ) {

									BYTE R30 = 0;
									
									R30 = (BYTE)(E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x30 )) & 0x0F;
									
									if( (R30 & 0x06) == 0x04 ) {

										pDevice->m_nAnalogCopyProtMacrovisionProperty = 1;
									}
									else if( (R30 & 0x07) == 0x07 ) {

										pDevice->m_nAnalogCopyProtMacrovisionProperty = 2;
									}
									else if( (R30 & 0x07) == 0x06 ) {

										pDevice->m_nAnalogCopyProtMacrovisionProperty = 3;
									}
									else {

										pDevice->m_nAnalogCopyProtMacrovisionProperty = 0;
									}
									if( pDevice->m_nAnalogCopyProtMacrovisionProperty == 0 ) {

										BYTE R53 = 0x80;

										BYTE R54 = 0x00;
										
										R53 = (BYTE)(E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x53 ));

										if( R53 & 0x80 ) {

											;
										}
										else {

											R54 = (BYTE)(E4353F1BD7E74904BE78DD9F001BD652( pDevice, 0x54 ));

											if( R54 & 0xC0 ) {

												pDevice->m_nAnalogCopyProtMacrovisionProperty = 3;
											}
										}
									}
								}
								else {

									pDevice->m_nAnalogCopyProtMacrovisionProperty = 0;
								}
							}
							else {

								pDevice->m_nAnalogVideoDecoderStatusProperty = 0;

								pDevice->m_nAnalogCopyProtMacrovisionProperty = 0;
							}
						}
						else {

							MST3367_VideoFormatDetection( pDevice );

						}
					}
				}
			}
		}

		if( pDevice->iManufacturer == 0x0A ||

			pDevice->iManufacturer == 0x0D ||

			pDevice->iManufacturer == 0x18 ||
			
			pDevice->iManufacturer == 0x1A ) {

			if( pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 > 0 &&
				
				pDevice->m_nAnalogVideoDecoderStatusProperty == 1 ) {

				if( pDevice->F03D1DD650AC64c28B04687338F970D0E[ 0 ] > 0 ) {

					pDevice->F03D1DD650AC64c28B04687338F970D0E[ 0 ] = 0;
				}
				else {

					ULONG R0000AFC0 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FC0 );

					ULONG R0000AFC4 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000A000 + 0x0FC4 );

					if( R0000AFC0 ) { A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0FC8, R0000AFC0 ); } //

					if( R0000AFC4 ) { A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000A000 + 0x0FCC, R0000AFC4 ); } //

					F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[%02d] [PCI.RESET] [%08X x %08X]\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, R0000AFC0, R0000AFC4);

					pDevice->F5C8C1DAFA2D74241A96FE41ED93197F8 = TRUE;

				}
			}
		}
		BOOL is_dma_reset = FALSE;

		if( pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 > 0 ) {

			if( pDevice->m_nAnalogVideoDecoderStatusProperty == 1 &&

				backup_status == 0 ) {

				is_dma_reset = TRUE;
			}
			backup_status = pDevice->m_nAnalogVideoDecoderStatusProperty;
		}
		if( pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 > 0 ) {

			// FORMAT EXCHANGE
			//
			SA7160_SYS_CFG * p_sys_cfg = (SA7160_SYS_CFG *)(pDevice->m_pCustomSystemConfigProperty);
			
			if( p_sys_cfg->b_input_video_signal_changed == TRUE ) {

				p_sys_cfg->b_input_video_signal_changed = FALSE;

				is_dma_reset = TRUE;

			//	ULONG j = -1;

				ULONG j = 0;

				ULONG cx = p_sys_cfg->n_input_video_resolution_cx;

				ULONG cy = p_sys_cfg->n_input_video_resolution_cy;

				ULONG fps = p_sys_cfg->n_input_video_resolution_fps;

				ULONG interleaved = p_sys_cfg->n_input_video_resolution_interleaved;

				ULONG h_total = p_sys_cfg->n_input_video_resolution_h_total;

				if( cx == 0 || cy == 0 ) {

					cx = 720;

					cy = 240;

					fps = 60;

					interleaved = 1;

					h_total = 0;
				}
				if( cx ==  720 && cy ==  240 && fps == 60 ) { j =  0; } 

				if( cx ==  720 && cy ==  288 && fps == 50 ) { j =  1; }

				if( cx ==  720 && cy ==  480 && fps == 60 ) { j =  2; }

				if( cx ==  720 && cy ==  576 && fps == 50 ) { j =  3; }

				if( cx == 1280 && cy ==  720 && fps == 30 ) { j =  4; }

				if( cx == 1280 && cy ==  720 && fps == 25 ) { j =  5; }

				if( cx == 1280 && cy ==  720 && fps == 24 ) { j =  6; }

				if( cx == 1280 && cy ==  720 && fps == 60 ) { j =  7; }

				if( cx == 1280 && cy ==  720 && fps == 50 ) { j =  8; }

				if( cx == 1920 && cy ==  540 && fps == 60 ) { j =  9; }

				if( cx == 1920 && cy ==  540 && fps == 50 ) { j = 10; }

				if( cx == 1920 && cy == 1080 && fps == 30 ) { j = 11; }

				if( cx == 1920 && cy == 1080 && fps == 25 ) { j = 12; }

				if( cx == 1920 && cy == 1080 && fps == 24 ) { j = 13; }

				if( cx == 1920 && cy == 1080 && fps == 60 ) { j = 14; }

				if( cx == 1920 && cy == 1080 && fps == 50 ) { j = 15; }

				///////////////////////////////////////////////////////

				if( cx ==  640 && cy ==  480 && fps == 60 ) { j = 16; }

				if( cx ==  800 && cy ==  600 && fps == 60 ) { j = 17; }

				if( cx == 1024 && cy ==  768 && fps == 60 ) { j = 18; }

				if( cx == 1280 && cy ==  960 && fps == 60 ) { j = 19; }

				if( cx == 1280 && cy == 1024 && fps == 60 ) { j = 20; }

				if( cx == 1440 && cy ==  900 && fps == 60 ) { j = 21; }

				if( cx == 1440 && cy ==  240 && fps == 60 ) { j = 22; }

				if( cx == 1440 && cy ==  288 && fps == 50 ) { j = 23; }

				if( cx ==  640 && cy ==  400 && fps == 60 ) { j = 24; }

				if( cx ==  640 && cy ==  384 && fps == 60 ) { j = 25; }

				if( cx == 1280 && cy ==  768 && fps == 60 ) { j = 26; }

				if( cx == 1280 && cy ==  800 && fps == 60 ) { j = 27; }

				if( cx == 1360 && cy ==  768 && fps == 60 ) { j = 28; }

				if( cx ==  800 && cy ==  600 && fps == 75 ) { j = 29; }

				if( cx ==  800 && cy ==  600 && fps == 85 ) { j = 30; }

				if( cx == 1024 && cy ==  768 && fps == 75 ) { j = 31; }

				if( cx == 1024 && cy ==  768 && fps == 85 ) { j = 32; }

				if( cx == 1280 && cy ==  768 && fps == 75 ) { j = 33; }

				if( cx == 1280 && cy ==  768 && fps == 85 ) { j = 34; }

				if( cx == 1280 && cy ==  800 && fps == 75 ) { j = 35; }

				if( cx == 1280 && cy ==  800 && fps == 85 ) { j = 36; }

				if( cx == 1280 && cy ==  960 && fps == 75 ) { j = 37; }

				if( cx == 1280 && cy ==  960 && fps == 85 ) { j = 38; }

				if( cx == 1280 && cy == 1024 && fps == 75 ) { j = 39; }

				if( cx == 1280 && cy == 1024 && fps == 85 ) { j = 40; }

				if( cx == 1440 && cy ==  900 && fps == 75 ) { j = 41; }

				if( cx == 1440 && cy ==  900 && fps == 85 ) { j = 42; }

				if( cx == 3840 && cy == 1024 && fps == 30 ) { j = 43; }

				if( cx == 1280 && cy ==  720 && fps == 61 ) { j = 44; }

				if( cx == 1920 && cy == 1080 && fps == 61 ) { j = 45; }

				if( cx == 1280 && cy == 1024 && fps == 50 ) { j = 46; }

				if( cx == 1280 && cy ==  720 && fps == 59 ) { j = 47; }

				if( cx == 1280 && cy == 1024 && fps == 59 ) { j = 48; }

				if( cx ==  800 && cy ==  600 && fps == 56 ) { j = 49; }

				if( cx ==  640 && cy ==  480 && fps == 72 ) { j = 50; }
				
				if( cx ==  640 && cy ==  480 && fps == 75 ) { j = 51; }
				
				if( cx ==  640 && cy ==  480 && fps == 85 ) { j = 52; }
				
				if( cx ==  800 && cy ==  600 && fps == 72 ) { j = 53; }
				
				if( cx == 1024 && cy ==  768 && fps == 70 ) { j = 54; }
				
				if( cx == 1152 && cy ==  864 && fps == 75 ) { j = 55; }
				
				if( cx == 1400 && cy == 1050 && fps == 60 ) { j = 56; }
				
				if( cx == 1024 && cy ==  768 && fps == 50 ) { j = 57; }
				
				if( cx ==  720 && cy ==  400 && fps == 85 ) { j = 58; }
				
				if( cx ==  832 && cy ==  624 && fps == 75 ) { j = 59; }

				if( cx == 1064 && cy ==  600 && fps == 60 ) { j = 60; }

				if( cx == 1400 && cy == 1050 && fps == 61 ) { j = 61; }

				if( cx == 1024 && cy ==  600 && fps == 60 ) { j = 62; }

				if( cx == 1360 && cy ==  768 && fps == 61 ) { j = 63; }

				if( cx == 1440 && cy ==  540 && fps == 50 ) { j = 64; }

				if( cx == 1680 && cy == 1050 && fps >   0 ) { j = 65; }

				if( cx ==  800 && cy ==  600 && fps == 76 ) { j = 66; }

				if( cx == 1920 && cy == 1200 && fps >   0 ) { j = 67; }

				if( cx == 1600 && cy == 1200 && fps >   0 ) { j = 68; }

				if( cx == 3840 && cy == 2160 && fps >   0 ) { j = 69; }

				if( cx ==  768 && cy ==  288 && fps == 50 ) { j = 70; }

				if( cx ==  800 && cy ==  600 && fps == 55 ) { j = 71; }

				if( cx ==  768 && cy ==  512 && fps == 55 ) { j = 72; }

				if( cx ==  800 && cy ==  500 && fps == 75 ) { j = 73; }
				
				if( cx == 2800 && cy == 2100 && fps >   0 ) { j = 74; }

				if( cx == 2560 && cy == 1440 && fps >   0 ) { j = 75; }

				ULONG REG_RESOLUTION_TABLE_CLONE[ 1 ][ 7 ][ 2 ] = { { { 0x0140, 0x00000000 + 0x00000000 }, 
				
																	  { 0x0144, 0x00000000 + 0x00000000 }, 
				
																	  { 0x0304, 0x00000000 }, 
				
																	  { 0x0300, 0x000020A0 }, 
				
																	  { 0x0100, 0x01004201 }, 
				
																	  { 0x0344, 0x00000000 }, 
				
																	  { 0x0354, 0x00000000 } } 
				};
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000000, 0x00010000 );	// VIP.MODE


				if( pDevice->iManufacturer == 0x0A ||

					pDevice->iManufacturer == 0x0D ||

					pDevice->iManufacturer == 0x13 ||

					pDevice->iManufacturer == 0x18 ||
						
					pDevice->iManufacturer == 0x1A ) {

					ULONG REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE [ 7 ] = {
						
						0x00040000, 

					   ((cx << 16) | (cy - 1)) + 0x00040000, 

					   ((cx << 16) | (cy - 0)), 

						0x000020A0 | (interleaved ?  0x80000000 : 0x00000000), 

						0x01004201 & (interleaved ? ~0x00000200 : 0xFFFFFFFF), 

						0x00000000 | (interleaved ?  cx << 2 : cx << 1),

						0x00000000 | (interleaved ?  cx << 1 : 0x00000000)
					};
					if( p_sys_cfg->b_input_video_resolution_spliter_mode == TRUE ) {

						REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 1 ] = ((cx >> 1) << 16 | (cy - 1)) + 0x00040000,
						
						REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 2 ] = ((cx >> 1) << 16 | (cy - 0)); 

						REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 5 ] = ((cx >> 1) << 1);

						REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 6 ] = 0x00000000;

						if( cy == 1200 ) {

							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 1 ] = ((cx << 16) | ((cy >> 1) - 1)) + 0x00040000,
							
							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 2 ] = ((cx << 16) | ((cy >> 1) - 0)); 

							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 5 ] = ((cx << 1));

							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 6 ] = 0x00000000;
						}
						if( (cx >= 3840 && cy == 2160) ||
							
							(cx == 4096 && cy == 2160) ||
							
							(cx == 2800 && cy == 2100) ||
							
							(cx == 2560 && cy == 1440) ) {

							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 1 ] = ((cx >> 1) << 16 | ((cy >> 1) - 1)) + 0x00040000,
							
							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 2 ] = ((cx >> 1) << 16 | ((cy >> 1) - 0)); 

							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 5 ] = ((cx >> 1) << 1);

							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 6 ] = 0x00000000;
						}
						if( cx == 1920 && 
							
							cy == 1080 && 
							
							fps == 120 ) {

							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 1 ] = ((cx >> 1) << 16 | ((cy >> 1) - 1)) + 0x00040000,
							
							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 2 ] = ((cx >> 1) << 16 | ((cy >> 1) - 0)); 

							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 5 ] = ((cx >> 1) << 1);

							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 6 ] = 0x00000000;
						}
					}
					else {

						if( pDevice->iManufacturer == 0x13 ) {

							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 0 ] = REG_RESOLUTION_TABLE[ j ][ 0 ][ 1 ];

							REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 1 ] = REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ 0 ] + ((cx << 16) | 
								
																														   (cy - 1));
						}
					}
					ULONG i = 0;
					for( i = 0 ; i < 7 ; i++ ) {

						A60D06861EDC409FA66867980ABA9748( pDevice, REG_RESOLUTION_TABLE_AUTO_ITE6603[ i ], REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ i ]);

						F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] reg(0x%x) value(0x%x) 1--\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, REG_RESOLUTION_TABLE_AUTO_ITE6603[ i ], REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ i ] );


						REG_RESOLUTION_TABLE_CLONE[ 0 ][ i ][ 1 ] = REG_RESOLUTION_TABLE_AUTO_ITE6603_VALUE[ i ];
					}
				}
				else if( h_total > 0 ) {

					if( p_sys_cfg->b_input_video_resolution_spliter_mode == FALSE ) {

						REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 0 ][ 1 ] = ((h_total - cx - 4) << 16);

						REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 2 ][ 1 ] = ((cx) << 16) + 

																	 ((cy) << 0);

						REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 1 ][ 1 ] = (REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 0 ][ 1 ]) +

																	 (REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 2 ][ 1 ]);

						REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 5 ][ 1 ] = ((cx) << 1);

						//peter ????????
						// [PROGRAM PATCH] SUPPORT VBI
						// 
						{	REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 3 ][ 1 ] = 0x000020A0 | (interleaved ?  0x80000000 : 0x00000000); 

							REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 4 ][ 1 ] = 0x01004201 & (interleaved ? ~0x00000200 : 0xFFFFFFFF); 

							REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 6 ][ 1 ] = 0x00000000 | (interleaved ?  cx >> 2 : 0x00000000);
						}


					}
					else {

						ULONG F3B543EB6D1C348648C2947A125F64000 = p_sys_cfg->n_input_video_resolution_vbi_F3B543EB6D1C348648C2947A125F64000; // [PROGRAM PATCH] SUPPORT VBI
						
						REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 0 ][ 1 ] = 0x00040000;

						REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 2 ][ 1 ] = ((cx >> 1) << 16) + 

																	 ((cy + F3B543EB6D1C348648C2947A125F64000) << 0);

						REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 1 ][ 1 ] = (REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 0 ][ 1 ]) +

																	 (REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 2 ][ 1 ]);

						REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 5 ][ 1 ] = ((cx >> 1) << 1);

						if( cy == 1200 ||
							
							cy == 2160 ||
							
							cy == 2100 ) {

							REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 2 ][ 1 ] = ((cx) << 16) + 

																		 ((cy) >> 1);

							REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 1 ][ 1 ] = (REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 0 ][ 1 ]) +

																		 (REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 2 ][ 1 ]);

							REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 5 ][ 1 ] = (cx << 1);
						}

						// [PROGRAM PATCH] SUPPORT VBI
						// 
						{	REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 3 ][ 1 ] = 0x000020A0 | (interleaved ?  0x80000000 : 0x00000000); 

							REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 4 ][ 1 ] = 0x01004201 & (interleaved ? ~0x00000200 : 0xFFFFFFFF); 

							REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ 6 ][ 1 ] = 0x00000000 | (interleaved ?  cx >> 2 : 0x00000000);
						}
					}
					ULONG i = 0;
					for( i = 0 ; i < 7 ; i++ ) { 

						ULONG INDEX = REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ i ][ 0 ];

						ULONG VALUE = REG_RESOLUTION_TABLE_CUSTOM[ 0 ][ i ][ 1 ];

						A60D06861EDC409FA66867980ABA9748( pDevice, INDEX, VALUE );

						F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] j(0x%x) INDEX(0x%x) VALUE(0x%x) 3\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), j, INDEX, VALUE);	
			
						REG_RESOLUTION_TABLE_CLONE[ 0 ][ i ][ 1 ] = VALUE;
					}
				}
				else {

					ULONG i = 0;
					for( i = 0 ; i < 7 ; i++ ) {

						ULONG INDEX = REG_RESOLUTION_TABLE[ j ][ i ][ 0 ];

						ULONG VALUE = REG_RESOLUTION_TABLE[ j ][ i ][ 1 ];

						if( j == 0 ||  j == 1 || j == 70) {

							if( (pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x01) ||
				   
								(pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x04) ||
								   
								(pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x06) ||
								   
								(pDevice->iProduct == 0xC5 && pDevice->iManufacturer == 0x07) ||
								   
								(pDevice->iProduct == 0xF5 && pDevice->iManufacturer == 0x02) ||

								(pDevice->iManufacturer == 0x08) ||
								   
								(pDevice->iManufacturer == 0x12) ||
								   
								(pDevice->iManufacturer == 0x14) ||

								(pDevice->iManufacturer == 0x1B) ||
								   
								(pDevice->iManufacturer == 0x1C) ||
								
								(pDevice->m_nAnalogCrossbarVideoInputProperty == 4) ) { // SDI.SD

								if( j == 0  || j == 1) 
								{
									INDEX = REG_RESOLUTION_TABLE_GV7601[ j ][ i ][ 0 ];

									VALUE = REG_RESOLUTION_TABLE_GV7601[ j ][ i ][ 1 ];
								}
							}
							else if( pDevice->m_nAnalogCrossbarVideoInputProperty == 5 ||  // COMPOSITE

									 pDevice->m_nAnalogCrossbarVideoInputProperty == 6 ) { // SVIDEO

								if( pDevice->iManufacturer == 0x09 ) {

									INDEX = REG_RESOLUTION_TABLE_ADV7181[ j ][ i ][ 0 ];

									VALUE = REG_RESOLUTION_TABLE_ADV7181[ j ][ i ][ 1 ];
								}
								else {

									//640*480  0
									//720*480  0
									//720*576  1
									//768*576 70

									if(j == 0)
									{
										//possible 720*240, 640*240, or no match
										if(cx ==  640 && cy ==  240 && fps == 60)
										{
											INDEX = REG_RESOLUTION_TABLE_TW9910[ 0 ][ i ][ 0 ];

											VALUE = REG_RESOLUTION_TABLE_TW9910[ 0 ][ i ][ 1 ];
										}
										else if(cx ==  720 && cy ==  240 && fps == 60)
										{
											INDEX = REG_RESOLUTION_TABLE_TW9910[ 1 ][ i ][ 0 ];

											VALUE = REG_RESOLUTION_TABLE_TW9910[ 1 ][ i ][ 1 ];
										}
										else
										{
											NULL;
										}
									}
									else if(j == 1)
									{
										INDEX = REG_RESOLUTION_TABLE_TW9910[ 2 ][ i ][ 0 ];

										VALUE = REG_RESOLUTION_TABLE_TW9910[ 2 ][ i ][ 1 ];
									}
									else if(j == 70)
									{
										INDEX = REG_RESOLUTION_TABLE_TW9910[ 3 ][ i ][ 0 ];

										VALUE = REG_RESOLUTION_TABLE_TW9910[ 3 ][ i ][ 1 ];
									}
									else
									{
										INDEX = REG_RESOLUTION_TABLE_TW9910[ 1 ][ i ][ 0 ];

										VALUE = REG_RESOLUTION_TABLE_TW9910[ 1 ][ i ][ 1 ];
									}

								}
							}
							else if( pDevice->iManufacturer == 0x09 ) {

								INDEX = REG_RESOLUTION_TABLE_ADV7181[ j + 2 ][ i ][ 0 ];

								VALUE = REG_RESOLUTION_TABLE_ADV7181[ j + 2 ][ i ][ 1 ];
							}
						}
						if( j == 4 || j == 5 || j == 6 ) {

							if( pDevice->m_nCustomCompanyIvsProperty ) {

								INDEX = REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ j - 4 ][ i ][ 0 ];

								VALUE = REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ j - 4 ][ i ][ 1 ];
							}
							if( p_sys_cfg->b_input_video_resolution_external_sync == TRUE ) {

								INDEX = REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ j - 4 ][ i ][ 0 ];

								VALUE = REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ j - 4 ][ i ][ 1 ];
							}
						}		
						if( j == 7 || j == 8 ) {

							if( pDevice->m_nCustomCompanyIvsProperty ) {

								INDEX = REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ j - 4 ][ i ][ 0 ];

								VALUE = REG_RESOLUTION_TABLE_IVS_SONY_CAMERA[ j - 4 ][ i ][ 1 ];
							}
						}		
						if( j == 7 || j == 8 || j == 9 || j == 10 || j == 11 || j == 12 ) {

							if( pDevice->m_nCustomSpecialCameraInputProperty == 1 ) {

								INDEX = REG_RESOLUTION_TABLE_ISMART_CAHC_CAMERA[ j - 7 ][ i ][ 0 ];

								VALUE = REG_RESOLUTION_TABLE_ISMART_CAHC_CAMERA[ j - 7 ][ i ][ 1 ];
							}
						}
						A60D06861EDC409FA66867980ABA9748( pDevice, INDEX, VALUE );

						REG_RESOLUTION_TABLE_CLONE[ 0 ][ i ][ 1 ] = VALUE;
					}
				}
				A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000000, 0xD0020000 ); // VIP.MODE

				F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] [01] [FORMAT.EXCHANGE.%02d] [%d x %d x %d]\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, j, p_sys_cfg->n_input_video_resolution_cx, p_sys_cfg->n_input_video_resolution_cy, p_sys_cfg->n_input_video_resolution_fps );

				#ifdef ENABLE_1920X1080PX60FPS // X

				if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) ||
					
					(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) ||

					(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) ||

					(pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||
					
					(pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 8) ||

					pDevice->iManufacturer == 0x10 ||
		
					pDevice->iManufacturer == 0x12 ||

					pDevice->iManufacturer == 0x13 ||

					pDevice->iManufacturer == 0x14 ||

					pDevice->iManufacturer == 0x16 ||

					pDevice->iManufacturer == 0x17 ||

					pDevice->iManufacturer == 0x18 ) {

					if( (cx == 1280 && cy ==  768 && fps ==  85) ||

						(cx == 1280 && cy ==  800 && fps ==  85) ||

						(cx == 1280 && cy ==  960 && fps ==  75) ||

						(cx == 1280 && cy ==  960 && fps ==  85) ||

						(cx == 1280 && cy == 1024 && fps ==  75) ||

						(cx == 1280 && cy == 1024 && fps ==  85) ||

						(cx == 1400 && cy == 1050 && fps >    0) ||

						(cx == 1440 && cy ==  900 && fps ==  75) ||

						(cx == 1440 && cy ==  900 && fps ==  85) ||

						(cx == 1680 && cy == 1050 && fps >    0) ||

						(cx == 1920 && cy == 1080 && fps ==  61) ||

						(cx == 1920 && cy == 1080 && fps ==  60) ||

						(cx == 1920 && cy == 1080 && fps ==  50) ||

						(cx == 1920 && cy == 1080 && fps == 120) ||

						(cx == 1920 && cy == 1200 && fps >    0) ||

						(cx == 1600 && cy == 1200 && fps >    0) ||

						(cx == 3840 && cy == 1024 && fps >    0) ||

						(cx >= 3840 && cy == 2160 && fps >    0) ||
						
						(cx >= 2800 && cy == 2100 && fps >    0) ||

						(cx >= 2560 && cy == 1440 && fps >    0) ||

						(cx == 4096 && cy == 2160 && fps >    0) ||
						
						(h_total > 0 && 
						
						 p_sys_cfg->b_input_video_resolution_spliter_mode == TRUE) ) {

						ULONG nums = 1;

						if( (cx == 4096 && cy == 2160 && fps >    0) ||
							
							(cx >= 3840 && cy == 2160 && fps >    0) ||
							
							(cx >= 2800 && cy == 2100 && fps >    0) ||
							
							(cx >= 2560 && cy == 1440 && fps >    0) ||

							(cx == 1920 && cy == 1080 && fps == 120) ) {

							nums = 3;
						}
						else {

							nums = 1;
						}
						ULONG n = 0;
						for( n = 0 ; n < nums ; n++ ) {

							F42A18AF66EFF459eA332CA253FFF8A65 * pBrotherDevice = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + n + 1 ];

							if( pBrotherDevice ) {

								if( pBrotherDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 > 0 ) { break ; } // +SC510N4
							
								A60D06861EDC409FA66867980ABA9748( pBrotherDevice, 0x00000000 + 0x00000000, 0x00010000 );	// VIP.MODE

								ULONG i = 0 ;
								for( i = 0 ; i < 7 ; i++ ) {

									ULONG INDEX = REG_RESOLUTION_TABLE_CLONE[ 0 ][ i ][ 0 ];

									ULONG VALUE = REG_RESOLUTION_TABLE_CLONE[ 0 ][ i ][ 1 ];

									A60D06861EDC409FA66867980ABA9748( pBrotherDevice, INDEX, VALUE );

									F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] reg(0x%x) value(0x%x) 1!!\n", n + 1, INDEX, VALUE );
								}
								A60D06861EDC409FA66867980ABA9748( pBrotherDevice, 0x00000000 + 0x00000000, 0xD0020000 ); // VIP.MODE
							}
						}
					}
				}
				#endif
			}
			
			if( pDevice->m_nAnalogVideoDecoderStatusProperty == 0 )
			{
				if( pDevice->m_No_Signal_no_output_property )
				{
					NULL;
				}
				else if(pDevice->iManufacturer == 0x18 && SA7160_IS_4K2K_ENABLED( pDevice ))
				{
					NULL;
				}
				else if(pDevice->iManufacturer == 0x19)
				{
					NULL;
				}
				else
				{
					pDevice->F5C8C1DAFA2D74241A96FE41ED93197F8 = 0x00000000;

					pDevice->F9D066B94377B4a9aB14E37D504955651 = 0xFFFFFFFF;

					pDevice->F69679D3D75724cd281AAC93AE8DFDF35 = 0xFFFFFFFF; 

					wrapper_tasklet_hi_schedule( &(pDevice->FB12FC3D237104676BD149F25E3D08571) );

					F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "[%02d] throw a colorbar pattern --\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );
				}
			}

			//since only one SA7160 can not handle below resolution, throw colorbar
			if( (p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  768 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  800 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1680 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps == 60) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 61) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 60) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 50) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps == 30) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps == 50) ||

				(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps == 60) ||

				(p_sys_cfg->n_input_video_resolution_cx == 3840 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps == 30) ) {
				
					if( ( (pDevice->iManufacturer & 0xF0) == 0x00 && (pDevice->iProduct & 0x0F) == 0x05) ||
						
							(pDevice->iManufacturer == 0x00 && (pDevice->iProduct & 0x0F) == 0x07 ) ||
																								
							(pDevice->iManufacturer == 0x03 && (pDevice->iProduct & 0x0F) == 0x07) )
					{
						pDevice->F5C8C1DAFA2D74241A96FE41ED93197F8 = 0x00000000;

						pDevice->F9D066B94377B4a9aB14E37D504955651 = 0xFFFFFFFF;

						pDevice->F69679D3D75724cd281AAC93AE8DFDF35 = 0xFFFFFFFF; 

						wrapper_tasklet_hi_schedule( &(pDevice->FB12FC3D237104676BD149F25E3D08571) );

						F966EAAB748564259849CBD3F3D6C48A7(  KERN_INFO, "[%d]throw a colorbar pattern ++\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE );
					}
			}

			if( pDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 > 0 ) {
					
				// ERROR CHECKING
				// 
				if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) ||
			
					(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) ||
								
					(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) ||

					(pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||
							
					(pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 8) ||
					
					(pDevice->iManufacturer == 0x10) ||

					(pDevice->iManufacturer == 0x12) ||

					(pDevice->iManufacturer == 0x13) ||

					(pDevice->iManufacturer == 0x14) ||

					(pDevice->iManufacturer == 0x16) ||

					(pDevice->iManufacturer == 0x17) ||

					(pDevice->iManufacturer == 0x18) ||
			
				   ((pDevice->iManufacturer & 0xF0) == 0x00 &&
				   
					(pDevice->iProduct & 0x0F) == 0x05) ) {

					if( (p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  768 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  800 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1400 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1680 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 61) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 60) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 50) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

						(p_sys_cfg->n_input_video_resolution_cx == 1600 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

						(p_sys_cfg->n_input_video_resolution_cx == 3840 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

						(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

						(p_sys_cfg->n_input_video_resolution_cx >= 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

						(p_sys_cfg->n_input_video_resolution_cx >= 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

						(p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
						
						(p_sys_cfg->n_input_video_resolution_h_total > 0 && 
						
						 p_sys_cfg->b_input_video_resolution_spliter_mode == TRUE) ) {
						
						BYTE CPLD_RF7 = E31CFF96CC1A4681A81E682331CFC3F3( pDevice, 0xF7 );

						FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0xF7, 0x00 );

						if( CPLD_RF7 == 0xA0 && resets++ >= 3 ) {

							resets = 0;
							
							is_dma_reset = TRUE;

							F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[CH%02d] [FPGA.RESET.#X] $$$\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE);
						}
					}
				}
				// ERROR CHECKING
				// 
				{	ULONG R00000FE0 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000FE0 ); // VIP.INT.STATUS
			
					if( pDevice->m_nAnalogVideoDecoderStatusProperty == 1 ) {

						if( (R00000FE0 & 0x00000080) ) {

							errors++;
							
							if( errors == 10 ) {

								errors = 0;

								ULONG R00000140 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000140 );

								ULONG R00000144 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x00000000 + 0x00000144 );

								ULONG xo = (R00000140 & 0xFFFF0000) >> 16;

								ULONG xe = (R00000144 & 0xFFFF0000) >> 16;

								F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "FROM( xo = %d, xe = %d )\n", xo, xe);

								if( xo >= 4 && 
									
									xe >= 4 ) {

									xo -= 4;

									xe -= 4;
								}
								F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "TO( xo = %d, xe = %d )\n", xo, xe);

								A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000140, (R00000140 & 0x0000FFFF) | (xo << 16) );

								A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000144, (R00000144 & 0x0000FFFF) | (xe << 16) );
							}
							
						}
						else {

							errors = 0;
						}
					}
					if( (R00000FE0 & 0x00000080) || 
						
						(is_dma_reset) ) {
			
						#ifdef ENABLE_1920X1080PX60FPS // +SC500

						// FPGA
						// 
						if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) ||
						
							(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) ||
					
							(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) ||

							(pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||
											
							(pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 8) ||
					
							(pDevice->iManufacturer == 0x10) ||
			
							(pDevice->iManufacturer == 0x12) ||
			
							(pDevice->iManufacturer == 0x13) ||
			
							(pDevice->iManufacturer == 0x14) ||
			
							(pDevice->iManufacturer == 0x16) ||
			
							(pDevice->iManufacturer == 0x17) ||

							(pDevice->iManufacturer == 0x18) ||
					
						   ((pDevice->iManufacturer & 0xF0) == 0x00 &&
						   
							(pDevice->iProduct & 0x0F) == 0x05) ) {

							if( (p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  768 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  800 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1400 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1680 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 61) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 60) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 50) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

								(p_sys_cfg->n_input_video_resolution_cx == 1600 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

								(p_sys_cfg->n_input_video_resolution_cx == 3840 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps >   0) ||
								
								(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
								
								(p_sys_cfg->n_input_video_resolution_cx >= 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

								(p_sys_cfg->n_input_video_resolution_cx >= 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

								(p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
								
								(p_sys_cfg->n_input_video_resolution_h_total > 0 && 
								
								 p_sys_cfg->b_input_video_resolution_spliter_mode == TRUE) ) {

								if( ((pDevice->iManufacturer & 0xF0) == 0x00 &&
											   
									 (pDevice->iProduct & 0x0F) == 0x05) ) {

									FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); // BYPASS.MODE

									FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x00 ); // SPLIT.MODE
								}
								else if( pDevice->iManufacturer == 0x12 ||
									
										 pDevice->iManufacturer == 0x14 ) {

									FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x01 ); // BYPASS.MODE

									FB416CF1CDE54D39BFB1E336A29493C2( pDevice, 0x21, 0x00 ); // SPLIT.MODE
								}
								else if( pDevice->iManufacturer == 0x13 ||
									
										 pDevice->iManufacturer == 0x18 ||
									
										 pDevice->iManufacturer == 0x1A ) {

									ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
									
									R0000E004 |=  0x00000004; // BYPASS.MODE

									A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

									R0000E004 &= ~0x00000004; // SPLITER.MODE

									A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
								}
								else {

									ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
									
									R0000E004 |=  0x00020000; // BYPASS.MODE

									A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );

									R0000E004 &= ~0x00020000; // SPLITER.MODE

									A60D06861EDC409FA66867980ABA9748( pDevice, 0x0000E000 + 0x0004, R0000E004 );
								}
								F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[CH%02d] [FPGA.RESET.#1]>>\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE);
							}
						}
						#endif

						A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000FE8, 0x000003FE );	// VIP.INT.CLEAR
			
						A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000000, 0x00010000 );	// VIP.MODE
			
						A60D06861EDC409FA66867980ABA9748( pDevice, 0x00000000 + 0x00000000, 0xD0020000 ); // VIP.MODE
						
						F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[CH%02d] [HARDWARE.RESET.#1]<<\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE);
					}
					#ifdef ENABLE_1920X1080PX60FPS // X

					if( (pDevice->iManufacturer == 0x01 && pDevice->iProduct == 0x07) ||
						
						(pDevice->iManufacturer == 0x04 && pDevice->iProduct == 0x07) ||
					
						(pDevice->iManufacturer == 0x0A && pDevice->iProduct == 0x07) ||

						(pDevice->iManufacturer == 0x1A && pDevice->m_nCustomGpioSupportProperty == 8) ||
									
						(pDevice->iManufacturer == 0x1B && pDevice->m_nCustomGpioSupportProperty == 8) ||
						
						(pDevice->iManufacturer == 0x10) ||
			
						(pDevice->iManufacturer == 0x12) ||
			
						(pDevice->iManufacturer == 0x13) ||
			
						(pDevice->iManufacturer == 0x14) ||
			
						(pDevice->iManufacturer == 0x16) ||
			
						(pDevice->iManufacturer == 0x17) ||

						(pDevice->iManufacturer == 0x18) ) {

						if( (p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  768 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  800 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy ==  960 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1280 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1400 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps == 75) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1440 && p_sys_cfg->n_input_video_resolution_cy ==  900 && p_sys_cfg->n_input_video_resolution_fps == 85) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1680 && p_sys_cfg->n_input_video_resolution_cy == 1050 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 61) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 60) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 50) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

							(p_sys_cfg->n_input_video_resolution_cx == 1600 && p_sys_cfg->n_input_video_resolution_cy == 1200 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

							(p_sys_cfg->n_input_video_resolution_cx == 3840 && p_sys_cfg->n_input_video_resolution_cy == 1024 && p_sys_cfg->n_input_video_resolution_fps >   0) ||

							(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
							
							(p_sys_cfg->n_input_video_resolution_cx >= 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

							(p_sys_cfg->n_input_video_resolution_cx >= 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||

							(p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
							
							(p_sys_cfg->n_input_video_resolution_h_total > 0 && 
							
							 p_sys_cfg->b_input_video_resolution_spliter_mode == TRUE) ) {

							ULONG nums = 1;

							if( (p_sys_cfg->n_input_video_resolution_cx == 4096 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
								
								(p_sys_cfg->n_input_video_resolution_cx >= 3840 && p_sys_cfg->n_input_video_resolution_cy == 2160 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
								
								(p_sys_cfg->n_input_video_resolution_cx >= 2800 && p_sys_cfg->n_input_video_resolution_cy == 2100 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
								
								(p_sys_cfg->n_input_video_resolution_cx >= 2560 && p_sys_cfg->n_input_video_resolution_cy == 1440 && p_sys_cfg->n_input_video_resolution_fps >    0) ||
								
								(p_sys_cfg->n_input_video_resolution_cx == 1920 && p_sys_cfg->n_input_video_resolution_cy == 1080 && p_sys_cfg->n_input_video_resolution_fps == 120) ) {

								nums = 3;
							}
							else {

								nums = 1;
							}

							ULONG n = 0;
							for( n = 0 ; n < nums ; n++ ) {

								F42A18AF66EFF459eA332CA253FFF8A65 * pBrotherDevice = g_pDevice[ pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE + n + 1 ];

								if( pBrotherDevice ) {
									
									if( pBrotherDevice->FC3FEC90DD3E6414c83437752D6A0B4B2 > 0 ) { break ; } // +SC510N4

									ULONG R00000FE0 = A77C4935F8134B048348571A43F2A9CA( pBrotherDevice, 0x00000000 + 0x00000FE0 ); // VIP.INT.STATUS

									if( (R00000FE0 & 0x00000080) || 
							
										(is_dma_reset) ) {
							
										if( pDevice->iManufacturer == 0x13 && n == 1 ) {

											ULONG R0000E004 = A77C4935F8134B048348571A43F2A9CA( pBrotherDevice, 0x0000E000 + 0x0004 ); // GPIO.WR
											
											R0000E004 |=  0x00000004; // BYPASS.MODE

											A60D06861EDC409FA66867980ABA9748( pBrotherDevice, 0x0000E000 + 0x0004, R0000E004 );

											R0000E004 &= ~0x00000004; // SPLITER.MODE

											A60D06861EDC409FA66867980ABA9748( pBrotherDevice, 0x0000E000 + 0x0004, R0000E004 );
											
											F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[CH%02d] [FPGA.RESET.#%d] **\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, n + 2);
										}
										A60D06861EDC409FA66867980ABA9748( pBrotherDevice, 0x00000000 + 0x00000FE8, 0x000003FE ); // VIP.INT.CLEAR
							
										A60D06861EDC409FA66867980ABA9748( pBrotherDevice, 0x00000000 + 0x00000000, 0x00010000 ); // VIP.MODE
							
										A60D06861EDC409FA66867980ABA9748( pBrotherDevice, 0x00000000 + 0x00000000, 0xD0020000 ); // VIP.MODE
							
										F1838C0176E054c129B7F2BF440D1236E( KERN_INFO, "[CH%02d] [HARDWARE.RESET.#%d] mmm\n", pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE, n + 2);
									}
								}
							}
						}
					}
					#endif
				}
			}



		}
		//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] m_nAnalogVideoDecoderStatusProperty(0d%d)\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), pDevice->m_nAnalogVideoDecoderStatusProperty );

EXIT:
		//F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] counts(%d) end\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), counts );

		counts++;

		wrapper_schedule_timeout_interruptible( wrapper_msecs_to_jiffies(100) );
		
	}
	F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] DD0AB4D2D5F0453B8F9DEFA51F43AC42( exit ) - %08X\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE), (unsigned int)(pDevice->m_pControlThread) );

	return 0;	
}

static int F5D69F1955AA4EBCAF770CF98A9B4992( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice )
{
	wrapper_down( &(pDevice->m_pControlSemaphore) ); 

	if( pDevice->m_pControlThread == NULL )
	{
		F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] F5D69F1955AA4EBCAF770CF98A9B4992()\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );
	
		pDevice->m_pControlThread = wrapper_kthread_run( DD0AB4D2D5F0453B8F9DEFA51F43AC42, pDevice, "DD0AB4D2D5F0453B8F9DEFA51F43AC42" );

		if( wrapper_IS_ERR( pDevice->m_pControlThread ) ) {

			int ret = wrapper_PTR_ERR( pDevice->m_pControlThread );

			pDevice->m_pControlThread = NULL;

			return ret;
		}
	}
	wrapper_up( &(pDevice->m_pControlSemaphore) );

	return 0;
}

static int B6B487882F964675B66617C7847B8BB5( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice )
{

	wrapper_down( &(pDevice->m_pControlSemaphore) ); 

	if( pDevice->m_pControlThread ) {

		if( pDevice->m_ReadyToStopControlThread == 0 )
		{
			pDevice->m_ReadyToStopControlThread = 1;

			F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] B6B487882F964675B66617C7847B8BB5()\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );

			wrapper_kthread_stop( pDevice->m_pControlThread ); // GOOD NEWS!! LINUX HAD ALREADY HELPED TO FINISH THE "STOP" SYNC.

			pDevice->m_pControlThread = NULL;

			pDevice->m_ReadyToStopControlThread = 0;

			F966EAAB748564259849CBD3F3D6C48A7( KERN_INFO, "[%02d] B6B487882F964675B66617C7847B8BB5() complete\n", (int)(pDevice->F0C7DF8CDF1004a6eB97071CBDF459ECE) );
		}

	}
	wrapper_up( &(pDevice->m_pControlSemaphore) );

	return 0;
}

int F5D69F1955AA4EBCAF770CF98A9B4992EX( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice )
{
	F5D69F1955AA4EBCAF770CF98A9B4992( pDevice );
}

int B6B487882F964675B66617C7847B8BB5EX( F42A18AF66EFF459eA332CA253FFF8A65 * pDevice )
{
	B6B487882F964675B66617C7847B8BB5( pDevice );
}
